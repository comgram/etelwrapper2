<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>EDI: sample_3.c</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">EDI
   &#160;<span id="projectnumber">4.25A</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('sample_3_8c-example.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">sample_3.c</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * sample_3.c</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * Copyright (c) 1997-2021 ETEL SA. All Rights Reserved.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * This software is the confidential and proprietary information of ETEL SA </span></div>
<div class="line"><span class="comment"> * (&quot;Confidential Information&quot;). You shall not disclose such Confidential </span></div>
<div class="line"><span class="comment"> * Information and shall use it only in accordance with the terms of the </span></div>
<div class="line"><span class="comment"> * license agreement you entered into with ETEL.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * This software is provided &quot;AS IS&quot; without a warranty or representations of any kind. </span></div>
<div class="line"><span class="comment"> * ALL EXPRESS OR IMPLIED CONDITIONS, REPRESENTATIONS AND WARRANTIES, INCLUDING ANY IMPLIED WARRANTY </span></div>
<div class="line"><span class="comment"> * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE OR NON-INFRINGEMENT ARE HEREBY EXCLUDED. ETEL AND ITS </span></div>
<div class="line"><span class="comment"> * LICENSORS SHALL NOT BE LIABLE FOR ANY DAMAGES SUFFERED BY LICENSEE AS A RESULT OF USING, MODIFYING OR DISTRIBUTING </span></div>
<div class="line"><span class="comment"> * THE SOFTWARE OR ITS DERIVATIVES. IN NO EVENT WILL ETEL OR ITS LICENSORS BE LIABLE FOR ANY LOST REVENUE, PROFIT OR </span></div>
<div class="line"><span class="comment"> * DATA, OR FOR DIRECT, INDIRECT, SPECIAL, CONSEQUENTIAL, INCIDENTAL OR PUNITIVE DAMAGES, HOWEVER CAUSED AND REGARDLESS </span></div>
<div class="line"><span class="comment"> * OF THE THEORY OF LIABILITY, ARISING OUT OF THE USE OF OR INABILITY TO USE SOFTWARE, EVEN IF ETEL HAS BEEN ADVISED OF </span></div>
<div class="line"><span class="comment"> * THE POSSIBILITY OF SUCH DAMAGES. THE ENTIRE RISK ARISING OUT OF USE, PERFORMANCE OR NON-PERFORMANCE OF THE SOFTWARE </span></div>
<div class="line"><span class="comment"> * REMAINS WITH THE LICENSEE. IF ETEL SHOULD NEVERTHELESS BE FOUND LIABLE, WHETER DIRECTLY OR INDRECTLY, FOR ANY LOSS, </span></div>
<div class="line"><span class="comment"> * DAMAGE OR INJURY ARISING UNDER THIS AGREEMENT OR OTHERWISE, REGARDLESS OF CAUSE OR ORIGIN, ON ANY BASIS WHATSOEVER, </span></div>
<div class="line"><span class="comment"> * ITS TOTAL MAXIMUM LIABILITY IS LIMITED TO CHF 100.000 WHICH WILL BE THE COMPLETE AND EXCLUSIVE REMEDY AGAINST ETEL.</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment"> * This software is in particular not designed or intended .for use in on-line control of aircraft, air traffic, aircraft </span></div>
<div class="line"><span class="comment"> * navigation or aircraft communications; or in the design, construction, Operation or maintenance of any nuclear facility. </span></div>
<div class="line"><span class="comment"> * Licensee represents and warrants that it will not use or redistribute the Software for such purposes.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * This third sample program extends sample_2.c and shows how to use</span></div>
<div class="line"><span class="comment"> * multithreading with ETEL&#39;s dlls. In this program, we will add a thread to</span></div>
<div class="line"><span class="comment"> * monitor the current position of the drive and a thread for emergency</span></div>
<div class="line"><span class="comment"> * stop. The monitoring thread will show the current position of both axes</span></div>
<div class="line"><span class="comment"> * every 100ms, and the second thread will wait indefinitely for a command from</span></div>
<div class="line"><span class="comment"> * the user: the space key will immediately stop the sequence, which will run</span></div>
<div class="line"><span class="comment"> * indefinitely otherwise.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * To run this demo without modification, you must have:</span></div>
<div class="line"><span class="comment"> *  - two linear motor with one AccurET controller configured.</span></div>
<div class="line"><span class="comment"> *  - a USB connection between the drive and the PC.</span></div>
<div class="line"><span class="comment"> *  - the drives must have the axes number 0 and 1.</span></div>
<div class="line"><span class="comment"> *  - KL45 must be set to insure that position 0 is inside the valid range.</span></div>
<div class="line"><span class="comment"> *  - KL34 and KL35 must be set properly.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment">/*** libraries ***/</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;Windows.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Include the standard I/O library, utilities and character conversion. */</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdlib.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;ctype.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Include the platform specific header for thread managment. */</span></div>
<div class="line"><span class="preprocessor">#include &lt;process.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Include the platform specific header for keyboard input. */</span></div>
<div class="line"><span class="preprocessor">#include &lt;conio.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="dsa40_8h.html">dsa40.h</a>&gt;</span></div>
<div class="line"><span class="comment">/* Include EDI high level library version 3.0x. */</span></div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment">/*** prototypes ***/</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * This utility function is defined to perform a simple xy movement.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> move_xy(DSA_DRIVE_GROUP* xy, <span class="keywordtype">double</span> x, <span class="keywordtype">double</span> y);</div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * The following two functions define the threads which will run independently.</span></div>
<div class="line"><span class="comment"> * The exact parameter type of theses functions as well as the return value</span></div>
<div class="line"><span class="comment"> * are platform specific.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> display_thread(<span class="keywordtype">void</span> *param);</div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> keyboard_thread(<span class="keywordtype">void</span> *param);</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment">/*** variables ***/</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * This global variable can be set by any thread to request the end of the</span></div>
<div class="line"><span class="comment"> * program. The main thread will listen to this variable at each cycle.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keyword">static</span> ebool abort_req;</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment">/*** functions ***/</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * Entry point function.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[])</div>
<div class="line">{</div>
<div class="line">    <span class="comment">/* Stores the min/max position of each axis. */</span></div>
<div class="line">    <span class="keywordtype">double</span> pos_min[2], pos_max[2];</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Definition of the drive and the group objects. */</span></div>
<div class="line">    DSA_DRIVE *drv[2] = { NULL, NULL };</div>
<div class="line">    DSA_DRIVE_GROUP *grp = NULL;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Definition of some global variable. */</span></div>
<div class="line">    <span class="keywordtype">int</span> err;</div>
<div class="line">    <span class="keywordtype">int</span> i;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Create two drive objects. */</span></div>
<div class="line">    <span class="keywordflow">for</span>(i = 0; i &lt; 2; i++) {</div>
<div class="line">        <span class="keywordflow">if</span> (err = <a name="a0"></a><a class="code" href="group__DSAAll.html#gabb207b622ef11d41d9dfadf965e77200">dsa_create_drive</a>(drv + i)) {</div>
<div class="line">            DSA_EXT_DIAG(err, drv[i]);</div>
<div class="line">            <span class="keywordflow">goto</span> _error;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Create the group object and set it up. */</span></div>
<div class="line">    <span class="keywordflow">if</span> (err = <a name="a1"></a><a class="code" href="group__DSAAll.html#ga0472e9073845dd55953e76f609710ae4">dsa_create_drive_group</a>(&amp;grp, 2)) {</div>
<div class="line">        DSA_EXT_DIAG(err, grp);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">for</span>(i = 0; i &lt; 2; i++) {</div>
<div class="line">        <span class="keywordflow">if</span> (err = <a name="a2"></a><a class="code" href="group__DSAAll.html#ga33ee7bc94a04ba24add4dc9d89146fb3">dsa_set_group_item</a>(grp, i, drv[i])) {</div>
<div class="line">            DSA_EXT_DIAG(err, grp);</div>
<div class="line">            <span class="keywordflow">goto</span> _error;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Create connections. */</span></div>
<div class="line">    <span class="keywordflow">if</span> (err = <a name="a3"></a><a class="code" href="group__DSAAll.html#gac4f6cffd7dd579bcb9a7f60af5f6bb29">dsa_open_u</a>(drv[0], <span class="stringliteral">&quot;etb:USB:0&quot;</span>)) {</div>
<div class="line">        DSA_EXT_DIAG(err, drv[0]);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (err = <a class="code" href="group__DSAAll.html#gac4f6cffd7dd579bcb9a7f60af5f6bb29">dsa_open_u</a>(drv[1], <span class="stringliteral">&quot;etb:USB:1&quot;</span>)) {</div>
<div class="line">        DSA_EXT_DIAG(err, drv[1]);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/*</span></div>
<div class="line"><span class="comment">     * We will start the two threads before sending any command to the</span></div>
<div class="line"><span class="comment">     * controllers. The mechanism for starting the two thread is platform</span></div>
<div class="line"><span class="comment">     * dependant.</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <span class="keywordflow">if</span>(_beginthread(display_thread, 0, grp) &lt;= 0) {</div>
<div class="line">        err = <a name="a4"></a><a class="code" href="dsa40_8h.html#ad3897184cf41bd80b0fdcdd019b9579d">DSA_ESYSTEM</a>;</div>
<div class="line">        printf(<span class="stringliteral">&quot;ERROR at file %s, line %d %s\n&quot;</span>, __FILE__, __LINE__, <a name="a5"></a><a class="code" href="group__DSAAll.html#ga0b777bbfa92488269624a52d7ff4d654">dsa_translate_edi_error</a>(err));</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span>(_beginthread(keyboard_thread, 0, grp) &lt;= 0) {</div>
<div class="line">        err = <a class="code" href="dsa40_8h.html#ad3897184cf41bd80b0fdcdd019b9579d">DSA_ESYSTEM</a>;</div>
<div class="line">        printf(<span class="stringliteral">&quot;ERROR at file %s, line %d %s\n&quot;</span>, __FILE__, __LINE__, <a class="code" href="group__DSAAll.html#ga0b777bbfa92488269624a52d7ff4d654">dsa_translate_edi_error</a>(err));</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Power on both axes. */</span></div>
<div class="line">    <span class="keywordflow">if</span> (err = <a name="a6"></a><a class="code" href="group__DSAAll.html#gad4479a364dbab3a12369d9550c58a4ea">dsa_power_on_s</a>(grp, 10000)) {</div>
<div class="line">        DSA_EXT_DIAG(err, grp);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Start the indexation on both axes. */</span></div>
<div class="line">    <span class="keywordflow">if</span> (err = <a name="a7"></a><a class="code" href="group__DSAAll.html#gaf918456506e721ed90e7481b0d1861f2">dsa_homing_start_s</a>(grp, 10000)) {</div>
<div class="line">        DSA_EXT_DIAG(err, grp);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Retrieve minimum / maximum positions. */</span></div>
<div class="line">    <span class="keywordflow">for</span>(i = 0; i &lt; 2; i++) {</div>
<div class="line">        <span class="keywordflow">if</span> (err = <a name="a8"></a><a class="code" href="group__DSAAll.html#ga1bc87f5faf678bc0f168cce0f7e154fa">dsa_get_min_soft_position_limit_s</a>(drv[i], &amp;pos_min[i],</div>
<div class="line">            <a name="a9"></a><a class="code" href="dsa40_8h.html#acf39ecf276e6aa5989552647d989f9bd">DSA_GET_CURRENT</a>, <a name="a10"></a><a class="code" href="dsa40_8h.html#afa8a5747e4999e6e003571e2d2d26f8c">DSA_DEF_TIMEOUT</a>)) {</div>
<div class="line">            DSA_EXT_DIAG(err, drv[i]);</div>
<div class="line">            <span class="keywordflow">goto</span> _error;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">if</span> (err = <a name="a11"></a><a class="code" href="group__DSAAll.html#ga6f73f038940c0bc739beb3372979a475">dsa_get_max_soft_position_limit_s</a>(drv[i], &amp;pos_max[i],</div>
<div class="line">            <a class="code" href="dsa40_8h.html#acf39ecf276e6aa5989552647d989f9bd">DSA_GET_CURRENT</a>, <a class="code" href="dsa40_8h.html#afa8a5747e4999e6e003571e2d2d26f8c">DSA_DEF_TIMEOUT</a>)) {</div>
<div class="line">            DSA_EXT_DIAG(err, drv[i]);</div>
<div class="line">            <span class="keywordflow">goto</span> _error;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Wait for the end of the movement of both axes. */</span></div>
<div class="line">    <span class="keywordflow">if</span> (err = <a name="a12"></a><a class="code" href="group__DSAAll.html#ga7647e24f7415c0573351aca11fb63f59">dsa_wait_movement_s</a>(grp, 60000)) {</div>
<div class="line">        DSA_EXT_DIAG(err, grp);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Set speed of both axes. */</span></div>
<div class="line">    <span class="keywordflow">if</span> (err = <a name="a13"></a><a class="code" href="group__DSAAll.html#ga9a0da989df97f28daf6cc2719634d40b">dsa_set_profile_velocity_s</a>(grp, 0, 1.0, <a class="code" href="dsa40_8h.html#afa8a5747e4999e6e003571e2d2d26f8c">DSA_DEF_TIMEOUT</a>)) {</div>
<div class="line">        DSA_EXT_DIAG(err, grp);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Set acceleration of both axes. */</span></div>
<div class="line">    <span class="keywordflow">if</span> (err = <a name="a14"></a><a class="code" href="group__DSAAll.html#ga2641a0388c420422789e73d6b86ba90b">dsa_set_profile_acceleration_s</a>(grp, 0, 1.0, <a class="code" href="dsa40_8h.html#afa8a5747e4999e6e003571e2d2d26f8c">DSA_DEF_TIMEOUT</a>)) {</div>
<div class="line">        DSA_EXT_DIAG(err, grp);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/*</span></div>
<div class="line"><span class="comment">     * Main program loop - the program will run indefinitely until the ESC or</span></div>
<div class="line"><span class="comment">     * SPACE key will be hit by the user.</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <span class="keywordflow">while</span>(!abort_req) {</div>
<div class="line">        <span class="keywordtype">double</span> x = pos_min[0] + (rand() * (pos_max[0] - pos_min[0])) / RAND_MAX;</div>
<div class="line">        <span class="keywordtype">double</span> y = pos_min[1] + (rand() * (pos_max[1] - pos_min[1])) / RAND_MAX;</div>
<div class="line">        <span class="keywordflow">if</span> (err = move_xy(grp, x, y))</div>
<div class="line">            <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (err = move_xy(grp, 0.0, 0.0))</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Power off the motor. */</span></div>
<div class="line">    <span class="keywordflow">if</span> (err = <a name="a15"></a><a class="code" href="group__DSAAll.html#ga710488b5bce619a8a58c0442dd1f7ba8">dsa_power_off_s</a>(grp, 60000)) {</div>
<div class="line">        DSA_EXT_DIAG(err, grp);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Close both connections. */</span></div>
<div class="line">    <span class="keywordflow">for</span>(i = 0; i &lt; 2; i++) {</div>
<div class="line">        <span class="keywordflow">if</span> (err = <a name="a16"></a><a class="code" href="group__DSAAll.html#ga96470cb9eaebf9228ce362404fbe0078">dsa_close</a>(drv[i])) {</div>
<div class="line">            DSA_EXT_DIAG(err, drv[i]);</div>
<div class="line">            <span class="keywordflow">goto</span> _error;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* We should then destroy the group and the drive object. */</span></div>
<div class="line">    <span class="keywordflow">if</span> (err = <a name="a17"></a><a class="code" href="group__DSAAll.html#ga67a49a697906d25519c124c191a5654a">dsa_destroy</a>(&amp;grp)) {</div>
<div class="line">        DSA_EXT_DIAG(err, grp);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">for</span>(i = 0; i &lt; 2; i++) {</div>
<div class="line">        <span class="keywordflow">if</span> (err = <a class="code" href="group__DSAAll.html#ga67a49a697906d25519c124c191a5654a">dsa_destroy</a>(drv + i)) {</div>
<div class="line">            DSA_EXT_DIAG(err, drv[i]);</div>
<div class="line">            <span class="keywordflow">goto</span> _error;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Success. */</span></div>
<div class="line">    printf(<span class="stringliteral">&quot;\nsuccess.\n&quot;</span>);</div>
<div class="line">    _getch();</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Error handler. */</span></div>
<div class="line">_error:</div>
<div class="line">    <span class="comment">/* Destroy the group if not already done. */</span></div>
<div class="line">    <span class="keywordflow">if</span>(<a name="a18"></a><a class="code" href="group__DSAAll.html#ga191d2aa60b4ff3f2635590ad57bed44b">dsa_is_valid_drive_group</a>(grp))</div>
<div class="line">        <a class="code" href="group__DSAAll.html#ga67a49a697906d25519c124c191a5654a">dsa_destroy</a>(&amp;grp);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Check the status of each drive object individually. */</span></div>
<div class="line">    <span class="keywordflow">for</span>(i = 0; i &lt; 2; i++) {</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Is the drive pointer valid ? */</span></div>
<div class="line">        <span class="keywordflow">if</span>(<a name="a19"></a><a class="code" href="group__DSAAll.html#ga989fc7fbd7d3b76cb0e3853aca34d4f7">dsa_is_valid_drive</a>(drv[i])) {</div>
<div class="line"> </div>
<div class="line">            <span class="comment">/* Is the drive open ? */</span></div>
<div class="line">            ebool open = 0;</div>
<div class="line">            <a name="a20"></a><a class="code" href="group__DSAAll.html#gabca5df9b7fb98299c620827b88bb733c">dsa_is_open</a>(drv[i], &amp;open);</div>
<div class="line">            <span class="keywordflow">if</span>(open) {</div>
<div class="line"> </div>
<div class="line">                <span class="comment">/* Stop movements. */</span></div>
<div class="line">                <a name="a21"></a><a class="code" href="group__DSAAll.html#gac1612522ee28aa29d1b6735934b53a8a">dsa_quick_stop_s</a>(drv[i], <a name="a22"></a><a class="code" href="dsa40_8h.html#a0caf300cd534be210d5c07411641f4fe">DSA_QS_PROGRAMMED_DEC</a>,</div>
<div class="line">                    <a name="a23"></a><a class="code" href="dsa40_8h.html#a5f8141ea9c17eb16757e8fdbe1fb8c66">DSA_QS_BYPASS</a> | <a name="a24"></a><a class="code" href="dsa40_8h.html#a243c0e90f35d4782b4704b0ca1a6dfd1">DSA_QS_STOP_SEQUENCE</a>, <a class="code" href="dsa40_8h.html#afa8a5747e4999e6e003571e2d2d26f8c">DSA_DEF_TIMEOUT</a>);</div>
<div class="line"> </div>
<div class="line">                <span class="comment">/* When the motor has stopped, a power off is done. */</span></div>
<div class="line">                <a class="code" href="group__DSAAll.html#ga7647e24f7415c0573351aca11fb63f59">dsa_wait_movement_s</a>(drv[i], 60000);</div>
<div class="line">                <a class="code" href="group__DSAAll.html#ga710488b5bce619a8a58c0442dd1f7ba8">dsa_power_off_s</a>(drv[i], 60000);</div>
<div class="line"> </div>
<div class="line">                <span class="comment">/* Close the connection. */</span></div>
<div class="line">                <a class="code" href="group__DSAAll.html#ga96470cb9eaebf9228ce362404fbe0078">dsa_close</a>(drv[i]);</div>
<div class="line">            }</div>
<div class="line"> </div>
<div class="line">            <span class="comment">/* Finally, release all resources to the OS. */</span></div>
<div class="line">            <a class="code" href="group__DSAAll.html#ga67a49a697906d25519c124c191a5654a">dsa_destroy</a>(drv + i);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    _getch();</div>
<div class="line">    <span class="keywordflow">return</span> 1;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * move_xy() function.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> move_xy(DSA_DRIVE_GROUP *xy, <span class="keywordtype">double</span> x, <span class="keywordtype">double</span> y)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">/* The common variables must be defined. */</span></div>
<div class="line">    <span class="keywordtype">int</span> err;</div>
<div class="line">    <span class="keywordtype">int</span> i;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Get individual drive objects. */</span></div>
<div class="line">    DSA_DRIVE *drv[2];</div>
<div class="line">    <span class="keywordflow">for</span>(i = 0; i &lt; 2; i++) {</div>
<div class="line">        <span class="keywordflow">if</span> (err = <a name="a25"></a><a class="code" href="group__DSAAll.html#ga37ba1696e4f066cae222c2b7e98d54f9">dsa_get_group_item</a>(xy, i, drv + i)) {</div>
<div class="line">            DSA_EXT_DIAG(err, drv[i]);</div>
<div class="line">            <span class="keywordflow">goto</span> _error;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Set target positions. */</span></div>
<div class="line">    <span class="keywordflow">for</span>(i = 0; i &lt; 2; i++) {</div>
<div class="line">        <span class="keywordflow">if</span> (err = <a name="a26"></a><a class="code" href="group__DSAAll.html#ga1d2196bf2ca4d0f6105764fb1749c6c1">dsa_set_target_position_s</a>(drv[i], 1, (i ? y : x), <a class="code" href="dsa40_8h.html#afa8a5747e4999e6e003571e2d2d26f8c">DSA_DEF_TIMEOUT</a>)) {</div>
<div class="line">            DSA_EXT_DIAG(err, drv[i]);</div>
<div class="line">            <span class="keywordflow">goto</span> _error;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Start movement. */</span></div>
<div class="line">    <span class="keywordflow">if</span> (err = <a name="a27"></a><a class="code" href="group__DSAAll.html#ga9aa135bc2e94b71315b5a3b7628bcff0">dsa_new_setpoint_s</a>(xy, 1, 0x0001, <a class="code" href="dsa40_8h.html#afa8a5747e4999e6e003571e2d2d26f8c">DSA_DEF_TIMEOUT</a>)) {</div>
<div class="line">        DSA_EXT_DIAG(err, xy);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Wait for the end of the movement. */</span></div>
<div class="line">    <span class="keywordflow">if</span> (err = <a class="code" href="group__DSAAll.html#ga7647e24f7415c0573351aca11fb63f59">dsa_wait_movement_s</a>(xy, 60000)) {</div>
<div class="line">        DSA_EXT_DIAG(err, xy);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Success. */</span></div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Error handler. */</span></div>
<div class="line">_error:</div>
<div class="line">    <span class="comment">/* Simply return the error code to the caller. */</span></div>
<div class="line">    <span class="keywordflow">return</span> err;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * Display thread function.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> display_thread(<span class="keywordtype">void</span> *param)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">/* the common variables must be defined */</span></div>
<div class="line">    <span class="keywordtype">int</span> counter = 0;</div>
<div class="line">    <span class="keywordtype">int</span> err;</div>
<div class="line">    <span class="keywordtype">int</span> i;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/*</span></div>
<div class="line"><span class="comment">     * Casting of parameter to a group of pointer.</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    DSA_DRIVE_GROUP *grp = (DSA_DRIVE_GROUP *)param;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Get individual drive objects. */</span></div>
<div class="line">    DSA_DRIVE *drv[2];</div>
<div class="line">    <span class="keywordflow">for</span>(i = 0; i &lt; 2; i++) {</div>
<div class="line">        <span class="keywordflow">if</span> (err = <a class="code" href="group__DSAAll.html#ga37ba1696e4f066cae222c2b7e98d54f9">dsa_get_group_item</a>(grp, i, drv + i)) {</div>
<div class="line">            DSA_EXT_DIAG(err, drv[i]);</div>
<div class="line">            <span class="keywordflow">goto</span> _error;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/*</span></div>
<div class="line"><span class="comment">     * Start an infinite loop. This function will be stopped by the OS only</span></div>
<div class="line"><span class="comment">     * when the whole process will end.</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <span class="keywordflow">for</span>(;!abort_req;) {</div>
<div class="line">        <span class="comment">/*</span></div>
<div class="line"><span class="comment">         * Each 100 ms, we will display the status and the position of each</span></div>
<div class="line"><span class="comment">         * drive. As usually, the status structure must be initialized before</span></div>
<div class="line"><span class="comment">         * using it.</span></div>
<div class="line"><span class="comment">         */</span></div>
<div class="line">        <a name="_a28"></a><a class="code" href="unionDSA__STATUS.html">DSA_STATUS</a> status[] = {<span class="keyword">sizeof</span>(<a class="code" href="unionDSA__STATUS.html">DSA_STATUS</a>), <span class="keyword">sizeof</span>(<a class="code" href="unionDSA__STATUS.html">DSA_STATUS</a>)};</div>
<div class="line">        <span class="keywordtype">double</span> pos[2];</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Get the position of each axis. */</span></div>
<div class="line">        <span class="keywordflow">for</span>(i = 0; i &lt; 2; i++) {</div>
<div class="line">            <span class="keywordtype">int</span> err;</div>
<div class="line">            <span class="keywordflow">if</span> (err = <a name="a29"></a><a class="code" href="group__DSAAll.html#ga23b308585b247fdf73d60ee54f421f5a">dsa_get_position_actual_value_s</a>(</div>
<div class="line">                drv[i], &amp;pos[i], <a class="code" href="dsa40_8h.html#acf39ecf276e6aa5989552647d989f9bd">DSA_GET_CURRENT</a>, <a class="code" href="dsa40_8h.html#afa8a5747e4999e6e003571e2d2d26f8c">DSA_DEF_TIMEOUT</a>)) {</div>
<div class="line">                DSA_EXT_DIAG(err, drv[i]);</div>
<div class="line">                <span class="keywordflow">goto</span> _error;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/*</span></div>
<div class="line"><span class="comment">         * Get the drive status. Theses functions don&#39;t generate any activity</span></div>
<div class="line"><span class="comment">         * on the communication channel. The status of each drive is always</span></div>
<div class="line"><span class="comment">         * kept up-to-date in the process memory, which means that theses</span></div>
<div class="line"><span class="comment">         * function are very effective and could be often called without</span></div>
<div class="line"><span class="comment">         * degrading performances.</span></div>
<div class="line"><span class="comment">         */</span></div>
<div class="line">        <span class="keywordflow">for</span>(i = 0; i &lt; 2; i++) {</div>
<div class="line">            <span class="keywordtype">int</span> err;</div>
<div class="line">            <span class="keywordflow">if</span> (err = <a name="a30"></a><a class="code" href="group__DSAAll.html#ga46611e5eb643bf79451c24564861254a">dsa_get_status</a>(drv[i], status + i)) {</div>
<div class="line">                DSA_EXT_DIAG(err, drv[i]);</div>
<div class="line">                <span class="keywordflow">goto</span> _error;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/*</span></div>
<div class="line"><span class="comment">         * We can now print the status string on the display.</span></div>
<div class="line"><span class="comment">         */</span></div>
<div class="line">        printf(<span class="stringliteral">&quot;%04d: &quot;</span>, ++counter);</div>
<div class="line">        <span class="keywordflow">for</span>(i = 0; i &lt; 2; i++) {</div>
<div class="line">            printf(<span class="stringliteral">&quot;AXIS %d: %c%c%c/%20.4f mm&quot;</span>, i,</div>
<div class="line">                status[i].drive.moving ? <span class="charliteral">&#39;M&#39;</span> : <span class="charliteral">&#39;-&#39;</span>,</div>
<div class="line">                status[i].drive.warning ? <span class="charliteral">&#39;W&#39;</span> : <span class="charliteral">&#39;-&#39;</span>,</div>
<div class="line">                status[i].drive.error ? <span class="charliteral">&#39;E&#39;</span> : <span class="charliteral">&#39;-&#39;</span>,</div>
<div class="line">                pos[i] * 1.0E3</div>
<div class="line">                );</div>
<div class="line">            printf((i == 0) ? <span class="stringliteral">&quot;, &quot;</span> : <span class="stringliteral">&quot;\r&quot;</span>);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/*</span></div>
<div class="line"><span class="comment">         * We can now stop for 100ms - the following call is platform dependant.</span></div>
<div class="line"><span class="comment">         */</span></div>
<div class="line">        { Sleep(100); }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (abort_req) {</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line">    <span class="comment">/* Error handler. */</span></div>
<div class="line">_error:</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Ask the main thread to stop. */</span></div>
<div class="line">    abort_req = 1;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Print the first error that occured. */</span></div>
<div class="line">    printf(<span class="stringliteral">&quot;error in display (%d it)\n&quot;</span>, counter);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * Keyboard thread function.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> keyboard_thread(<span class="keywordtype">void</span> *param)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">/*</span></div>
<div class="line"><span class="comment">     * Casting of parameter to a group of pointer.</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    DSA_DRIVE_GROUP *grp = (DSA_DRIVE_GROUP *)param;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/*</span></div>
<div class="line"><span class="comment">     * Infinite loop which waits for the keyboards inputs.</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <span class="keywordflow">for</span>(;!abort_req;) {</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/*</span></div>
<div class="line"><span class="comment">         * Get a character in a system dependent way.</span></div>
<div class="line"><span class="comment">         */</span></div>
<div class="line">        <span class="keywordtype">char</span> c = tolower(_getch());</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/*</span></div>
<div class="line"><span class="comment">         * Handle the key.</span></div>
<div class="line"><span class="comment">         */</span></div>
<div class="line">        <span class="keywordflow">switch</span>(c) {</div>
<div class="line">        <span class="keywordflow">case</span> <span class="stringliteral">&#39;\33&#39;</span>:</div>
<div class="line">            <span class="comment">/*</span></div>
<div class="line"><span class="comment">             * Pressing the ESC key will stop the process cleanly at the end</span></div>
<div class="line"><span class="comment">             * of the cycle. This is done by signaling the event to the main</span></div>
<div class="line"><span class="comment">             * process thread.</span></div>
<div class="line"><span class="comment">             */</span></div>
<div class="line">            abort_req = 1;</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <span class="charliteral">&#39; &#39;</span>:</div>
<div class="line">            <span class="comment">/*</span></div>
<div class="line"><span class="comment">             * Pressing the SPACE key will generate an &quot;emergency stop&quot; and</span></div>
<div class="line"><span class="comment">             * stop the system immediatly, without waiting for the end of the</span></div>
<div class="line"><span class="comment">             * cycle. We don&#39;t check the error code because if the function</span></div>
<div class="line"><span class="comment">             * fails, there is no other action that could be taken.</span></div>
<div class="line"><span class="comment">             */</span></div>
<div class="line">            abort_req = 1;</div>
<div class="line">            <a class="code" href="group__DSAAll.html#gac1612522ee28aa29d1b6735934b53a8a">dsa_quick_stop_s</a>(grp, <a class="code" href="dsa40_8h.html#a0caf300cd534be210d5c07411641f4fe">DSA_QS_PROGRAMMED_DEC</a>,</div>
<div class="line">                <a class="code" href="dsa40_8h.html#a5f8141ea9c17eb16757e8fdbe1fb8c66">DSA_QS_BYPASS</a> | <a class="code" href="dsa40_8h.html#a243c0e90f35d4782b4704b0ca1a6dfd1">DSA_QS_STOP_SEQUENCE</a>, <a class="code" href="dsa40_8h.html#afa8a5747e4999e6e003571e2d2d26f8c">DSA_DEF_TIMEOUT</a>);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line"> </div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --> </div><!-- contents -->
</div><!-- doc-content -->
<div class="ttc" id="agroup__DSAAll_html_ga2641a0388c420422789e73d6b86ba90b"><div class="ttname"><a href="group__DSAAll.html#ga2641a0388c420422789e73d6b86ba90b">dsa_set_profile_acceleration_s</a></div><div class="ttdeci">int dsa_set_profile_acceleration_s(DSA_DRIVE_BASE *obj, int sidx, double acc, long timeout)</div><div class="ttdoc">Set the absolute maximal acc/deceleration (KL212) - synchronous.</div><div class="ttdef"><b>Definition:</b> dsapro.c:1892</div></div>
<div class="ttc" id="agroup__DSAAll_html_ga1d2196bf2ca4d0f6105764fb1749c6c1"><div class="ttname"><a href="group__DSAAll.html#ga1d2196bf2ca4d0f6105764fb1749c6c1">dsa_set_target_position_s</a></div><div class="ttdeci">int dsa_set_target_position_s(DSA_DRIVE_BASE *obj, int sidx, double pos, long timeout)</div><div class="ttdoc">Set the target position (KL210:depth) - synchronous.</div><div class="ttdef"><b>Definition:</b> dsapro.c:847</div></div>
<div class="ttc" id="agroup__DSAAll_html_ga9a0da989df97f28daf6cc2719634d40b"><div class="ttname"><a href="group__DSAAll.html#ga9a0da989df97f28daf6cc2719634d40b">dsa_set_profile_velocity_s</a></div><div class="ttdeci">int dsa_set_profile_velocity_s(DSA_DRIVE_BASE *obj, int sidx, double vel, long timeout)</div><div class="ttdoc">Set the absolute maximum speed (KL211) - synchronous.</div><div class="ttdef"><b>Definition:</b> dsapro.c:1727</div></div>
<div class="ttc" id="adsa40_8h_html_acf39ecf276e6aa5989552647d989f9bd"><div class="ttname"><a href="dsa40_8h.html#acf39ecf276e6aa5989552647d989f9bd">DSA_GET_CURRENT</a></div><div class="ttdeci">#define DSA_GET_CURRENT</div><div class="ttdoc">get current value, bypass pending commands</div><div class="ttdef"><b>Definition:</b> dsa40.h:641</div></div>
<div class="ttc" id="agroup__DSAAll_html_ga46611e5eb643bf79451c24564861254a"><div class="ttname"><a href="group__DSAAll.html#ga46611e5eb643bf79451c24564861254a">dsa_get_status</a></div><div class="ttdeci">int dsa_get_status(DSA_DEVICE *dev, DSA_STATUS *status)</div><div class="ttdoc">Get the drive status.</div><div class="ttdef"><b>Definition:</b> dsasta.c:1821</div></div>
<div class="ttc" id="adsa40_8h_html_ad3897184cf41bd80b0fdcdd019b9579d"><div class="ttname"><a href="dsa40_8h.html#ad3897184cf41bd80b0fdcdd019b9579d">DSA_ESYSTEM</a></div><div class="ttdeci">#define DSA_ESYSTEM</div><div class="ttdoc">some system resource return an error</div><div class="ttdef"><b>Definition:</b> dsa40.h:602</div></div>
<div class="ttc" id="agroup__DSAAll_html_ga1bc87f5faf678bc0f168cce0f7e154fa"><div class="ttname"><a href="group__DSAAll.html#ga1bc87f5faf678bc0f168cce0f7e154fa">dsa_get_min_soft_position_limit_s</a></div><div class="ttdeci">int dsa_get_min_soft_position_limit_s(DSA_DRIVE *obj, double *pos, int kind, long timeout)</div><div class="ttdoc">Get the minimum software position limit (KL34) - synchronous.</div><div class="ttdef"><b>Definition:</b> dsapro.c:2365</div></div>
<div class="ttc" id="agroup__DSAAll_html_ga23b308585b247fdf73d60ee54f421f5a"><div class="ttname"><a href="group__DSAAll.html#ga23b308585b247fdf73d60ee54f421f5a">dsa_get_position_actual_value_s</a></div><div class="ttdeci">int dsa_get_position_actual_value_s(DSA_DRIVE *obj, double *pos, int kind, long timeout)</div><div class="ttdoc">Get the real position in user scale (ML7) - synchronous.</div><div class="ttdef"><b>Definition:</b> dsapro.c:540</div></div>
<div class="ttc" id="agroup__DSAAll_html_ga67a49a697906d25519c124c191a5654a"><div class="ttname"><a href="group__DSAAll.html#ga67a49a697906d25519c124c191a5654a">dsa_destroy</a></div><div class="ttdeci">int dsa_destroy(DSA_DEVICE_BASE **rdev)</div><div class="ttdoc">Destroy the dsa structure.</div><div class="ttdef"><b>Definition:</b> dsaopn.c:932</div></div>
<div class="ttc" id="agroup__DSAAll_html_ga6f73f038940c0bc739beb3372979a475"><div class="ttname"><a href="group__DSAAll.html#ga6f73f038940c0bc739beb3372979a475">dsa_get_max_soft_position_limit_s</a></div><div class="ttdeci">int dsa_get_max_soft_position_limit_s(DSA_DRIVE *obj, double *pos, int kind, long timeout)</div><div class="ttdoc">Get the maximum software position limit (KL35) - synchronous.</div><div class="ttdef"><b>Definition:</b> dsapro.c:2463</div></div>
<div class="ttc" id="agroup__DSAAll_html_ga0b777bbfa92488269624a52d7ff4d654"><div class="ttname"><a href="group__DSAAll.html#ga0b777bbfa92488269624a52d7ff4d654">dsa_translate_edi_error</a></div><div class="ttdeci">char_cp dsa_translate_edi_error(int code)</div><div class="ttdoc">convert an EDI error code into a textual error message.</div><div class="ttdef"><b>Definition:</b> dsaerr.c:262</div></div>
<div class="ttc" id="agroup__DSAAll_html_gaf918456506e721ed90e7481b0d1861f2"><div class="ttname"><a href="group__DSAAll.html#gaf918456506e721ed90e7481b0d1861f2">dsa_homing_start_s</a></div><div class="ttdeci">int dsa_homing_start_s(DSA_DRIVE_BASE *obj, long timeout)</div><div class="ttdoc">Start homing operation (Command:IND) - synchronous.</div><div class="ttdef"><b>Definition:</b> dsafct.c:601</div></div>
<div class="ttc" id="agroup__DSAAll_html_gabb207b622ef11d41d9dfadf965e77200"><div class="ttname"><a href="group__DSAAll.html#gabb207b622ef11d41d9dfadf965e77200">dsa_create_drive</a></div><div class="ttdeci">int dsa_create_drive(DSA_DRIVE **rdrv)</div><div class="ttdoc">Create the dsa drive structure.</div><div class="ttdef"><b>Definition:</b> dsaopn.c:639</div></div>
<div class="ttc" id="aunionDSA__STATUS_html"><div class="ttname"><a href="unionDSA__STATUS.html">DSA_STATUS</a></div><div class="ttdoc">Contains status of devices.</div><div class="ttdef"><b>Definition:</b> dsa40.h:1764</div></div>
<div class="ttc" id="agroup__DSAAll_html_ga96470cb9eaebf9228ce362404fbe0078"><div class="ttname"><a href="group__DSAAll.html#ga96470cb9eaebf9228ce362404fbe0078">dsa_close</a></div><div class="ttdeci">int dsa_close(DSA_DEVICE *dev)</div><div class="ttdoc">Close a dsa device object.</div><div class="ttdef"><b>Definition:</b> dsaopn.c:1654</div></div>
<div class="ttc" id="adsa40_8h_html_afa8a5747e4999e6e003571e2d2d26f8c"><div class="ttname"><a href="dsa40_8h.html#afa8a5747e4999e6e003571e2d2d26f8c">DSA_DEF_TIMEOUT</a></div><div class="ttdeci">#define DSA_DEF_TIMEOUT</div><div class="ttdoc">use the default timeout appropriate for this communication</div><div class="ttdef"><b>Definition:</b> dsa40.h:634</div></div>
<div class="ttc" id="agroup__DSAAll_html_gad4479a364dbab3a12369d9550c58a4ea"><div class="ttname"><a href="group__DSAAll.html#gad4479a364dbab3a12369d9550c58a4ea">dsa_power_on_s</a></div><div class="ttdeci">int dsa_power_on_s(DSA_DRIVE_BASE *grp, long timeout)</div><div class="ttdoc">Set the motor in power on state (Command:PWR=1) - synchronous.</div><div class="ttdef"><b>Definition:</b> dsafct.c:358</div></div>
<div class="ttc" id="agroup__DSAAll_html_ga0472e9073845dd55953e76f609710ae4"><div class="ttname"><a href="group__DSAAll.html#ga0472e9073845dd55953e76f609710ae4">dsa_create_drive_group</a></div><div class="ttdeci">int dsa_create_drive_group(DSA_DRIVE_GROUP **rgrp, int size)</div><div class="ttdoc">Create a dsa drive group structure.</div><div class="ttdef"><b>Definition:</b> dsagrp.c:185</div></div>
<div class="ttc" id="adsa40_8h_html_a243c0e90f35d4782b4704b0ca1a6dfd1"><div class="ttname"><a href="dsa40_8h.html#a243c0e90f35d4782b4704b0ca1a6dfd1">DSA_QS_STOP_SEQUENCE</a></div><div class="ttdeci">#define DSA_QS_STOP_SEQUENCE</div><div class="ttdoc">also stop the sequence</div><div class="ttdef"><b>Definition:</b> dsa40.h:780</div></div>
<div class="ttc" id="adsa40_8h_html_a0caf300cd534be210d5c07411641f4fe"><div class="ttname"><a href="dsa40_8h.html#a0caf300cd534be210d5c07411641f4fe">DSA_QS_PROGRAMMED_DEC</a></div><div class="ttdeci">#define DSA_QS_PROGRAMMED_DEC</div><div class="ttdoc">stop motor with programmed deceleration</div><div class="ttdef"><b>Definition:</b> dsa40.h:779</div></div>
<div class="ttc" id="agroup__DSAAll_html_gac4f6cffd7dd579bcb9a7f60af5f6bb29"><div class="ttname"><a href="group__DSAAll.html#gac4f6cffd7dd579bcb9a7f60af5f6bb29">dsa_open_u</a></div><div class="ttdeci">int dsa_open_u(DSA_DEVICE *dev, char_cp url)</div><div class="ttdoc">Open a dsa device object.</div><div class="ttdef"><b>Definition:</b> dsaopn.c:1100</div></div>
<div class="ttc" id="agroup__DSAAll_html_ga989fc7fbd7d3b76cb0e3853aca34d4f7"><div class="ttname"><a href="group__DSAAll.html#ga989fc7fbd7d3b76cb0e3853aca34d4f7">dsa_is_valid_drive</a></div><div class="ttdeci">ebool dsa_is_valid_drive(DSA_DRIVE *drv)</div><div class="ttdoc">Check if the given pointer is a valid drive pointer.</div><div class="ttdef"><b>Definition:</b> dsagrp.c:1262</div></div>
<div class="ttc" id="agroup__DSAAll_html_ga191d2aa60b4ff3f2635590ad57bed44b"><div class="ttname"><a href="group__DSAAll.html#ga191d2aa60b4ff3f2635590ad57bed44b">dsa_is_valid_drive_group</a></div><div class="ttdeci">ebool dsa_is_valid_drive_group(DSA_DRIVE_GROUP *grp)</div><div class="ttdoc">Check if the given pointer is a valid drive group pointer.</div><div class="ttdef"><b>Definition:</b> dsagrp.c:1166</div></div>
<div class="ttc" id="agroup__DSAAll_html_ga33ee7bc94a04ba24add4dc9d89146fb3"><div class="ttname"><a href="group__DSAAll.html#ga33ee7bc94a04ba24add4dc9d89146fb3">dsa_set_group_item</a></div><div class="ttdeci">int dsa_set_group_item(DSA_DEVICE_GROUP *grp, int pos, DSA_DEVICE_BASE *dev)</div><div class="ttdoc">Define the specified element of the group structure.</div><div class="ttdef"><b>Definition:</b> dsagrp.c:392</div></div>
<div class="ttc" id="adsa40_8h_html_a5f8141ea9c17eb16757e8fdbe1fb8c66"><div class="ttname"><a href="dsa40_8h.html#a5f8141ea9c17eb16757e8fdbe1fb8c66">DSA_QS_BYPASS</a></div><div class="ttdeci">#define DSA_QS_BYPASS</div><div class="ttdoc">bypass all pending command (OBSOLETE)</div><div class="ttdef"><b>Definition:</b> dsa40.h:776</div></div>
<div class="ttc" id="agroup__DSAAll_html_ga710488b5bce619a8a58c0442dd1f7ba8"><div class="ttname"><a href="group__DSAAll.html#ga710488b5bce619a8a58c0442dd1f7ba8">dsa_power_off_s</a></div><div class="ttdeci">int dsa_power_off_s(DSA_DRIVE_BASE *grp, long timeout)</div><div class="ttdoc">Set the motor in power off state (Command:PWR=0) - synchronous.</div><div class="ttdef"><b>Definition:</b> dsafct.c:392</div></div>
<div class="ttc" id="adsa40_8h_html"><div class="ttname"><a href="dsa40_8h.html">dsa40.h</a></div><div class="ttdoc">EDI-Version : 4.25A This header file contains public declarations for the high level library.</div></div>
<div class="ttc" id="agroup__DSAAll_html_gac1612522ee28aa29d1b6735934b53a8a"><div class="ttname"><a href="group__DSAAll.html#gac1612522ee28aa29d1b6735934b53a8a">dsa_quick_stop_s</a></div><div class="ttdeci">int dsa_quick_stop_s(DSA_DRIVE_BASE *grp, int mode, dword flags, long timeout)</div><div class="ttdoc">Quick stop the drive (Command:HLT/STP/HLO/PWR/HLB/BRK) - synchronous.</div><div class="ttdef"><b>Definition:</b> dsafct.c:263</div></div>
<div class="ttc" id="agroup__DSAAll_html_ga7647e24f7415c0573351aca11fb63f59"><div class="ttname"><a href="group__DSAAll.html#ga7647e24f7415c0573351aca11fb63f59">dsa_wait_movement_s</a></div><div class="ttdeci">int dsa_wait_movement_s(DSA_DEVICE_BASE *obj, long timeout)</div><div class="ttdoc">Wait the end of movement (Command:WTM) - synchronous.</div><div class="ttdef"><b>Definition:</b> dsawai.c:83</div></div>
<div class="ttc" id="agroup__DSAAll_html_ga9aa135bc2e94b71315b5a3b7628bcff0"><div class="ttname"><a href="group__DSAAll.html#ga9aa135bc2e94b71315b5a3b7628bcff0">dsa_new_setpoint_s</a></div><div class="ttdeci">int dsa_new_setpoint_s(DSA_DRIVE_BASE *grp, int sidx, dword flags, long timeout)</div><div class="ttdoc">Define a new setpoint (Command:STA) - synchronous.</div><div class="ttdef"><b>Definition:</b> dsafct.c:450</div></div>
<div class="ttc" id="agroup__DSAAll_html_gabca5df9b7fb98299c620827b88bb733c"><div class="ttname"><a href="group__DSAAll.html#gabca5df9b7fb98299c620827b88bb733c">dsa_is_open</a></div><div class="ttdeci">int dsa_is_open(DSA_DEVICE *dev, ebool *is_open)</div><div class="ttdoc">Return true if the device is open.</div><div class="ttdef"><b>Definition:</b> dsaopn.c:1700</div></div>
<div class="ttc" id="agroup__DSAAll_html_ga37ba1696e4f066cae222c2b7e98d54f9"><div class="ttname"><a href="group__DSAAll.html#ga37ba1696e4f066cae222c2b7e98d54f9">dsa_get_group_item</a></div><div class="ttdeci">int dsa_get_group_item(DSA_DEVICE_GROUP *grp, int pos, DSA_DEVICE_BASE **rdev)</div><div class="ttdoc">Get the specified element of the group structure.</div><div class="ttdef"><b>Definition:</b> dsagrp.c:492</div></div>
<!-- HTML footer for doxygen 1.8.20-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Copyright by <a href="http://www.etel.ch"><img class="footer" src="ETELLogo.gif" width="104" height="31" alt="ETEL"/></a> on Thu Aug 26 2021 </li>
  </ul>
</div>
</body>
</html>
