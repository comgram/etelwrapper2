<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>EDI: sample_4.c</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">EDI
   &#160;<span id="projectnumber">4.25A</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('sample_4_8c-example.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">sample_4.c</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * sample_4.c</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * Copyright (c) 1997-2021 ETEL SA. All Rights Reserved.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * This software is the confidential and proprietary information of ETEL SA </span></div>
<div class="line"><span class="comment"> * (&quot;Confidential Information&quot;). You shall not disclose such Confidential </span></div>
<div class="line"><span class="comment"> * Information and shall use it only in accordance with the terms of the </span></div>
<div class="line"><span class="comment"> * license agreement you entered into with ETEL.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * This software is provided &quot;AS IS&quot; without a warranty or representations of any kind. </span></div>
<div class="line"><span class="comment"> * ALL EXPRESS OR IMPLIED CONDITIONS, REPRESENTATIONS AND WARRANTIES, INCLUDING ANY IMPLIED WARRANTY </span></div>
<div class="line"><span class="comment"> * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE OR NON-INFRINGEMENT ARE HEREBY EXCLUDED. ETEL AND ITS </span></div>
<div class="line"><span class="comment"> * LICENSORS SHALL NOT BE LIABLE FOR ANY DAMAGES SUFFERED BY LICENSEE AS A RESULT OF USING, MODIFYING OR DISTRIBUTING </span></div>
<div class="line"><span class="comment"> * THE SOFTWARE OR ITS DERIVATIVES. IN NO EVENT WILL ETEL OR ITS LICENSORS BE LIABLE FOR ANY LOST REVENUE, PROFIT OR </span></div>
<div class="line"><span class="comment"> * DATA, OR FOR DIRECT, INDIRECT, SPECIAL, CONSEQUENTIAL, INCIDENTAL OR PUNITIVE DAMAGES, HOWEVER CAUSED AND REGARDLESS </span></div>
<div class="line"><span class="comment"> * OF THE THEORY OF LIABILITY, ARISING OUT OF THE USE OF OR INABILITY TO USE SOFTWARE, EVEN IF ETEL HAS BEEN ADVISED OF </span></div>
<div class="line"><span class="comment"> * THE POSSIBILITY OF SUCH DAMAGES. THE ENTIRE RISK ARISING OUT OF USE, PERFORMANCE OR NON-PERFORMANCE OF THE SOFTWARE </span></div>
<div class="line"><span class="comment"> * REMAINS WITH THE LICENSEE. IF ETEL SHOULD NEVERTHELESS BE FOUND LIABLE, WHETER DIRECTLY OR INDRECTLY, FOR ANY LOSS, </span></div>
<div class="line"><span class="comment"> * DAMAGE OR INJURY ARISING UNDER THIS AGREEMENT OR OTHERWISE, REGARDLESS OF CAUSE OR ORIGIN, ON ANY BASIS WHATSOEVER, </span></div>
<div class="line"><span class="comment"> * ITS TOTAL MAXIMUM LIABILITY IS LIMITED TO CHF 100.000 WHICH WILL BE THE COMPLETE AND EXCLUSIVE REMEDY AGAINST ETEL.</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment"> * This software is in particular not designed or intended .for use in on-line control of aircraft, air traffic, aircraft </span></div>
<div class="line"><span class="comment"> * navigation or aircraft communications; or in the design, construction, Operation or maintenance of any nuclear facility. </span></div>
<div class="line"><span class="comment"> * Licensee represents and warrants that it will not use or redistribute the Software for such purposes.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment">    C example for upload / download of parameters in a ULTIMET.</span></div>
<div class="line"><span class="comment">    The functions defined in this example are also valid for AccurET drives</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">    ETEL SA, 30.05.02</span></div>
<div class="line"><span class="comment">*/</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;stdlib.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;windows.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;conio.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="tra40_8h.html">tra40.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="dmd40_8h.html">dmd40.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="dsa40_8h.html">dsa40.h</a>&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// global variables</span></div>
<div class="line"><span class="keywordtype">int</span> line_count = 0;</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment">// functions headers</span></div>
<div class="line"><span class="keywordtype">int</span> download_parameters(DSA_DEVICE_BASE *dev, TRA_LINE_READER *reader, <span class="keywordtype">void</span> *stream, <span class="keywordtype">int</span> nb_typs, <span class="keywordtype">byte</span> typs[]);</div>
<div class="line"><span class="keywordtype">int</span> TRA_CALLBACK file_line_reader(TRA *tra, <span class="keywordtype">char</span> *buffer, <span class="keywordtype">int</span> max, <span class="keywordtype">void</span> *stream);</div>
<div class="line"><span class="keywordtype">int</span> upload_parameters(DSA_DEVICE_BASE *dev, TRA_ETCOM_LINE_WRITER *writer, <span class="keywordtype">void</span> *stream, <span class="keywordtype">int</span> nb_typs, <span class="keywordtype">byte</span> typs[]);</div>
<div class="line"><span class="keywordtype">int</span> TRA_CALLBACK file_line_writer(TRA *tra, <span class="keyword">const</span> <span class="keywordtype">char</span> *buffer, <span class="keywordtype">void</span> *stream, <a name="_a0"></a><a class="code" href="structETB__ETCOM.html">ETB_ETCOM</a> *rec);</div>
<div class="line"><span class="keywordtype">int</span> wait_present(DSA_DEVICE_BASE *dev);</div>
<div class="line"><span class="keywordtype">int</span> save_in_flash(DSA_DEVICE_BASE *dev);</div>
<div class="line"><span class="keywordtype">int</span> reset(DSA_DEVICE_BASE *dev);</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[])</div>
<div class="line">{</div>
<div class="line"> </div>
<div class="line">    FILE *in_file;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Definition of ULTIMET object</span></div>
<div class="line">    DSA_MASTER *ultimet = NULL;</div>
<div class="line">    DSA_DRIVE *drv = NULL;</div>
<div class="line">    <span class="keywordtype">byte</span> typs[8];</div>
<div class="line">    <span class="keywordtype">int</span> err;</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Create one ultimet object</span></div>
<div class="line">    <span class="keywordflow">if</span> (err = <a name="a1"></a><a class="code" href="group__DSAAll.html#gad5ae47cdd1e4e82e9c33c778b597bcf6">dsa_create_master</a>(&amp;ultimet)) {</div>
<div class="line">        DSA_EXT_DIAG(err, ultimet);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (err = <a name="a2"></a><a class="code" href="group__DSAAll.html#gabb207b622ef11d41d9dfadf965e77200">dsa_create_drive</a>(&amp;drv)) {</div>
<div class="line">        DSA_EXT_DIAG(err, drv);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Create connections.</span></div>
<div class="line">    <span class="comment">// Connections with axis x</span></div>
<div class="line">    <span class="comment">// Structure of the second parameter &quot;etb:ULTIMET:n&quot;:</span></div>
<div class="line">    <span class="comment">//      etb     : ETEL protocol</span></div>
<div class="line">    <span class="comment">//      ULTIMET  : connexion port</span></div>
<div class="line">    <span class="comment">//      n       : axis number (0 to 62 for drives, * for ULTIMET)</span></div>
<div class="line"> </div>
<div class="line">    printf(<span class="stringliteral">&quot;Opening of the communication...\n&quot;</span>);</div>
<div class="line">    <span class="comment">// Connections with the ultimet</span></div>
<div class="line">    <span class="keywordflow">if</span> (err = <a name="a3"></a><a class="code" href="group__DSAAll.html#gac4f6cffd7dd579bcb9a7f60af5f6bb29">dsa_open_u</a>(ultimet, <span class="stringliteral">&quot;etb:ULTIMET:*&quot;</span>)) {</div>
<div class="line">        DSA_EXT_DIAG(err, ultimet);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (err = <a class="code" href="group__DSAAll.html#gac4f6cffd7dd579bcb9a7f60af5f6bb29">dsa_open_u</a>(drv, <span class="stringliteral">&quot;etb:ULTIMET:0&quot;</span>)) {</div>
<div class="line">        DSA_EXT_DIAG(err, drv);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// upload the parameters from the Ultimet</span></div>
<div class="line">    printf(<span class="stringliteral">&quot;Upload of the K(x),C(x) parameters...\n&quot;</span>);</div>
<div class="line">    typs[0] = <a name="a4"></a><a class="code" href="dmd40_8h.html#ab20a8a6eaae4adf65a1d393a800a0e6b">DMD_TYP_PPK_INT32</a>;</div>
<div class="line">    typs[1] = <a name="a5"></a><a class="code" href="dmd40_8h.html#a7cdc58d2c4f8ff5e5bf05599aba558d1">DMD_TYP_PPK_INT64</a>;</div>
<div class="line">    typs[2] = <a name="a6"></a><a class="code" href="dmd40_8h.html#ab0131d650db62d8860eb2a15c8580987">DMD_TYP_PPK_FLOAT32</a>;</div>
<div class="line">    typs[3] = <a name="a7"></a><a class="code" href="dmd40_8h.html#af420e765d23108649530f2c9ad3fc884">DMD_TYP_PPK_FLOAT64</a>;</div>
<div class="line">    typs[4] = <a name="a8"></a><a class="code" href="dmd40_8h.html#a212eac942bf15c6a7e3ba0e49d79d8e0">DMD_TYP_COMMON_INT32</a>;</div>
<div class="line">    typs[5] = <a name="a9"></a><a class="code" href="dmd40_8h.html#af6c0fba44a32050fa53a30b26976bafb">DMD_TYP_COMMON_INT64</a>;</div>
<div class="line">    typs[6] = <a name="a10"></a><a class="code" href="dmd40_8h.html#a165b5bf6103026412f1d635aaa134c78">DMD_TYP_COMMON_FLOAT32</a>;</div>
<div class="line">    typs[7] = <a name="a11"></a><a class="code" href="dmd40_8h.html#ad3a5500684054797a6db248d6f8b92fa">DMD_TYP_COMMON_FLOAT64</a>;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// open file</span></div>
<div class="line">    <span class="keywordflow">if</span> ((in_file = fopen(<span class="stringliteral">&quot;trial.par&quot;</span>, <span class="stringliteral">&quot;w&quot;</span>)) == NULL) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;ERROR at file %s, line %d file not found\n&quot;</span>, __FILE__, __LINE__);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line">    <span class="comment">// upload sequence</span></div>
<div class="line">    line_count = 0;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (err = upload_parameters(drv, file_line_writer, in_file, 8, typs))</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// close file</span></div>
<div class="line">    fclose(in_file);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// download the test paramters in the ultimet</span></div>
<div class="line">    printf(<span class="stringliteral">&quot;Download of the K(x) and C(x) parameters...\n&quot;</span>);</div>
<div class="line">    <span class="comment">// open file</span></div>
<div class="line">    <span class="keywordflow">if</span> ((in_file = fopen(<span class="stringliteral">&quot;trial.par&quot;</span>, <span class="stringliteral">&quot;r&quot;</span>)) == NULL) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;ERROR at file %s, line %d file not found\n&quot;</span>, __FILE__, __LINE__);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// download parameters</span></div>
<div class="line">    line_count = 0;</div>
<div class="line">    <span class="keywordflow">if</span> (err = download_parameters(drv, file_line_reader, in_file, 8, typs))</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// close file</span></div>
<div class="line">    fclose(in_file);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// save sequence and parameters (save in the flash memory)</span></div>
<div class="line">    printf(<span class="stringliteral">&quot;Save all...\n&quot;</span>);</div>
<div class="line">    save_in_flash(drv);</div>
<div class="line">    printf(<span class="stringliteral">&quot;Reset...\n&quot;</span>);</div>
<div class="line">    <span class="keywordflow">if</span> (err = <a name="a12"></a><a class="code" href="group__DSAAll.html#ga6db997bd92d2c830affc51dd9f349e38">dsa_reset</a>(drv)) {</div>
<div class="line">        DSA_EXT_DIAG(err, drv);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Close all connections.</span></div>
<div class="line">    <span class="keywordflow">if</span> (err = <a name="a13"></a><a class="code" href="group__DSAAll.html#ga96470cb9eaebf9228ce362404fbe0078">dsa_close</a>(ultimet)) {</div>
<div class="line">        DSA_EXT_DIAG(err, ultimet);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (err = <a class="code" href="group__DSAAll.html#ga96470cb9eaebf9228ce362404fbe0078">dsa_close</a>(drv)) {</div>
<div class="line">        DSA_EXT_DIAG(err, drv);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// We should then destroy the drive and ultimet objects</span></div>
<div class="line">    <span class="keywordflow">if</span> (err = <a name="a14"></a><a class="code" href="group__DSAAll.html#ga67a49a697906d25519c124c191a5654a">dsa_destroy</a>(&amp;ultimet)) {</div>
<div class="line">        DSA_EXT_DIAG(err, ultimet);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (err = <a class="code" href="group__DSAAll.html#ga67a49a697906d25519c124c191a5654a">dsa_destroy</a>(&amp;drv)) {</div>
<div class="line">        DSA_EXT_DIAG(err, drv);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    printf(<span class="stringliteral">&quot;\nEnd of the program\n\n&quot;</span>);</div>
<div class="line">    _getch();</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line"> </div>
<div class="line">_error:</div>
<div class="line">    <span class="keywordflow">if</span>(<a name="a15"></a><a class="code" href="group__DSAAll.html#ga989fc7fbd7d3b76cb0e3853aca34d4f7">dsa_is_valid_drive</a>(drv)) {</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Is the drive open ? */</span></div>
<div class="line">        ebool open = 0;</div>
<div class="line">        <a name="a16"></a><a class="code" href="group__DSAAll.html#gabca5df9b7fb98299c620827b88bb733c">dsa_is_open</a>(drv, &amp;open);</div>
<div class="line">        <span class="keywordflow">if</span> (open) {</div>
<div class="line"> </div>
<div class="line">            <span class="comment">/* Stop all movements. */</span></div>
<div class="line">            <a name="a17"></a><a class="code" href="group__DSAAll.html#gac1612522ee28aa29d1b6735934b53a8a">dsa_quick_stop_s</a>(drv, <a name="a18"></a><a class="code" href="dsa40_8h.html#a0caf300cd534be210d5c07411641f4fe">DSA_QS_PROGRAMMED_DEC</a>,</div>
<div class="line">                <a name="a19"></a><a class="code" href="dsa40_8h.html#a5f8141ea9c17eb16757e8fdbe1fb8c66">DSA_QS_BYPASS</a> | <a name="a20"></a><a class="code" href="dsa40_8h.html#a243c0e90f35d4782b4704b0ca1a6dfd1">DSA_QS_STOP_SEQUENCE</a>, <a name="a21"></a><a class="code" href="dsa40_8h.html#afa8a5747e4999e6e003571e2d2d26f8c">DSA_DEF_TIMEOUT</a>);</div>
<div class="line"> </div>
<div class="line">            <span class="comment">/* When the motor has stopped, a power off is done. */</span></div>
<div class="line">            <a name="a22"></a><a class="code" href="group__DSAAll.html#ga7647e24f7415c0573351aca11fb63f59">dsa_wait_movement_s</a>(drv, 60000);</div>
<div class="line">            <a name="a23"></a><a class="code" href="group__DSAAll.html#ga710488b5bce619a8a58c0442dd1f7ba8">dsa_power_off_s</a>(drv, 10000);</div>
<div class="line"> </div>
<div class="line">            <span class="comment">/* Close the connection */</span></div>
<div class="line">            <a class="code" href="group__DSAAll.html#ga96470cb9eaebf9228ce362404fbe0078">dsa_close</a>(drv);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* And finally, release all resources to the OS. */</span></div>
<div class="line">        <a class="code" href="group__DSAAll.html#ga67a49a697906d25519c124c191a5654a">dsa_destroy</a>(&amp;drv);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Same operations for the ULTIMET */</span></div>
<div class="line">    <span class="keywordflow">if</span>(<a name="a24"></a><a class="code" href="group__DSAAll.html#ga70a69c2290bd38e89628d7a079a2dc89">dsa_is_valid_master</a>(ultimet)) {</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Is the drive open ? */</span></div>
<div class="line">        ebool open = 0;</div>
<div class="line">        <a class="code" href="group__DSAAll.html#gabca5df9b7fb98299c620827b88bb733c">dsa_is_open</a>(ultimet, &amp;open);</div>
<div class="line">        <span class="keywordflow">if</span> (open) {</div>
<div class="line"> </div>
<div class="line">            <span class="comment">/* Close the connection */</span></div>
<div class="line">            <a class="code" href="group__DSAAll.html#ga96470cb9eaebf9228ce362404fbe0078">dsa_close</a>(ultimet);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* And finally, release all resources to the OS. */</span></div>
<div class="line">        <a class="code" href="group__DSAAll.html#ga67a49a697906d25519c124c191a5654a">dsa_destroy</a>(&amp;ultimet);</div>
<div class="line">    }</div>
<div class="line">    _getch();</div>
<div class="line">    <span class="keywordflow">return</span> err;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * The funtion that the traductor call to read a line.</span></div>
<div class="line"><span class="comment"> * @return zero if success, not zero if end of file</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> TRA_CALLBACK file_line_reader(TRA *tra, <span class="keywordtype">char</span> *buffer, <span class="keywordtype">int</span> max, <span class="keywordtype">void</span> *stream)</div>
<div class="line">{</div>
<div class="line">    FILE *in_file = (FILE*)stream;</div>
<div class="line">    <span class="keywordflow">if</span> (!fgets(buffer, max, in_file))</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    line_count++;</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * download parameters into the drive</span></div>
<div class="line"><span class="comment"> * @param dev can be a device or a device group</span></div>
<div class="line"><span class="comment"> * @param reader a function call for read line</span></div>
<div class="line"><span class="comment"> * @return error code or zero on success</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keywordtype">int</span> download_parameters(DSA_DEVICE_BASE *dev, TRA_LINE_READER *reader, <span class="keywordtype">void</span> *stream, <span class="keywordtype">int</span> nb_typs, <span class="keywordtype">byte</span> typs[])</div>
<div class="line">{</div>
<div class="line">    eint64 mask = 0;</div>
<div class="line">    ETB *etb = NULL;</div>
<div class="line">    ETB_PORT *port = NULL;</div>
<div class="line">    TRA *tra = NULL;</div>
<div class="line">    <span class="keywordtype">int</span> err;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* check for drive or groups */</span></div>
<div class="line">    <span class="keywordflow">if</span> (<a name="a25"></a><a class="code" href="group__DSAAll.html#ga34cd2d1beea885a41c7930a5a133321a">dsa_is_valid_device_group</a>(dev)) {</div>
<div class="line">        <span class="comment">/* the dev parameter is a group */</span></div>
<div class="line">        DSA_DEVICE_BASE *dsa = NULL;</div>
<div class="line">        <span class="keywordtype">int</span> size = 0;</div>
<div class="line">        <span class="keywordtype">int</span> i;</div>
<div class="line">        <span class="comment">/* extract group mask */</span></div>
<div class="line">        <span class="keywordflow">if</span> (err = <a name="a26"></a><a class="code" href="group__DSAAll.html#ga37ba1696e4f066cae222c2b7e98d54f9">dsa_get_group_item</a>(dev, 0, &amp;dsa)) {</div>
<div class="line">            DSA_EXT_DIAG(err, dev);</div>
<div class="line">            <span class="keywordflow">return</span> err;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">if</span> (!<a name="a27"></a><a class="code" href="group__DSAAll.html#ga4c0d5fdbe730802cb9c2d835d2f4e3ea">dsa_is_valid_device</a>(dsa)) {</div>
<div class="line">            printf(<span class="stringliteral">&quot;ERROR at file %s, line %d %s\n&quot;</span>, __FILE__, __LINE__, <a name="a28"></a><a class="code" href="group__DSAAll.html#ga0b777bbfa92488269624a52d7ff4d654">dsa_translate_edi_error</a>(<a name="a29"></a><a class="code" href="dsa40_8h.html#a97cb2e84efc71fa661d40b32aae83404">DSA_EBADPARAM</a>));</div>
<div class="line">            <span class="keywordflow">return</span> <a class="code" href="dsa40_8h.html#a97cb2e84efc71fa661d40b32aae83404">DSA_EBADPARAM</a>;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">if</span> (err = <a name="a30"></a><a class="code" href="group__DSAAll.html#ga462a7920ab6a43c757bc7a37450ef0ea">dsa_get_etb_bus</a>(dsa, &amp;etb)) {</div>
<div class="line">            DSA_EXT_DIAG(err, dsa);</div>
<div class="line">            <span class="keywordflow">return</span> err;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">if</span> (err = <a name="a31"></a><a class="code" href="group__DSAAll.html#gad7042a4a11b6b3294d324218c1b4cff5">dsa_get_group_size</a>(dev, &amp;size)) {</div>
<div class="line">            DSA_EXT_DIAG(err, dev);</div>
<div class="line">            <span class="keywordflow">return</span> err;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">for</span> (i=0; i&lt;size; i++) {</div>
<div class="line">            ETB *bus = NULL;</div>
<div class="line">            <span class="keywordtype">int</span> axis;</div>
<div class="line">            <span class="keywordflow">if</span> (err = <a class="code" href="group__DSAAll.html#ga37ba1696e4f066cae222c2b7e98d54f9">dsa_get_group_item</a>(dev, i, &amp;dsa)) {</div>
<div class="line">                DSA_EXT_DIAG(err, dev);</div>
<div class="line">                <span class="keywordflow">return</span> err;</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">if</span> (err = <a class="code" href="group__DSAAll.html#ga462a7920ab6a43c757bc7a37450ef0ea">dsa_get_etb_bus</a>(dsa, &amp;bus)) {</div>
<div class="line">                DSA_EXT_DIAG(err, dsa);</div>
<div class="line">                <span class="keywordflow">return</span> err;</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">if</span> (bus != etb) {</div>
<div class="line">                printf(<span class="stringliteral">&quot;ERROR at file %s, line %d %s\n&quot;</span>, __FILE__, __LINE__, <a class="code" href="group__DSAAll.html#ga0b777bbfa92488269624a52d7ff4d654">dsa_translate_edi_error</a>(<a class="code" href="dsa40_8h.html#a97cb2e84efc71fa661d40b32aae83404">DSA_EBADPARAM</a>));</div>
<div class="line">                <span class="keywordflow">return</span> <a class="code" href="dsa40_8h.html#a97cb2e84efc71fa661d40b32aae83404">DSA_EBADPARAM</a>;</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">if</span> (err = <a name="a32"></a><a class="code" href="group__DSAAll.html#gae8dc1c4b4133ac1b5724172757c972d0">dsa_etcom_get_etb_axis</a>(dsa, &amp;axis)) {</div>
<div class="line">                DSA_EXT_DIAG(err, dsa);</div>
<div class="line">                <span class="keywordflow">return</span> err;</div>
<div class="line">            }</div>
<div class="line">            mask |= 1LL &lt;&lt; axis;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> {</div>
<div class="line">        <span class="comment">/* the dev parameter is a device */</span></div>
<div class="line">        <span class="keywordtype">int</span> axis;</div>
<div class="line">        <span class="keywordflow">if</span> (err = <a class="code" href="group__DSAAll.html#ga462a7920ab6a43c757bc7a37450ef0ea">dsa_get_etb_bus</a>(dev, &amp;etb)) {</div>
<div class="line">            DSA_EXT_DIAG(err, dev);</div>
<div class="line">            <span class="keywordflow">return</span> err;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">if</span> (err = <a class="code" href="group__DSAAll.html#gae8dc1c4b4133ac1b5724172757c972d0">dsa_etcom_get_etb_axis</a>(dev, &amp;axis)) {</div>
<div class="line">            DSA_EXT_DIAG(err, dev);</div>
<div class="line">            <span class="keywordflow">return</span> err;</div>
<div class="line">        }</div>
<div class="line">        mask = 1LL &lt;&lt; axis;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* create a etb port */</span></div>
<div class="line">    <span class="keywordflow">if</span> (err = <a name="a33"></a><a class="code" href="group__ETBAll.html#gaed9479b3ea1ac5dcb5e9934d51a69f7f">etb_create_port</a>(&amp;port, etb)) {</div>
<div class="line">        DSA_EXT_DIAG(err, NULL);</div>
<div class="line">        <span class="keywordflow">return</span> err;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* create traductor */</span></div>
<div class="line">    <span class="keywordflow">if</span> (err = <a name="a34"></a><a class="code" href="group__TRAAll.html#gaaf804bd60087cd2e10273f5369999e01">tra_create_register_traductor_e</a>(&amp;tra, port, TRA_FLAG_DISABLE_CHECKS)) {</div>
<div class="line">        DSA_EXT_DIAG(err, NULL);</div>
<div class="line">        <span class="keywordflow">return</span> err;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* download stream */</span></div>
<div class="line">    <span class="keywordflow">if</span> (err = <a name="a35"></a><a class="code" href="group__TRAAll.html#gac638d419f631a6fcda6f7b6ee202ee01">tra_etcom_download_register_stream_e</a>(tra, mask, nb_typs, typs, reader, stream)) {</div>
<div class="line">        DSA_EXT_DIAG(err, NULL);</div>
<div class="line">        <span class="keywordflow">return</span> err;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* destroy traductor */</span></div>
<div class="line">    <a name="a36"></a><a class="code" href="group__TRAAll.html#ga3e1e306f190301036c03488ee2912b09">tra_destroy</a>(&amp;tra);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* destroy etb port */</span></div>
<div class="line">    <span class="keywordflow">if</span> (err = <a name="a37"></a><a class="code" href="group__ETBAll.html#ga74f7518cd33fd3930a94cfc5e1b80b29">etb_destroy_port</a>(&amp;port)) {</div>
<div class="line">        DSA_EXT_DIAG(err, NULL);</div>
<div class="line">        <span class="keywordflow">return</span> err;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* success */</span></div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * The funtion that the traductor call to write a line.</span></div>
<div class="line"><span class="comment"> * @return zero if success, not zero if end of file</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keywordtype">int</span> TRA_CALLBACK file_line_writer(TRA *tra, <span class="keyword">const</span> <span class="keywordtype">char</span> *buffer, <span class="keywordtype">void</span> *stream, <a class="code" href="structETB__ETCOM.html">ETB_ETCOM</a> *rec)</div>
<div class="line">{</div>
<div class="line">    FILE *in_file = (FILE*)stream;</div>
<div class="line">    fputs(buffer, in_file);</div>
<div class="line">    fputs(<span class="stringliteral">&quot;\n&quot;</span>,in_file);</div>
<div class="line">    line_count++;</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * upload a set of parameters from the drive</span></div>
<div class="line"><span class="comment"> * @param dev can be a device or a device group</span></div>
<div class="line"><span class="comment"> * @param writer a function call for write line</span></div>
<div class="line"><span class="comment"> * @return error code or zero on success</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keywordtype">int</span> upload_parameters(DSA_DEVICE_BASE *dev, TRA_ETCOM_LINE_WRITER *writer, <span class="keywordtype">void</span> *stream, <span class="keywordtype">int</span> nb_typs, <span class="keywordtype">byte</span> typs[])</div>
<div class="line">{</div>
<div class="line">    eint64 mask = 0;</div>
<div class="line">    ETB *etb = NULL;</div>
<div class="line">    ETB_PORT *port = NULL;</div>
<div class="line">    TRA *tra = NULL;</div>
<div class="line">    <span class="keywordtype">int</span> err;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* check for drive or groups */</span></div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="group__DSAAll.html#ga34cd2d1beea885a41c7930a5a133321a">dsa_is_valid_device_group</a>(dev)) {</div>
<div class="line">        <span class="comment">/* the dev parameter is a group */</span></div>
<div class="line">        DSA_DEVICE_BASE *dsa = NULL;</div>
<div class="line">        <span class="keywordtype">int</span> size = 0;</div>
<div class="line">        <span class="keywordtype">int</span> i;</div>
<div class="line">        <span class="comment">/* extract group mask */</span></div>
<div class="line">        <span class="keywordflow">if</span> (err = <a class="code" href="group__DSAAll.html#ga37ba1696e4f066cae222c2b7e98d54f9">dsa_get_group_item</a>(dev, 0, &amp;dsa)) {</div>
<div class="line">            DSA_EXT_DIAG(err, dev);</div>
<div class="line">            <span class="keywordflow">return</span> err;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">if</span> (!<a class="code" href="group__DSAAll.html#ga4c0d5fdbe730802cb9c2d835d2f4e3ea">dsa_is_valid_device</a>(dsa)) {</div>
<div class="line">            printf(<span class="stringliteral">&quot;ERROR at file %s, line %d %s\n&quot;</span>, __FILE__, __LINE__, <a class="code" href="group__DSAAll.html#ga0b777bbfa92488269624a52d7ff4d654">dsa_translate_edi_error</a>(<a class="code" href="dsa40_8h.html#a97cb2e84efc71fa661d40b32aae83404">DSA_EBADPARAM</a>));</div>
<div class="line">            <span class="keywordflow">return</span> <a class="code" href="dsa40_8h.html#a97cb2e84efc71fa661d40b32aae83404">DSA_EBADPARAM</a>;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">if</span> (err = <a class="code" href="group__DSAAll.html#ga462a7920ab6a43c757bc7a37450ef0ea">dsa_get_etb_bus</a>(dsa, &amp;etb)) {</div>
<div class="line">            DSA_EXT_DIAG(err, dsa);</div>
<div class="line">            <span class="keywordflow">return</span> err;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">if</span> (err = <a class="code" href="group__DSAAll.html#gad7042a4a11b6b3294d324218c1b4cff5">dsa_get_group_size</a>(dev, &amp;size)) {</div>
<div class="line">            DSA_EXT_DIAG(err, dev);</div>
<div class="line">            <span class="keywordflow">return</span> err;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">for</span> (i=0; i&lt;size; i++) {</div>
<div class="line">            ETB *bus = NULL;</div>
<div class="line">            <span class="keywordtype">int</span> axis;</div>
<div class="line">            <span class="keywordflow">if</span> (err = <a class="code" href="group__DSAAll.html#ga37ba1696e4f066cae222c2b7e98d54f9">dsa_get_group_item</a>(dev, i, &amp;dsa)) {</div>
<div class="line">                DSA_EXT_DIAG(err, dev);</div>
<div class="line">                <span class="keywordflow">return</span> err;</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">if</span> (err = <a class="code" href="group__DSAAll.html#ga462a7920ab6a43c757bc7a37450ef0ea">dsa_get_etb_bus</a>(dsa, &amp;bus)) {</div>
<div class="line">                DSA_EXT_DIAG(err, dsa);</div>
<div class="line">                <span class="keywordflow">return</span> err;</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">if</span> (bus != etb) {</div>
<div class="line">                printf(<span class="stringliteral">&quot;ERROR at file %s, line %d %s\n&quot;</span>, __FILE__, __LINE__, <a class="code" href="group__DSAAll.html#ga0b777bbfa92488269624a52d7ff4d654">dsa_translate_edi_error</a>(<a class="code" href="dsa40_8h.html#a97cb2e84efc71fa661d40b32aae83404">DSA_EBADPARAM</a>));</div>
<div class="line">                <span class="keywordflow">return</span> <a class="code" href="dsa40_8h.html#a97cb2e84efc71fa661d40b32aae83404">DSA_EBADPARAM</a>;</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">if</span> (err = <a class="code" href="group__DSAAll.html#gae8dc1c4b4133ac1b5724172757c972d0">dsa_etcom_get_etb_axis</a>(dsa, &amp;axis)) {</div>
<div class="line">                DSA_EXT_DIAG(err, dsa);</div>
<div class="line">                <span class="keywordflow">return</span> err;</div>
<div class="line">            }</div>
<div class="line">            mask |= 1LL &lt;&lt; axis;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> {</div>
<div class="line">        <span class="comment">/* the dev parameter is a device */</span></div>
<div class="line">        <span class="keywordtype">int</span> axis;</div>
<div class="line">        <span class="keywordflow">if</span> (err = <a class="code" href="group__DSAAll.html#ga462a7920ab6a43c757bc7a37450ef0ea">dsa_get_etb_bus</a>(dev, &amp;etb)) {</div>
<div class="line">            DSA_EXT_DIAG(err, dev);</div>
<div class="line">            <span class="keywordflow">return</span> err;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">if</span> (err = <a class="code" href="group__DSAAll.html#gae8dc1c4b4133ac1b5724172757c972d0">dsa_etcom_get_etb_axis</a>(dev, &amp;axis)) {</div>
<div class="line">            DSA_EXT_DIAG(err, dev);</div>
<div class="line">            <span class="keywordflow">return</span> err;</div>
<div class="line">        }</div>
<div class="line">        mask = 1LL &lt;&lt; axis;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* create a etb port */</span></div>
<div class="line">    <span class="keywordflow">if</span> (err = <a class="code" href="group__ETBAll.html#gaed9479b3ea1ac5dcb5e9934d51a69f7f">etb_create_port</a>(&amp;port, etb)) {</div>
<div class="line">        DSA_EXT_DIAG(err, NULL);</div>
<div class="line">        <span class="keywordflow">return</span> err;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* create traductor */</span></div>
<div class="line">    <span class="keywordflow">if</span> (err = <a class="code" href="group__TRAAll.html#gaaf804bd60087cd2e10273f5369999e01">tra_create_register_traductor_e</a>(&amp;tra, port, TRA_FLAG_ALL_SUBINDEXES | TRA_FLAG_GROUP_SUBINDEXES)) {</div>
<div class="line">        DSA_EXT_DIAG(err, NULL);</div>
<div class="line">        <span class="keywordflow">return</span> err;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* download stream */</span></div>
<div class="line">    <span class="keywordflow">if</span> (err = <a name="a38"></a><a class="code" href="group__TRAAll.html#gacd6003eeeb4e57e235cbe123012aa02f">tra_etcom_upload_register_stream_e</a>(tra, mask, nb_typs, typs, 0, -1, -1, writer, stream)) {</div>
<div class="line">        DSA_EXT_DIAG(err, NULL);</div>
<div class="line">        <span class="keywordflow">return</span> err;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* destroy traductor */</span></div>
<div class="line">    <a class="code" href="group__TRAAll.html#ga3e1e306f190301036c03488ee2912b09">tra_destroy</a>(&amp;tra);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* destroy etb port */</span></div>
<div class="line">    <span class="keywordflow">if</span> (err = <a class="code" href="group__ETBAll.html#ga74f7518cd33fd3930a94cfc5e1b80b29">etb_destroy_port</a>(&amp;port)) {</div>
<div class="line">        DSA_EXT_DIAG(err, NULL);</div>
<div class="line">        <span class="keywordflow">return</span> err;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* success */</span></div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * wait if a device or a device group is not present</span></div>
<div class="line"><span class="comment"> * @param dev the device or the device group</span></div>
<div class="line"><span class="comment"> * @return error code or zero on success</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keywordtype">int</span> wait_present(DSA_DEVICE_BASE *dev)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> err;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* setup status masks */</span></div>
<div class="line">    <a name="_a39"></a><a class="code" href="unionDSA__STATUS.html">DSA_STATUS</a> status_mask = {<span class="keyword">sizeof</span>(<a class="code" href="unionDSA__STATUS.html">DSA_STATUS</a>)};</div>
<div class="line">    <a class="code" href="unionDSA__STATUS.html">DSA_STATUS</a> status_value = {<span class="keyword">sizeof</span>(<a class="code" href="unionDSA__STATUS.html">DSA_STATUS</a>)};</div>
<div class="line">    status_mask.<a name="a40"></a><a class="code" href="unionDSA__STATUS.html#a2976d83b0c7f5d7bae7acd87fe4803c3">sw</a>.<a name="a41"></a><a class="code" href="structDsaStatusSWMode.html#ad5c267ec20249c4a3b83e8c211246038">sw1</a>.<a name="a42"></a><a class="code" href="structDSA__SW1.html#aef88e17bb43e3aee8c10f1e24e9d5830">present</a> = 1;</div>
<div class="line">    status_value.<a class="code" href="unionDSA__STATUS.html#a2976d83b0c7f5d7bae7acd87fe4803c3">sw</a>.<a class="code" href="structDsaStatusSWMode.html#ad5c267ec20249c4a3b83e8c211246038">sw1</a>.<a class="code" href="structDSA__SW1.html#aef88e17bb43e3aee8c10f1e24e9d5830">present</a> = 1;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* check for device or group */</span></div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="group__DSAAll.html#ga34cd2d1beea885a41c7930a5a133321a">dsa_is_valid_device_group</a>(dev)) {</div>
<div class="line">        <span class="comment">/* dev is a group */</span></div>
<div class="line">        <span class="keywordtype">int</span> size;</div>
<div class="line">        <span class="keywordtype">int</span> i;</div>
<div class="line">        <span class="comment">/* for each device in the group */</span></div>
<div class="line">        <span class="keywordflow">if</span> (err = <a class="code" href="group__DSAAll.html#gad7042a4a11b6b3294d324218c1b4cff5">dsa_get_group_size</a>(dev, &amp;size)) {</div>
<div class="line">            DSA_EXT_DIAG(err, dev);</div>
<div class="line">            <span class="keywordflow">return</span> err;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">for</span> (i=0; i&lt;size; i++) {</div>
<div class="line">            DSA_DEVICE_BASE *dsa = NULL;</div>
<div class="line">            <span class="keywordflow">if</span> (err = <a class="code" href="group__DSAAll.html#ga37ba1696e4f066cae222c2b7e98d54f9">dsa_get_group_item</a>(dev, i, &amp;dsa)) {</div>
<div class="line">                DSA_EXT_DIAG(err, dev);</div>
<div class="line">                <span class="keywordflow">return</span> err;</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">if</span> (!<a class="code" href="group__DSAAll.html#ga4c0d5fdbe730802cb9c2d835d2f4e3ea">dsa_is_valid_device</a>(dsa)) {</div>
<div class="line">                printf(<span class="stringliteral">&quot;ERROR at file %s, line %d %s\n&quot;</span>, __FILE__, __LINE__, <a class="code" href="group__DSAAll.html#ga0b777bbfa92488269624a52d7ff4d654">dsa_translate_edi_error</a>(<a class="code" href="dsa40_8h.html#a97cb2e84efc71fa661d40b32aae83404">DSA_EBADPARAM</a>));</div>
<div class="line">                <span class="keywordflow">return</span> <a class="code" href="dsa40_8h.html#a97cb2e84efc71fa661d40b32aae83404">DSA_EBADPARAM</a>;</div>
<div class="line">            }</div>
<div class="line">            <span class="comment">/* wait that this device is present */</span></div>
<div class="line">            <span class="keywordflow">if</span> (err = <a name="a43"></a><a class="code" href="group__DSAAll.html#ga761fc038026cab6eb553817e18f34249">dsa_wait_status_equal_s</a>(dsa, &amp;status_mask, &amp;status_value, NULL, 20000)) {</div>
<div class="line">                DSA_EXT_DIAG(err, dev);</div>
<div class="line">                <span class="keywordflow">return</span> err;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="group__DSAAll.html#ga4c0d5fdbe730802cb9c2d835d2f4e3ea">dsa_is_valid_device</a>(dev)) {</div>
<div class="line">        <span class="comment">/* dev is a device - wait on it */</span></div>
<div class="line">        <span class="keywordflow">if</span> (err = <a class="code" href="group__DSAAll.html#ga761fc038026cab6eb553817e18f34249">dsa_wait_status_equal_s</a>(dev, &amp;status_mask, &amp;status_value, NULL, 20000)) {</div>
<div class="line">            DSA_EXT_DIAG(err, dev);</div>
<div class="line">            <span class="keywordflow">return</span> err;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> {</div>
<div class="line">        <span class="comment">/* dev is not valid */</span></div>
<div class="line">        printf(<span class="stringliteral">&quot;ERROR at file %s, line %d %s\n&quot;</span>, __FILE__, __LINE__, <a class="code" href="group__DSAAll.html#ga0b777bbfa92488269624a52d7ff4d654">dsa_translate_edi_error</a>(<a class="code" href="dsa40_8h.html#a97cb2e84efc71fa661d40b32aae83404">DSA_EBADPARAM</a>));</div>
<div class="line">        <span class="keywordflow">return</span> <a class="code" href="dsa40_8h.html#a97cb2e84efc71fa661d40b32aae83404">DSA_EBADPARAM</a>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* success */</span></div>
<div class="line">    Sleep(1000);</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * save parameters and/or sequence into the flash</span></div>
<div class="line"><span class="comment"> * @param dev the device or the device group</span></div>
<div class="line"><span class="comment"> * @param sequence TRUE if we want to save the sequence</span></div>
<div class="line"><span class="comment"> * @param parameters TRUE if we want to save parameters</span></div>
<div class="line"><span class="comment"> * @return error code or zero on success</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keywordtype">int</span> save_in_flash(DSA_DEVICE_BASE *dev)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> err;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* send the save command */</span></div>
<div class="line">    <span class="keywordflow">if</span> (err = <a name="a44"></a><a class="code" href="group__DSAAll.html#gaa4088cf13511aae9604a5bb73f541f4d">dsa_save_parameters_s</a>(dev, <a name="a45"></a><a class="code" href="dsa40_8h.html#ac962886c3a141055277b379b0635c9f9">DSA_PARAM_SAVE_K_C_E_X_PARAMS</a>, 10000)) {</div>
<div class="line">        DSA_EXT_DIAG(err, dev);</div>
<div class="line">        <span class="keywordflow">return</span> err;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* after a save, device is not ready - wait */</span></div>
<div class="line">    <span class="keywordflow">if</span> (err = wait_present(dev))</div>
<div class="line">        <span class="keywordflow">return</span> err;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* success */</span></div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * reset the device or the device group (software reset)</span></div>
<div class="line"><span class="comment"> * @param dev the device or the device group</span></div>
<div class="line"><span class="comment"> * @return error code or zero on success</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keywordtype">int</span> reset(DSA_DEVICE_BASE *dev)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> err;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* send reset command */</span></div>
<div class="line">    <span class="keywordflow">if</span> (err = <a name="a46"></a><a class="code" href="group__DSAAll.html#gab5498a84b460f5111cd4aee05f99ae0a">dsa_execute_command_d_s</a>(dev, DMD_CMD_RESET_DRIVE, <a name="a47"></a><a class="code" href="dmd40_8h.html#aab203ee5836ed9f4f0a18b10ca984ab3">DMD_TYP_IMMEDIATE</a>, 255, 0, 0, 10000)) {</div>
<div class="line">        DSA_EXT_DIAG(err, dev);</div>
<div class="line">        <span class="keywordflow">return</span> err;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* wait that the device is ready */</span></div>
<div class="line">    <span class="keywordflow">if</span> (err = wait_present(dev))</div>
<div class="line">        <span class="keywordflow">return</span> err;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* success */</span></div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
</div><!-- fragment --> </div><!-- contents -->
</div><!-- doc-content -->
<div class="ttc" id="admd40_8h_html_a165b5bf6103026412f1d635aaa134c78"><div class="ttname"><a href="dmd40_8h.html#a165b5bf6103026412f1d635aaa134c78">DMD_TYP_COMMON_FLOAT32</a></div><div class="ttdeci">#define DMD_TYP_COMMON_FLOAT32</div><div class="ttdoc">common register float 32 bits</div><div class="ttdef"><b>Definition:</b> dmd40.h:748</div></div>
<div class="ttc" id="agroup__DSAAll_html_gae8dc1c4b4133ac1b5724172757c972d0"><div class="ttname"><a href="group__DSAAll.html#gae8dc1c4b4133ac1b5724172757c972d0">dsa_etcom_get_etb_axis</a></div><div class="ttdeci">int dsa_etcom_get_etb_axis(DSA_DEVICE *dev, int *axis)</div><div class="ttdoc">Get the etb bus axis number of this device.</div><div class="ttdef"><b>Definition:</b> dsaopn.c:1869</div></div>
<div class="ttc" id="agroup__TRAAll_html_gac638d419f631a6fcda6f7b6ee202ee01"><div class="ttname"><a href="group__TRAAll.html#gac638d419f631a6fcda6f7b6ee202ee01">tra_etcom_download_register_stream_e</a></div><div class="ttdeci">int tra_etcom_download_register_stream_e(TRA *tra, eint64 amsk, int nb_typs, byte typs[], TRA_LINE_READER *reader, void *stream)</div><div class="ttdoc">Perform download operation.</div><div class="ttdef"><b>Definition:</b> trareg.c:854</div></div>
<div class="ttc" id="aunionDSA__STATUS_html_a2976d83b0c7f5d7bae7acd87fe4803c3"><div class="ttname"><a href="unionDSA__STATUS.html#a2976d83b0c7f5d7bae7acd87fe4803c3">DSA_STATUS::sw</a></div><div class="ttdeci">DsaStatusSWMode sw</div><div class="ttdoc">Status for SW1/SW2 access.</div><div class="ttdef"><b>Definition:</b> dsa40.h:1766</div></div>
<div class="ttc" id="agroup__DSAAll_html_ga34cd2d1beea885a41c7930a5a133321a"><div class="ttname"><a href="group__DSAAll.html#ga34cd2d1beea885a41c7930a5a133321a">dsa_is_valid_device_group</a></div><div class="ttdeci">ebool dsa_is_valid_device_group(DSA_DEVICE_GROUP *grp)</div><div class="ttdoc">Check if the given pointer is a valid device group pointer.</div><div class="ttdef"><b>Definition:</b> dsagrp.c:1142</div></div>
<div class="ttc" id="agroup__DSAAll_html_gab5498a84b460f5111cd4aee05f99ae0a"><div class="ttname"><a href="group__DSAAll.html#gab5498a84b460f5111cd4aee05f99ae0a">dsa_execute_command_d_s</a></div><div class="ttdeci">int dsa_execute_command_d_s(DSA_DEVICE_BASE *grp, int cmd, int typ1, int par1, ebool fast, ebool ereport, long timeout)</div><div class="ttdoc">Send a specific drive command with one parameter in increment - synchronous.</div><div class="ttdef"><b>Definition:</b> dsagen.c:1936</div></div>
<div class="ttc" id="astructETB__ETCOM_html"><div class="ttname"><a href="structETB__ETCOM.html">ETB_ETCOM</a></div><div class="ttdoc">Etel variable length record structure with 2 parameters.</div><div class="ttdef"><b>Definition:</b> etb40.h:1124</div></div>
<div class="ttc" id="admd40_8h_html_ab20a8a6eaae4adf65a1d393a800a0e6b"><div class="ttname"><a href="dmd40_8h.html#ab20a8a6eaae4adf65a1d393a800a0e6b">DMD_TYP_PPK_INT32</a></div><div class="ttdeci">#define DMD_TYP_PPK_INT32</div><div class="ttdoc">drive parameters integer 32 bits</div><div class="ttdef"><b>Definition:</b> dmd40.h:715</div></div>
<div class="ttc" id="astructDsaStatusSWMode_html_ad5c267ec20249c4a3b83e8c211246038"><div class="ttname"><a href="structDsaStatusSWMode.html#ad5c267ec20249c4a3b83e8c211246038">DsaStatusSWMode::sw1</a></div><div class="ttdeci">DSA_SW1 sw1</div><div class="ttdoc">Drive status SW1(M60)</div><div class="ttdef"><b>Definition:</b> dsa40.h:1490</div></div>
<div class="ttc" id="admd40_8h_html_aab203ee5836ed9f4f0a18b10ca984ab3"><div class="ttname"><a href="dmd40_8h.html#aab203ee5836ed9f4f0a18b10ca984ab3">DMD_TYP_IMMEDIATE</a></div><div class="ttdeci">#define DMD_TYP_IMMEDIATE</div><div class="ttdoc">disabled or immediate value</div><div class="ttdef"><b>Definition:</b> dmd40.h:684</div></div>
<div class="ttc" id="adsa40_8h_html_a97cb2e84efc71fa661d40b32aae83404"><div class="ttname"><a href="dsa40_8h.html#a97cb2e84efc71fa661d40b32aae83404">DSA_EBADPARAM</a></div><div class="ttdeci">#define DSA_EBADPARAM</div><div class="ttdoc">one of the parameter is not valid</div><div class="ttdef"><b>Definition:</b> dsa40.h:595</div></div>
<div class="ttc" id="admd40_8h_html"><div class="ttname"><a href="dmd40_8h.html">dmd40.h</a></div><div class="ttdoc">EDI-Version : 4.25A This header file contains public declaration for drive meta-data library.</div></div>
<div class="ttc" id="admd40_8h_html_af6c0fba44a32050fa53a30b26976bafb"><div class="ttname"><a href="dmd40_8h.html#af6c0fba44a32050fa53a30b26976bafb">DMD_TYP_COMMON_INT64</a></div><div class="ttdeci">#define DMD_TYP_COMMON_INT64</div><div class="ttdoc">common register integer 64 bits</div><div class="ttdef"><b>Definition:</b> dmd40.h:747</div></div>
<div class="ttc" id="agroup__DSAAll_html_ga462a7920ab6a43c757bc7a37450ef0ea"><div class="ttname"><a href="group__DSAAll.html#ga462a7920ab6a43c757bc7a37450ef0ea">dsa_get_etb_bus</a></div><div class="ttdeci">int dsa_get_etb_bus(DSA_DEVICE *dev, ETB **etb)</div><div class="ttdoc">Get the etb bus pointer of this device.</div><div class="ttdef"><b>Definition:</b> dsaopn.c:1796</div></div>
<div class="ttc" id="admd40_8h_html_a212eac942bf15c6a7e3ba0e49d79d8e0"><div class="ttname"><a href="dmd40_8h.html#a212eac942bf15c6a7e3ba0e49d79d8e0">DMD_TYP_COMMON_INT32</a></div><div class="ttdeci">#define DMD_TYP_COMMON_INT32</div><div class="ttdoc">common register integer 32 bits</div><div class="ttdef"><b>Definition:</b> dmd40.h:746</div></div>
<div class="ttc" id="agroup__TRAAll_html_ga3e1e306f190301036c03488ee2912b09"><div class="ttname"><a href="group__TRAAll.html#ga3e1e306f190301036c03488ee2912b09">tra_destroy</a></div><div class="ttdeci">int tra_destroy(TRA **tra)</div><div class="ttdoc">Destroy the traductor structure.</div><div class="ttdef"><b>Definition:</b> traopn.c:471</div></div>
<div class="ttc" id="agroup__DSAAll_html_ga67a49a697906d25519c124c191a5654a"><div class="ttname"><a href="group__DSAAll.html#ga67a49a697906d25519c124c191a5654a">dsa_destroy</a></div><div class="ttdeci">int dsa_destroy(DSA_DEVICE_BASE **rdev)</div><div class="ttdoc">Destroy the dsa structure.</div><div class="ttdef"><b>Definition:</b> dsaopn.c:932</div></div>
<div class="ttc" id="agroup__DSAAll_html_ga0b777bbfa92488269624a52d7ff4d654"><div class="ttname"><a href="group__DSAAll.html#ga0b777bbfa92488269624a52d7ff4d654">dsa_translate_edi_error</a></div><div class="ttdeci">char_cp dsa_translate_edi_error(int code)</div><div class="ttdoc">convert an EDI error code into a textual error message.</div><div class="ttdef"><b>Definition:</b> dsaerr.c:262</div></div>
<div class="ttc" id="agroup__DSAAll_html_gabb207b622ef11d41d9dfadf965e77200"><div class="ttname"><a href="group__DSAAll.html#gabb207b622ef11d41d9dfadf965e77200">dsa_create_drive</a></div><div class="ttdeci">int dsa_create_drive(DSA_DRIVE **rdrv)</div><div class="ttdoc">Create the dsa drive structure.</div><div class="ttdef"><b>Definition:</b> dsaopn.c:639</div></div>
<div class="ttc" id="agroup__DSAAll_html_gad5ae47cdd1e4e82e9c33c778b597bcf6"><div class="ttname"><a href="group__DSAAll.html#gad5ae47cdd1e4e82e9c33c778b597bcf6">dsa_create_master</a></div><div class="ttdeci">int dsa_create_master(DSA_MASTER **rmaster)</div><div class="ttdoc">Create the dsa master structure.</div><div class="ttdef"><b>Definition:</b> dsaopn.c:688</div></div>
<div class="ttc" id="agroup__DSAAll_html_ga6db997bd92d2c830affc51dd9f349e38"><div class="ttname"><a href="group__DSAAll.html#ga6db997bd92d2c830affc51dd9f349e38">dsa_reset</a></div><div class="ttdeci">int dsa_reset(DSA_DEVICE *dev)</div><div class="ttdoc">Reset a dsa device object.</div><div class="ttdef"><b>Definition:</b> dsaopn.c:1495</div></div>
<div class="ttc" id="aunionDSA__STATUS_html"><div class="ttname"><a href="unionDSA__STATUS.html">DSA_STATUS</a></div><div class="ttdoc">Contains status of devices.</div><div class="ttdef"><b>Definition:</b> dsa40.h:1764</div></div>
<div class="ttc" id="agroup__DSAAll_html_ga96470cb9eaebf9228ce362404fbe0078"><div class="ttname"><a href="group__DSAAll.html#ga96470cb9eaebf9228ce362404fbe0078">dsa_close</a></div><div class="ttdeci">int dsa_close(DSA_DEVICE *dev)</div><div class="ttdoc">Close a dsa device object.</div><div class="ttdef"><b>Definition:</b> dsaopn.c:1654</div></div>
<div class="ttc" id="agroup__TRAAll_html_gacd6003eeeb4e57e235cbe123012aa02f"><div class="ttname"><a href="group__TRAAll.html#gacd6003eeeb4e57e235cbe123012aa02f">tra_etcom_upload_register_stream_e</a></div><div class="ttdeci">int tra_etcom_upload_register_stream_e(TRA *tra, eint64 amsk, int nb_typs, byte typs[], int from, int to, int max_sidx, TRA_ETCOM_LINE_WRITER *writer, void *stream)</div><div class="ttdoc">Perform upload operation.</div><div class="ttdef"><b>Definition:</b> trareg.c:316</div></div>
<div class="ttc" id="admd40_8h_html_af420e765d23108649530f2c9ad3fc884"><div class="ttname"><a href="dmd40_8h.html#af420e765d23108649530f2c9ad3fc884">DMD_TYP_PPK_FLOAT64</a></div><div class="ttdeci">#define DMD_TYP_PPK_FLOAT64</div><div class="ttdoc">drive parameters float 64 bits</div><div class="ttdef"><b>Definition:</b> dmd40.h:718</div></div>
<div class="ttc" id="adsa40_8h_html_afa8a5747e4999e6e003571e2d2d26f8c"><div class="ttname"><a href="dsa40_8h.html#afa8a5747e4999e6e003571e2d2d26f8c">DSA_DEF_TIMEOUT</a></div><div class="ttdeci">#define DSA_DEF_TIMEOUT</div><div class="ttdoc">use the default timeout appropriate for this communication</div><div class="ttdef"><b>Definition:</b> dsa40.h:634</div></div>
<div class="ttc" id="agroup__DSAAll_html_gad7042a4a11b6b3294d324218c1b4cff5"><div class="ttname"><a href="group__DSAAll.html#gad7042a4a11b6b3294d324218c1b4cff5">dsa_get_group_size</a></div><div class="ttdeci">int dsa_get_group_size(DSA_DEVICE_GROUP *grp, int *size)</div><div class="ttdoc">Get the number of devices in this group structure.</div><div class="ttdef"><b>Definition:</b> dsagrp.c:1107</div></div>
<div class="ttc" id="admd40_8h_html_a7cdc58d2c4f8ff5e5bf05599aba558d1"><div class="ttname"><a href="dmd40_8h.html#a7cdc58d2c4f8ff5e5bf05599aba558d1">DMD_TYP_PPK_INT64</a></div><div class="ttdeci">#define DMD_TYP_PPK_INT64</div><div class="ttdoc">drive parameters integer 64 bits</div><div class="ttdef"><b>Definition:</b> dmd40.h:716</div></div>
<div class="ttc" id="agroup__DSAAll_html_ga4c0d5fdbe730802cb9c2d835d2f4e3ea"><div class="ttname"><a href="group__DSAAll.html#ga4c0d5fdbe730802cb9c2d835d2f4e3ea">dsa_is_valid_device</a></div><div class="ttdeci">ebool dsa_is_valid_device(DSA_DEVICE *dev)</div><div class="ttdoc">Check if the given pointer is a valid device pointer.</div><div class="ttdef"><b>Definition:</b> dsagrp.c:1241</div></div>
<div class="ttc" id="adsa40_8h_html_a243c0e90f35d4782b4704b0ca1a6dfd1"><div class="ttname"><a href="dsa40_8h.html#a243c0e90f35d4782b4704b0ca1a6dfd1">DSA_QS_STOP_SEQUENCE</a></div><div class="ttdeci">#define DSA_QS_STOP_SEQUENCE</div><div class="ttdoc">also stop the sequence</div><div class="ttdef"><b>Definition:</b> dsa40.h:780</div></div>
<div class="ttc" id="adsa40_8h_html_a0caf300cd534be210d5c07411641f4fe"><div class="ttname"><a href="dsa40_8h.html#a0caf300cd534be210d5c07411641f4fe">DSA_QS_PROGRAMMED_DEC</a></div><div class="ttdeci">#define DSA_QS_PROGRAMMED_DEC</div><div class="ttdoc">stop motor with programmed deceleration</div><div class="ttdef"><b>Definition:</b> dsa40.h:779</div></div>
<div class="ttc" id="admd40_8h_html_ad3a5500684054797a6db248d6f8b92fa"><div class="ttname"><a href="dmd40_8h.html#ad3a5500684054797a6db248d6f8b92fa">DMD_TYP_COMMON_FLOAT64</a></div><div class="ttdeci">#define DMD_TYP_COMMON_FLOAT64</div><div class="ttdoc">user register float 64 bits</div><div class="ttdef"><b>Definition:</b> dmd40.h:749</div></div>
<div class="ttc" id="agroup__DSAAll_html_gac4f6cffd7dd579bcb9a7f60af5f6bb29"><div class="ttname"><a href="group__DSAAll.html#gac4f6cffd7dd579bcb9a7f60af5f6bb29">dsa_open_u</a></div><div class="ttdeci">int dsa_open_u(DSA_DEVICE *dev, char_cp url)</div><div class="ttdoc">Open a dsa device object.</div><div class="ttdef"><b>Definition:</b> dsaopn.c:1100</div></div>
<div class="ttc" id="atra40_8h_html"><div class="ttname"><a href="tra40_8h.html">tra40.h</a></div><div class="ttdoc">EDI-Version : 4.25A This header file contains public declaration of traduction library.</div></div>
<div class="ttc" id="agroup__DSAAll_html_ga989fc7fbd7d3b76cb0e3853aca34d4f7"><div class="ttname"><a href="group__DSAAll.html#ga989fc7fbd7d3b76cb0e3853aca34d4f7">dsa_is_valid_drive</a></div><div class="ttdeci">ebool dsa_is_valid_drive(DSA_DRIVE *drv)</div><div class="ttdoc">Check if the given pointer is a valid drive pointer.</div><div class="ttdef"><b>Definition:</b> dsagrp.c:1262</div></div>
<div class="ttc" id="adsa40_8h_html_a5f8141ea9c17eb16757e8fdbe1fb8c66"><div class="ttname"><a href="dsa40_8h.html#a5f8141ea9c17eb16757e8fdbe1fb8c66">DSA_QS_BYPASS</a></div><div class="ttdeci">#define DSA_QS_BYPASS</div><div class="ttdoc">bypass all pending command (OBSOLETE)</div><div class="ttdef"><b>Definition:</b> dsa40.h:776</div></div>
<div class="ttc" id="agroup__ETBAll_html_gaed9479b3ea1ac5dcb5e9934d51a69f7f"><div class="ttname"><a href="group__ETBAll.html#gaed9479b3ea1ac5dcb5e9934d51a69f7f">etb_create_port</a></div><div class="ttdeci">int etb_create_port(ETB_PORT **rport, ETB *etb)</div><div class="ttdoc">Initialize port object.</div><div class="ttdef"><b>Definition:</b> etbprt.c:305</div></div>
<div class="ttc" id="agroup__DSAAll_html_ga70a69c2290bd38e89628d7a079a2dc89"><div class="ttname"><a href="group__DSAAll.html#ga70a69c2290bd38e89628d7a079a2dc89">dsa_is_valid_master</a></div><div class="ttdeci">ebool dsa_is_valid_master(DSA_MASTER *master)</div><div class="ttdoc">Check if the given pointer is a valid master pointer.</div><div class="ttdef"><b>Definition:</b> dsagrp.c:1275</div></div>
<div class="ttc" id="agroup__TRAAll_html_gaaf804bd60087cd2e10273f5369999e01"><div class="ttname"><a href="group__TRAAll.html#gaaf804bd60087cd2e10273f5369999e01">tra_create_register_traductor_e</a></div><div class="ttdeci">int tra_create_register_traductor_e(TRA **tra, ETB_PORT *port, dword flags)</div><div class="ttdoc">Create an etb-connected register traductor object.</div><div class="ttdef"><b>Definition:</b> trareg.c:197</div></div>
<div class="ttc" id="astructDSA__SW1_html_aef88e17bb43e3aee8c10f1e24e9d5830"><div class="ttname"><a href="structDSA__SW1.html#aef88e17bb43e3aee8c10f1e24e9d5830">DSA_SW1::present</a></div><div class="ttdeci">unsigned present</div><div class="ttdoc">Drive, Master: The device is present.</div><div class="ttdef"><b>Definition:</b> dsa40.h:1335</div></div>
<div class="ttc" id="agroup__DSAAll_html_ga710488b5bce619a8a58c0442dd1f7ba8"><div class="ttname"><a href="group__DSAAll.html#ga710488b5bce619a8a58c0442dd1f7ba8">dsa_power_off_s</a></div><div class="ttdeci">int dsa_power_off_s(DSA_DRIVE_BASE *grp, long timeout)</div><div class="ttdoc">Set the motor in power off state (Command:PWR=0) - synchronous.</div><div class="ttdef"><b>Definition:</b> dsafct.c:392</div></div>
<div class="ttc" id="adsa40_8h_html_ac962886c3a141055277b379b0635c9f9"><div class="ttname"><a href="dsa40_8h.html#ac962886c3a141055277b379b0635c9f9">DSA_PARAM_SAVE_K_C_E_X_PARAMS</a></div><div class="ttdeci">#define DSA_PARAM_SAVE_K_C_E_X_PARAMS</div><div class="ttdoc">save K, KL, KF, KD, C, CL, CF, CD, EL, X, XL, XF, XD parameters in flash memory</div><div class="ttdef"><b>Definition:</b> dsa40.h:745</div></div>
<div class="ttc" id="agroup__DSAAll_html_gaa4088cf13511aae9604a5bb73f541f4d"><div class="ttname"><a href="group__DSAAll.html#gaa4088cf13511aae9604a5bb73f541f4d">dsa_save_parameters_s</a></div><div class="ttdeci">int dsa_save_parameters_s(DSA_DEVICE_BASE *obj, int what, long timeout)</div><div class="ttdoc">Save the current parameters, sequences, lookup table in flash memory (Command:SAV) - synchronous.</div><div class="ttdef"><b>Definition:</b> dsapar.c:94</div></div>
<div class="ttc" id="adsa40_8h_html"><div class="ttname"><a href="dsa40_8h.html">dsa40.h</a></div><div class="ttdoc">EDI-Version : 4.25A This header file contains public declarations for the high level library.</div></div>
<div class="ttc" id="agroup__DSAAll_html_ga761fc038026cab6eb553817e18f34249"><div class="ttname"><a href="group__DSAAll.html#ga761fc038026cab6eb553817e18f34249">dsa_wait_status_equal_s</a></div><div class="ttdeci">int dsa_wait_status_equal_s(DSA_DEVICE *drv, DSA_STATUS *mask, DSA_STATUS *ref, DSA_STATUS *status, long timeout)</div><div class="ttdoc">Wait for the drive status equal to the specified status - synchronous.</div><div class="ttdef"><b>Definition:</b> dsasta.c:1117</div></div>
<div class="ttc" id="agroup__ETBAll_html_ga74f7518cd33fd3930a94cfc5e1b80b29"><div class="ttname"><a href="group__ETBAll.html#ga74f7518cd33fd3930a94cfc5e1b80b29">etb_destroy_port</a></div><div class="ttdeci">int etb_destroy_port(ETB_PORT **rport)</div><div class="ttdoc">Destroy port object.</div><div class="ttdef"><b>Definition:</b> etbprt.c:384</div></div>
<div class="ttc" id="agroup__DSAAll_html_gac1612522ee28aa29d1b6735934b53a8a"><div class="ttname"><a href="group__DSAAll.html#gac1612522ee28aa29d1b6735934b53a8a">dsa_quick_stop_s</a></div><div class="ttdeci">int dsa_quick_stop_s(DSA_DRIVE_BASE *grp, int mode, dword flags, long timeout)</div><div class="ttdoc">Quick stop the drive (Command:HLT/STP/HLO/PWR/HLB/BRK) - synchronous.</div><div class="ttdef"><b>Definition:</b> dsafct.c:263</div></div>
<div class="ttc" id="agroup__DSAAll_html_ga7647e24f7415c0573351aca11fb63f59"><div class="ttname"><a href="group__DSAAll.html#ga7647e24f7415c0573351aca11fb63f59">dsa_wait_movement_s</a></div><div class="ttdeci">int dsa_wait_movement_s(DSA_DEVICE_BASE *obj, long timeout)</div><div class="ttdoc">Wait the end of movement (Command:WTM) - synchronous.</div><div class="ttdef"><b>Definition:</b> dsawai.c:83</div></div>
<div class="ttc" id="admd40_8h_html_ab0131d650db62d8860eb2a15c8580987"><div class="ttname"><a href="dmd40_8h.html#ab0131d650db62d8860eb2a15c8580987">DMD_TYP_PPK_FLOAT32</a></div><div class="ttdeci">#define DMD_TYP_PPK_FLOAT32</div><div class="ttdoc">drive parameters float 32 bits</div><div class="ttdef"><b>Definition:</b> dmd40.h:717</div></div>
<div class="ttc" id="agroup__DSAAll_html_gabca5df9b7fb98299c620827b88bb733c"><div class="ttname"><a href="group__DSAAll.html#gabca5df9b7fb98299c620827b88bb733c">dsa_is_open</a></div><div class="ttdeci">int dsa_is_open(DSA_DEVICE *dev, ebool *is_open)</div><div class="ttdoc">Return true if the device is open.</div><div class="ttdef"><b>Definition:</b> dsaopn.c:1700</div></div>
<div class="ttc" id="agroup__DSAAll_html_ga37ba1696e4f066cae222c2b7e98d54f9"><div class="ttname"><a href="group__DSAAll.html#ga37ba1696e4f066cae222c2b7e98d54f9">dsa_get_group_item</a></div><div class="ttdeci">int dsa_get_group_item(DSA_DEVICE_GROUP *grp, int pos, DSA_DEVICE_BASE **rdev)</div><div class="ttdoc">Get the specified element of the group structure.</div><div class="ttdef"><b>Definition:</b> dsagrp.c:492</div></div>
<!-- HTML footer for doxygen 1.8.20-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Copyright by <a href="http://www.etel.ch"><img class="footer" src="ETELLogo.gif" width="104" height="31" alt="ETEL"/></a> on Thu Aug 26 2021 </li>
  </ul>
</div>
</body>
</html>
