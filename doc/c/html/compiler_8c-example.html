<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>EDI: compiler.c</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">EDI
   &#160;<span id="projectnumber">4.25A</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('compiler_8c-example.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">compiler.c</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * compiler.c</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * Copyright (c) 1997-2021 ETEL SA. All Rights Reserved.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * This software is the confidential and proprietary information of ETEL SA </span></div>
<div class="line"><span class="comment"> * (&quot;Confidential Information&quot;). You shall not disclose such Confidential </span></div>
<div class="line"><span class="comment"> * Information and shall use it only in accordance with the terms of the </span></div>
<div class="line"><span class="comment"> * license agreement you entered into with ETEL.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * This software is provided &quot;AS IS&quot; without a warranty or representations of any kind. </span></div>
<div class="line"><span class="comment"> * ALL EXPRESS OR IMPLIED CONDITIONS, REPRESENTATIONS AND WARRANTIES, INCLUDING ANY IMPLIED WARRANTY </span></div>
<div class="line"><span class="comment"> * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE OR NON-INFRINGEMENT ARE HEREBY EXCLUDED. ETEL AND ITS </span></div>
<div class="line"><span class="comment"> * LICENSORS SHALL NOT BE LIABLE FOR ANY DAMAGES SUFFERED BY LICENSEE AS A RESULT OF USING, MODIFYING OR DISTRIBUTING </span></div>
<div class="line"><span class="comment"> * THE SOFTWARE OR ITS DERIVATIVES. IN NO EVENT WILL ETEL OR ITS LICENSORS BE LIABLE FOR ANY LOST REVENUE, PROFIT OR </span></div>
<div class="line"><span class="comment"> * DATA, OR FOR DIRECT, INDIRECT, SPECIAL, CONSEQUENTIAL, INCIDENTAL OR PUNITIVE DAMAGES, HOWEVER CAUSED AND REGARDLESS </span></div>
<div class="line"><span class="comment"> * OF THE THEORY OF LIABILITY, ARISING OUT OF THE USE OF OR INABILITY TO USE SOFTWARE, EVEN IF ETEL HAS BEEN ADVISED OF </span></div>
<div class="line"><span class="comment"> * THE POSSIBILITY OF SUCH DAMAGES. THE ENTIRE RISK ARISING OUT OF USE, PERFORMANCE OR NON-PERFORMANCE OF THE SOFTWARE </span></div>
<div class="line"><span class="comment"> * REMAINS WITH THE LICENSEE. IF ETEL SHOULD NEVERTHELESS BE FOUND LIABLE, WHETER DIRECTLY OR INDRECTLY, FOR ANY LOSS, </span></div>
<div class="line"><span class="comment"> * DAMAGE OR INJURY ARISING UNDER THIS AGREEMENT OR OTHERWISE, REGARDLESS OF CAUSE OR ORIGIN, ON ANY BASIS WHATSOEVER, </span></div>
<div class="line"><span class="comment"> * ITS TOTAL MAXIMUM LIABILITY IS LIMITED TO CHF 100.000 WHICH WILL BE THE COMPLETE AND EXCLUSIVE REMEDY AGAINST ETEL.</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment"> * This software is in particular not designed or intended .for use in on-line control of aircraft, air traffic, aircraft </span></div>
<div class="line"><span class="comment"> * navigation or aircraft communications; or in the design, construction, Operation or maintenance of any nuclear facility. </span></div>
<div class="line"><span class="comment"> * Licensee represents and warrants that it will not use or redistribute the Software for such purposes.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * This simple demo program shows how to :</span></div>
<div class="line"><span class="comment"> * - compile and download a sequence into an AccurET.</span></div>
<div class="line"><span class="comment"> * - upload a sequence from an AccurET</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/**************************************************************************************** </span></div>
<div class="line"><span class="comment"> **************************************************************************************** </span></div>
<div class="line"><span class="comment"> * !!!!! Compiling sequence is only possible for Windows 32 bits application !!!!!</span></div>
<div class="line"><span class="comment"> **************************************************************************************** </span></div>
<div class="line"><span class="comment"> ****************************************************************************************/</span></div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * To run this demo without modification, you don&#39;t need to have a motor connected.</span></div>
<div class="line"><span class="comment"> * You must have one or many AccurET connected through USB or UltimET.</span></div>
<div class="line"><span class="comment"> * The example allows to choose between several configurations</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment">/*** libraries ***/</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * Include the standard I/O library.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdlib.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;time.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;math.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;conio.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * Include EDI high level library version 2.0x.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="preprocessor">#include &lt;lib40.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="esc40_8h.html">esc40.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="etb40_8h.html">etb40.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="dmd40_8h.html">dmd40.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="dsa40_8h.html">dsa40.h</a>&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// ISO&lt;-&gt;INC converter.</span></div>
<div class="line"><span class="comment">// This function will be called by the compiler to convert ISO value into i ncrement value</span></div>
<div class="line"><span class="comment">// This function is attached to compiler by the call of esc_set_iso_converter function</span></div>
<div class="line"><span class="comment">// This function will call the specified DSA ISO &lt;-&gt; INC conversion function for specified axis</span></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> ETB_CALLBACK _esc_converter  (ETB *etb, </div>
<div class="line">                                         <a name="_a0"></a><a class="code" href="unionETB__ETCOM__VALUE.html">ETB_ETCOM_VALUE</a> *incr, </div>
<div class="line">                                         <span class="keywordtype">double</span> *iso, </div>
<div class="line">                                         <span class="keywordtype">int</span> incr_type, </div>
<div class="line">                                         <span class="keywordtype">int</span> conv, </div>
<div class="line">                                         <span class="keywordtype">int</span> axis, </div>
<div class="line">                                         ebool to_iso, </div>
<div class="line">                                         <span class="keywordtype">void</span> *param)</div>
<div class="line">{</div>
<div class="line">    DSA_DEVICE **present_drv = (DSA_DEVICE*)param;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// increment to iso conversion</span></div>
<div class="line">    <span class="keywordflow">if</span>(to_iso) {</div>
<div class="line">        <span class="keywordflow">if</span> (incr_type &amp; <a name="a1"></a><a class="code" href="dmd40_8h.html#a2cf1b93e3c22cbe4ad976754af28461d">DMD_TYP_64_BIT_MASK</a>)</div>
<div class="line">            <span class="keywordflow">if</span> (incr_type &amp; <a name="a2"></a><a class="code" href="dmd40_8h.html#ab4cfce15dff05870b9f1a978018361cb">DMD_TYP_FLOAT_BIT_MASK</a>) {</div>
<div class="line">                <span class="comment">// conversion of float 64 bits increment value into iso value</span></div>
<div class="line">                <span class="keywordflow">if</span> ((axis &lt; 0) || (axis &gt; 63) || !present_drv[axis] || !<a name="a3"></a><a class="code" href="group__DMDAll.html#ga57f80aa448c4116ec79ba1c6ab9e7fb4">dmd_is_double_conv</a>(conv) ||</div>
<div class="line">                    <a name="a4"></a><a class="code" href="group__DSAAll.html#ga73c539239ad16a94b6682be018dded0c">dsa_convert_float64_to_iso</a>(present_drv[axis], iso, incr-&gt;<a name="a5"></a>f64, conv))</div>
<div class="line">                    *iso = incr-&gt;f64;</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">else</span> {</div>
<div class="line">                <span class="comment">// conversion of integer 64 bits increment value into iso value</span></div>
<div class="line">                <span class="keywordflow">if</span> ((axis &lt; 0) || (axis &gt; 63) || !present_drv[axis] || !<a class="code" href="group__DMDAll.html#ga57f80aa448c4116ec79ba1c6ab9e7fb4">dmd_is_double_conv</a>(conv) ||</div>
<div class="line">                    <a name="a6"></a><a class="code" href="group__DSAAll.html#gaec5aea5e34564577cff52dbc13788c1e">dsa_convert_int64_to_iso</a>(present_drv[axis], iso, incr-&gt;<a name="a7"></a>i64, conv))</div>
<div class="line">                    *iso = (<span class="keywordtype">double</span>)incr-&gt;i64;</div>
<div class="line">            }</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">            <span class="keywordflow">if</span> (incr_type &amp; <a class="code" href="dmd40_8h.html#ab4cfce15dff05870b9f1a978018361cb">DMD_TYP_FLOAT_BIT_MASK</a>) {</div>
<div class="line">                <span class="comment">// conversion of float 32 bits increment value into iso value</span></div>
<div class="line">                <span class="keywordflow">if</span> ((axis &lt; 0) || (axis &gt; 63) || !present_drv[axis] || !<a class="code" href="group__DMDAll.html#ga57f80aa448c4116ec79ba1c6ab9e7fb4">dmd_is_double_conv</a>(conv) ||</div>
<div class="line">                     <a name="a8"></a><a class="code" href="group__DSAAll.html#ga4fa32c1909a4146f8e0d7f436e144063">dsa_convert_float32_to_iso</a>(present_drv[axis], iso, incr-&gt;<a name="a9"></a>f32, conv))</div>
<div class="line">                    *iso = (<span class="keywordtype">double</span>)incr-&gt;f32;</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">else</span> {</div>
<div class="line">                <span class="comment">// conversion of integer 32 bits increment value into iso value</span></div>
<div class="line">                <span class="keywordflow">if</span> ((axis &lt; 0) || (axis &gt; 63) || !present_drv[axis] || !<a class="code" href="group__DMDAll.html#ga57f80aa448c4116ec79ba1c6ab9e7fb4">dmd_is_double_conv</a>(conv) ||</div>
<div class="line">                    <a name="a10"></a><a class="code" href="group__DSAAll.html#ga59eda8e6d82f5eff732c2331a61f131d">dsa_convert_int32_to_iso</a>(present_drv[axis], iso, incr-&gt;<a name="a11"></a>i32, conv))</div>
<div class="line">                    *iso = (<span class="keywordtype">double</span>)incr-&gt;i32;</div>
<div class="line">            }</div>
<div class="line">    <span class="comment">// iso to increment conversion</span></div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        <span class="keywordflow">if</span> (incr_type &amp; <a class="code" href="dmd40_8h.html#a2cf1b93e3c22cbe4ad976754af28461d">DMD_TYP_64_BIT_MASK</a>)</div>
<div class="line">            <span class="keywordflow">if</span> (incr_type &amp; <a class="code" href="dmd40_8h.html#ab4cfce15dff05870b9f1a978018361cb">DMD_TYP_FLOAT_BIT_MASK</a>) {</div>
<div class="line">                <span class="comment">// conversion of iso into float 64 bits increment value</span></div>
<div class="line">                <span class="keywordflow">if</span> ((axis &lt; 0) || (axis &gt; 63) || !present_drv[axis] || !<a class="code" href="group__DMDAll.html#ga57f80aa448c4116ec79ba1c6ab9e7fb4">dmd_is_double_conv</a>(conv) ||</div>
<div class="line">                    <a name="a12"></a><a class="code" href="group__DSAAll.html#gaded4fbb29e81c42762f35538ed9fc2f1">dsa_convert_float64_from_iso</a>(present_drv[axis], &amp;(incr-&gt;f64), *iso, conv))</div>
<div class="line">                    incr-&gt;f64 = *iso;</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">else</span> {</div>
<div class="line">                <span class="comment">// conversion of iso into integer 64 bits increment value</span></div>
<div class="line">                <span class="keywordflow">if</span> ((axis &lt; 0) || (axis &gt; 63) || !present_drv[axis] || !<a class="code" href="group__DMDAll.html#ga57f80aa448c4116ec79ba1c6ab9e7fb4">dmd_is_double_conv</a>(conv) ||</div>
<div class="line">                    <a name="a13"></a><a class="code" href="group__DSAAll.html#ga0cd0c633dd69ff5fd299e1b6de11b166">dsa_convert_int64_from_iso</a>(present_drv[axis], &amp;(incr-&gt;i64), *iso, conv))</div>
<div class="line">                    incr-&gt;i64 = (eint64)*iso;</div>
<div class="line">            }</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">            <span class="keywordflow">if</span> (incr_type &amp; <a class="code" href="dmd40_8h.html#ab4cfce15dff05870b9f1a978018361cb">DMD_TYP_FLOAT_BIT_MASK</a>) {</div>
<div class="line">                <span class="comment">// conversion of iso into float 32 bits increment value</span></div>
<div class="line">                <span class="keywordflow">if</span> ((axis &lt; 0) || (axis &gt; 63) || !present_drv[axis] || !<a class="code" href="group__DMDAll.html#ga57f80aa448c4116ec79ba1c6ab9e7fb4">dmd_is_double_conv</a>(conv) ||</div>
<div class="line">                    <a name="a14"></a><a class="code" href="group__DSAAll.html#gaca866c2103dd1433fd0db1d6c1dbbfe3">dsa_convert_float32_from_iso</a>(present_drv[axis], &amp;(incr-&gt;f32), *iso, conv))</div>
<div class="line">                    incr-&gt;f32 = (<span class="keywordtype">float</span>)*iso;</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">else</span> {</div>
<div class="line">                <span class="comment">// conversion of iso into integer 32 bits increment value</span></div>
<div class="line">                <span class="keywordflow">if</span> ((axis &lt; 0) || (axis &gt; 63) || !present_drv[axis] || !<a class="code" href="group__DMDAll.html#ga57f80aa448c4116ec79ba1c6ab9e7fb4">dmd_is_double_conv</a>(conv) ||</div>
<div class="line">                    <a name="a15"></a><a class="code" href="group__DSAAll.html#ga02948c8b0e5d5770ae4fefb308489e0b">dsa_convert_int32_from_iso</a>(present_drv[axis], &amp;(incr-&gt;i32), *iso, conv))</div>
<div class="line">                    incr-&gt;i32 = (<span class="keywordtype">int</span>)*iso;</div>
<div class="line">            }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// This function will ask the user to choose an url to open</span></div>
<div class="line"><span class="keywordtype">int</span> url_menu(<span class="keywordtype">char</span> *url) </div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">char</span> choice;</div>
<div class="line"> </div>
<div class="line">    fflush(stdin);</div>
<div class="line">    <span class="keywordflow">do</span> {</div>
<div class="line">        printf(<span class="stringliteral">&quot;\n\n\nChoose Url\n&quot;</span>);</div>
<div class="line">        printf(<span class="stringliteral">&quot;****************\n&quot;</span>);</div>
<div class="line">        printf(<span class="stringliteral">&quot;\tX: Exit\n&quot;</span>);</div>
<div class="line">        printf(<span class="stringliteral">&quot;\tA: ULTIMET\n&quot;</span>);</div>
<div class="line">        printf(<span class="stringliteral">&quot;\tB: USB\n&quot;</span>);</div>
<div class="line"> </div>
<div class="line">        printf(<span class="stringliteral">&quot;\n\t\tYour choice : &quot;</span>);</div>
<div class="line">        fflush(stdout);</div>
<div class="line">        scanf(<span class="stringliteral">&quot;%c&quot;</span>, &amp;choice);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">while</span> ((choice != <span class="charliteral">&#39;A&#39;</span>) &amp;&amp; (choice != <span class="charliteral">&#39;a&#39;</span>) &amp;&amp;</div>
<div class="line">           (choice != <span class="charliteral">&#39;B&#39;</span>) &amp;&amp; (choice != <span class="charliteral">&#39;b&#39;</span>) &amp;&amp;</div>
<div class="line">           (choice != <span class="charliteral">&#39;X&#39;</span>) &amp;&amp; (choice != <span class="charliteral">&#39;x&#39;</span>));</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">switch</span> (choice) {</div>
<div class="line">    <span class="keywordflow">case</span> <span class="charliteral">&#39;a&#39;</span>:</div>
<div class="line">    <span class="keywordflow">case</span> <span class="charliteral">&#39;A&#39;</span>:</div>
<div class="line">        strcpy(url, <span class="stringliteral">&quot;ULTIMET&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> 0;</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> <span class="charliteral">&#39;b&#39;</span>:</div>
<div class="line">    <span class="keywordflow">case</span> <span class="charliteral">&#39;B&#39;</span>:</div>
<div class="line">        strcpy(url, <span class="stringliteral">&quot;USB&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> 0;</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> <span class="charliteral">&#39;x&#39;</span>:</div>
<div class="line">    <span class="keywordflow">case</span> <span class="charliteral">&#39;X&#39;</span>:</div>
<div class="line">    <span class="keywordflow">default</span>:</div>
<div class="line">        <span class="keywordflow">return</span> 1;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// This function will ask the user to enter several axis number</span></div>
<div class="line"><span class="keywordtype">int</span> axes_menu(<span class="keywordtype">int</span> axis[], <span class="keywordtype">int</span> size) </div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> i = 0;</div>
<div class="line">    <span class="keywordtype">char</span> inp[8];</div>
<div class="line"> </div>
<div class="line">    fflush(stdin);</div>
<div class="line">    printf(<span class="stringliteral">&quot;\n\n\n&quot;</span>);</div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; size; i++) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;Enter %d st axis to download to (X for exit)\n&quot;</span>, i);</div>
<div class="line">        scanf(<span class="stringliteral">&quot;%s&quot;</span>, inp);</div>
<div class="line">        <span class="keywordflow">if</span> ((inp[0] == <span class="charliteral">&#39;x&#39;</span>) || (inp[0] == <span class="charliteral">&#39;X&#39;</span>))</div>
<div class="line">            <span class="keywordflow">return</span> i;</div>
<div class="line">        axis[i] = strtol(inp, NULL, 10);</div>
<div class="line">        <span class="keywordflow">if</span> ((axis[i] &lt; 0) || (axis[i] &gt; 64)) </div>
<div class="line">            i--;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> i;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// This function will ask the user to enter a filename</span></div>
<div class="line"><span class="comment">// depending on the flag must_exist, the file will be check if it exists or not</span></div>
<div class="line"><span class="keywordtype">int</span> file_menu(<span class="keywordtype">char</span> *file, <span class="keywordtype">boolean</span> must_exist) </div>
<div class="line">{</div>
<div class="line">    FILE *f;</div>
<div class="line"> </div>
<div class="line">    fflush(stdin);</div>
<div class="line">    printf(<span class="stringliteral">&quot;\n\n\n&quot;</span>);</div>
<div class="line">    <span class="keywordflow">for</span> (;;) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;Enter sequence file name (X for exit) : &quot;</span>);</div>
<div class="line">        fflush(stdout);</div>
<div class="line">        scanf(<span class="stringliteral">&quot;%s&quot;</span>, file);</div>
<div class="line">        <span class="keywordflow">if</span> (!_stricmp(file, <span class="stringliteral">&quot;X&quot;</span>))</div>
<div class="line">            <span class="keywordflow">return</span> -1;</div>
<div class="line">        <span class="keywordflow">if</span> (must_exist) {</div>
<div class="line">            <span class="keywordflow">if</span> (!(f = fopen(file, <span class="stringliteral">&quot;r&quot;</span>))) {</div>
<div class="line">                printf(<span class="stringliteral">&quot;\n\nFile %s does not exist\n&quot;</span>, file);</div>
<div class="line">                <span class="keywordflow">continue</span>;</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">return</span> 0;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> {</div>
<div class="line">            <span class="keywordflow">if</span> (!(f = fopen(file, <span class="stringliteral">&quot;w&quot;</span>))) {</div>
<div class="line">                printf(<span class="stringliteral">&quot;\n\nUnable to create File %s\n&quot;</span>, file);</div>
<div class="line">                <span class="keywordflow">continue</span>;</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">return</span> 0;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// This function will ask the user to choose an action to do</span></div>
<div class="line"><span class="keywordtype">int</span> action_menu() </div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">char</span> choice[8];</div>
<div class="line"> </div>
<div class="line">    fflush(stdin);</div>
<div class="line">    <span class="keywordflow">do</span> {</div>
<div class="line">        printf(<span class="stringliteral">&quot;\n\n\nChoose Action\n&quot;</span>);</div>
<div class="line">        printf(<span class="stringliteral">&quot;****************\n&quot;</span>);</div>
<div class="line">        printf(<span class="stringliteral">&quot;\tX: Exit\n&quot;</span>);</div>
<div class="line">        printf(<span class="stringliteral">&quot;\tA: Compile and download sequence\n&quot;</span>);</div>
<div class="line">        printf(<span class="stringliteral">&quot;\tB: Upload downloaded sequence\n&quot;</span>);</div>
<div class="line"> </div>
<div class="line">        printf(<span class="stringliteral">&quot;\n\t\tYour choice : &quot;</span>);</div>
<div class="line">        fflush(stdout);</div>
<div class="line">        scanf(<span class="stringliteral">&quot;%s&quot;</span>, choice);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">while</span> ((choice[0] != <span class="charliteral">&#39;A&#39;</span>) &amp;&amp; (choice[0] != <span class="charliteral">&#39;a&#39;</span>) &amp;&amp;</div>
<div class="line">           (choice[0] != <span class="charliteral">&#39;B&#39;</span>) &amp;&amp; (choice[0] != <span class="charliteral">&#39;b&#39;</span>) &amp;&amp;</div>
<div class="line">           (choice[0] != <span class="charliteral">&#39;X&#39;</span>) &amp;&amp; (choice[0] != <span class="charliteral">&#39;x&#39;</span>));</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">switch</span> (choice[0]) {</div>
<div class="line">    <span class="keywordflow">case</span> <span class="charliteral">&#39;a&#39;</span>:</div>
<div class="line">    <span class="keywordflow">case</span> <span class="charliteral">&#39;A&#39;</span>:</div>
<div class="line">        <span class="keywordflow">return</span> 0;</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> <span class="charliteral">&#39;b&#39;</span>:</div>
<div class="line">    <span class="keywordflow">case</span> <span class="charliteral">&#39;B&#39;</span>:</div>
<div class="line">        <span class="keywordflow">return</span> 1;</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> <span class="charliteral">&#39;x&#39;</span>:</div>
<div class="line">    <span class="keywordflow">case</span> <span class="charliteral">&#39;X&#39;</span>:</div>
<div class="line">    <span class="keywordflow">default</span>:</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// This function will ask the user to enter an axis number</span></div>
<div class="line"><span class="keywordtype">int</span> axis_menu(<span class="keywordtype">int</span> *axis) </div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">char</span> inp[8];</div>
<div class="line"> </div>
<div class="line">    fflush(stdin);</div>
<div class="line">    printf(<span class="stringliteral">&quot;\n\n\n&quot;</span>);</div>
<div class="line">    <span class="keywordflow">for</span> (;;) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;Enter axis Nr (X for exit)\n&quot;</span>);</div>
<div class="line">        scanf(<span class="stringliteral">&quot;%s&quot;</span>, inp);</div>
<div class="line">        <span class="keywordflow">if</span> ((inp[0] == <span class="charliteral">&#39;x&#39;</span>) || (inp[0] == <span class="charliteral">&#39;X&#39;</span>))</div>
<div class="line">            <span class="keywordflow">return</span> 1;</div>
<div class="line">        *axis = strtol(inp, NULL, 10);</div>
<div class="line">        <span class="keywordflow">if</span> ((*axis &lt; 0) || (*axis &gt; 64)) </div>
<div class="line">            <span class="keywordflow">continue</span>;</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment">// This function will print the content of a file</span></div>
<div class="line"><span class="keywordtype">int</span> print_file(<span class="keywordtype">char</span> *filename)</div>
<div class="line">{</div>
<div class="line">    FILE *f;</div>
<div class="line">    <span class="keywordtype">char</span> buf[1024];</div>
<div class="line"> </div>
<div class="line">    printf(<span class="stringliteral">&quot;\n\n\n&quot;</span>);</div>
<div class="line">    <span class="keywordflow">if</span> (!(f = fopen(filename, <span class="stringliteral">&quot;r&quot;</span>))) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;\tUnable to open file %s\n&quot;</span>, filename);</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line">    printf(<span class="stringliteral">&quot;\tContent of file %s\n&quot;</span>, filename);</div>
<div class="line">    printf(<span class="stringliteral">&quot;\t*****************************\n&quot;</span>);</div>
<div class="line">    <span class="keywordflow">while</span> (fgets(buf, <span class="keyword">sizeof</span>(buf), f)) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;\t%s&quot;</span>, buf);</div>
<div class="line">    }</div>
<div class="line">    fclose(f);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">    ESC *esc = NULL;                            <span class="comment">// Compiler object</span></div>
<div class="line">    <span class="keywordtype">int</span> err = 0;                                <span class="comment">// Contain the error</span></div>
<div class="line">    <span class="keywordtype">int</span> dbg_data_err = 0;                       <span class="comment">// Contain the error returned by uploading the debug datas</span></div>
<div class="line">    DSA_DEVICE *present_drv[64];                <span class="comment">// A table of all present devices</span></div>
<div class="line">    DSA_DEVICE_GROUP *present_grp = NULL;       <span class="comment">// A group of all present devices</span></div>
<div class="line">    DSA_DEVICE_GROUP *dwn_grp = NULL;           <span class="comment">// A group of all devices into which the sequence will be downloaded</span></div>
<div class="line">    <span class="keywordtype">int</span> i, j;                                   <span class="comment">// help variables</span></div>
<div class="line">    ETB *etb = NULL;                            <span class="comment">// ETB object</span></div>
<div class="line">    <span class="keywordtype">char</span> etb_url[32];                           <span class="comment">// url used by etb dll</span></div>
<div class="line">    <span class="keywordtype">char</span> dsa_url[64];                           <span class="comment">// url used by dsa dll</span></div>
<div class="line">    eint64 present;                             <span class="comment">// mask of present axes</span></div>
<div class="line">    <span class="keywordtype">int</span> nb_present_drv;                         <span class="comment">// number of present axes</span></div>
<div class="line">    <span class="keywordtype">int</span> nb_dwn_drv;                             <span class="comment">// number of axes into which the sequence will be downloaded</span></div>
<div class="line">    <span class="keywordtype">int</span> axis[64];                               <span class="comment">// a table of all axis number</span></div>
<div class="line">    <span class="keywordtype">int</span> stop;                                   <span class="comment">// TRUE if user want to stop</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Ask user about url to open</span></div>
<div class="line">    <span class="keywordflow">if</span> (url_menu(etb_url)) </div>
<div class="line">        <span class="keywordflow">return</span> 0;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Ask user about axes into which sequence must be downloaded</span></div>
<div class="line">    <span class="keywordflow">if</span> ((nb_dwn_drv = axes_menu(axis, 64)) == 0)</div>
<div class="line">        <span class="keywordflow">return</span> 0;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Create etb bus</span></div>
<div class="line">    <span class="keywordflow">if</span> (err = <a name="a16"></a><a class="code" href="group__ETBAll.html#ga9c1eb54eb6a08c89b31d6ea58541efdb">etb_create_bus</a>(&amp;etb))</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Open etb bus</span></div>
<div class="line">    <span class="keywordflow">if</span> (err = <a name="a17"></a><a class="code" href="group__ETBAll.html#gad7ad6fac42f96efe699c62cad4cbd474">etb_open</a>(etb, etb_url, 0, 0, 20000)) </div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Get present axes mask</span></div>
<div class="line">    <span class="keywordflow">if</span> (<a name="a18"></a><a class="code" href="group__ETBAll.html#ga3c5448412d5a26e93da497a7c84379fc">etb_etcom_get_drv_present</a>(etb, &amp;present))</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Close etb bus</span></div>
<div class="line">    <span class="keywordflow">if</span> (err = <a name="a19"></a><a class="code" href="group__ETBAll.html#gab1123fc9ad7eaca08387dae329fa12fa">etb_close</a>(etb, 0, 20000))</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Create drive object of all present axes and open them</span></div>
<div class="line">    nb_present_drv = 0;</div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; 63; i++) {</div>
<div class="line">        present_drv[i] = NULL;</div>
<div class="line">        <span class="keywordflow">if</span> (ISBITSET64(present, i)) {</div>
<div class="line">            sprintf(dsa_url, <span class="stringliteral">&quot;etb:%s:%d&quot;</span>, etb_url, i);</div>
<div class="line">            <span class="keywordflow">if</span> (err = <a name="a20"></a><a class="code" href="group__DSAAll.html#gabb207b622ef11d41d9dfadf965e77200">dsa_create_drive</a>(&amp;(present_drv[i])))</div>
<div class="line">                <span class="keywordflow">goto</span> _error;</div>
<div class="line">            <span class="keywordflow">if</span> (err = <a name="a21"></a><a class="code" href="group__DSAAll.html#gac4f6cffd7dd579bcb9a7f60af5f6bb29">dsa_open_u</a>(present_drv[i], dsa_url))</div>
<div class="line">                <span class="keywordflow">goto</span> _error;</div>
<div class="line">            nb_present_drv++;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Create Master object of UltimET if present</span></div>
<div class="line">    present_drv[63] = NULL;</div>
<div class="line">    <span class="keywordflow">if</span> (ISBITSET64(present, 63)) {</div>
<div class="line">        sprintf(dsa_url, <span class="stringliteral">&quot;etb:%s:*&quot;</span>, etb_url);</div>
<div class="line">        present_drv[63] = NULL;</div>
<div class="line">        <span class="keywordflow">if</span> (err = <a name="a22"></a><a class="code" href="group__DSAAll.html#gad5ae47cdd1e4e82e9c33c778b597bcf6">dsa_create_master</a>(&amp;(present_drv[63])))</div>
<div class="line">            <span class="keywordflow">goto</span> _error;</div>
<div class="line">        <span class="keywordflow">if</span> (err = <a class="code" href="group__DSAAll.html#gac4f6cffd7dd579bcb9a7f60af5f6bb29">dsa_open_u</a>(present_drv[63], dsa_url))</div>
<div class="line">            <span class="keywordflow">goto</span> _error;</div>
<div class="line">        nb_present_drv++;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Create group of all present axes</span></div>
<div class="line">    <span class="keywordflow">if</span> (err = <a name="a23"></a><a class="code" href="group__DSAAll.html#ga2249758e1c8dc33416765e229dfc688f">dsa_create_device_group</a>(&amp;present_grp, nb_present_drv))</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (i = 0, j = 0; i &lt; 64; i++) {</div>
<div class="line">        <span class="keywordflow">if</span> (present_drv[i]) {</div>
<div class="line">            <span class="keywordflow">if</span> (err = <a name="a24"></a><a class="code" href="group__DSAAll.html#ga33ee7bc94a04ba24add4dc9d89146fb3">dsa_set_group_item</a>(present_grp, j++, present_drv[i]))</div>
<div class="line">                <span class="keywordflow">goto</span> _error;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Create group of all axes into which the sequence must be downloaded</span></div>
<div class="line">    <span class="keywordflow">if</span> (err = <a class="code" href="group__DSAAll.html#ga2249758e1c8dc33416765e229dfc688f">dsa_create_device_group</a>(&amp;dwn_grp, nb_dwn_drv))</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (i = 0;i &lt; nb_dwn_drv; i++) {</div>
<div class="line">        <span class="keywordflow">if</span> (present_drv[axis[i]]) {</div>
<div class="line">            <span class="keywordflow">if</span> (err = <a class="code" href="group__DSAAll.html#ga33ee7bc94a04ba24add4dc9d89146fb3">dsa_set_group_item</a>(dwn_grp, i, present_drv[axis[i]]))</div>
<div class="line">                <span class="keywordflow">goto</span> _error;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Create Compiler object</span></div>
<div class="line">    <span class="keywordflow">if</span> (err = <a name="a25"></a><a class="code" href="group__ESCCompilation.html#ga4c8f79c869ea541e6719fa01484b5313">esc_create</a>(&amp;esc, dwn_grp))</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Add iso converter</span></div>
<div class="line">    <span class="keywordflow">if</span> (err = <a name="a26"></a><a class="code" href="group__ESCCompilation.html#ga4b2fd210d2567d0efa1da1e8f8ef6d21">esc_set_iso_converter</a>(esc, _esc_converter, &amp;(present_drv[0])))</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Show information depending on user choice</span></div>
<div class="line">    <span class="keywordflow">for</span>(stop = 0;!stop;) {</div>
<div class="line">        <span class="keywordflow">switch</span> (action_menu()) {</div>
<div class="line">            <span class="comment">// Download sequence</span></div>
<div class="line">            <span class="keywordflow">case</span> 0 :</div>
<div class="line">                {</div>
<div class="line">                <span class="keywordtype">char</span> filename[1024];</div>
<div class="line"> </div>
<div class="line">                <span class="comment">// Ask user about source sequence filename</span></div>
<div class="line">                <span class="keywordflow">if</span> (file_menu(filename, TRUE))</div>
<div class="line">                    <span class="keywordflow">return</span> 0;</div>
<div class="line">    </div>
<div class="line">                <span class="comment">// Compile and download sequence into devices</span></div>
<div class="line">                err = <a name="a27"></a><a class="code" href="group__ESCCompilation.html#ga0077b281b43eaf999eda7e247b1ab71e">esc_download_cseq_file</a> (esc, filename, 0, NULL, NULL);</div>
<div class="line"> </div>
<div class="line">                <span class="keywordflow">if</span> (<a name="a28"></a><a class="code" href="group__ESCAll.html#ga160a48b284b0db08dbe51b974b2a8d99">esc_translate_compiler_error</a>(esc, err)) {</div>
<div class="line">                    printf(<span class="stringliteral">&quot;%s\n&quot;</span>, <a class="code" href="group__ESCAll.html#ga160a48b284b0db08dbe51b974b2a8d99">esc_translate_compiler_error</a>(esc, err));</div>
<div class="line">                    err = 0;</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (err)</div>
<div class="line">                    <span class="keywordflow">goto</span> _error;</div>
<div class="line"> </div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line">                }</div>
<div class="line">            <span class="comment">// Upload downloaded sequence</span></div>
<div class="line">            <span class="keywordflow">case</span> 1 :</div>
<div class="line">                {</div>
<div class="line">                <span class="keywordtype">int</span> axis;</div>
<div class="line">                <span class="keywordtype">char</span> filename[1024];</div>
<div class="line"> </div>
<div class="line">                <span class="keywordflow">if</span> (axis_menu(&amp;axis) &gt; 0)</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">        </div>
<div class="line">                strcpy(filename, dir_tmpname());</div>
<div class="line">                <span class="keywordflow">if</span> (err = <a name="a29"></a><a class="code" href="group__ESCCompilation.html#ga07e633f302e4d262d975d9490d859b61">esc_upload_cseq_file</a> (present_drv[axis], filename, NULL, NULL))</div>
<div class="line">                    <span class="keywordflow">goto</span> _error;</div>
<div class="line">                print_file(filename);</div>
<div class="line"> </div>
<div class="line">                dir_file_remove(filename);</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line">                }</div>
<div class="line">            default :</div>
<div class="line">                stop = 1;</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">_error:</div>
<div class="line">    <span class="keywordflow">if</span> (<a name="a30"></a><a class="code" href="group__DSAAll.html#ga4b7ff3dfda85f4455a30920ea48c4de0">dsa_translate_error</a>(err)) {</div>
<div class="line">        DSA_EXT_DIAG(err, NULL);</div>
<div class="line">        printf(<span class="stringliteral">&quot;Ended with error %d: %s\n&quot;</span>, err, <a class="code" href="group__DSAAll.html#ga4b7ff3dfda85f4455a30920ea48c4de0">dsa_translate_error</a>(err));</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a name="a31"></a><a class="code" href="group__ETBAll.html#ga13a9518876afeae6f0e06ae78bba07bb">etb_translate_error</a>(err)) {</div>
<div class="line">        DSA_EXT_DIAG(err, NULL);</div>
<div class="line">        printf(<span class="stringliteral">&quot;Ended with error %d: %s\n&quot;</span>, err, <a class="code" href="group__ETBAll.html#ga13a9518876afeae6f0e06ae78bba07bb">etb_translate_error</a>(err));</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">        printf(<span class="stringliteral">&quot;Ended with success\n&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (<a name="a32"></a><a class="code" href="group__ESCCompilation.html#ga03a1d2dc9e3dfdedca1950afa6a2f9c1">esc_is_valid</a>(&amp;esc))</div>
<div class="line">        <a name="a33"></a><a class="code" href="group__ESCCompilation.html#gadac208830416d77d1808ab9c146efc2b">esc_destroy</a>(&amp;esc);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (<a name="a34"></a><a class="code" href="group__DSAAll.html#ga34cd2d1beea885a41c7930a5a133321a">dsa_is_valid_device_group</a>(present_grp))</div>
<div class="line">        <a name="a35"></a><a class="code" href="group__DSAAll.html#ga67a49a697906d25519c124c191a5654a">dsa_destroy</a>(&amp;present_grp);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="group__DSAAll.html#ga34cd2d1beea885a41c7930a5a133321a">dsa_is_valid_device_group</a>(dwn_grp))</div>
<div class="line">        <a class="code" href="group__DSAAll.html#ga67a49a697906d25519c124c191a5654a">dsa_destroy</a>(&amp;dwn_grp);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; 64; i++) {</div>
<div class="line">        ebool open;</div>
<div class="line">        <span class="keywordflow">if</span> (present_drv[i]) {</div>
<div class="line">            <a name="a36"></a><a class="code" href="group__DSAAll.html#gabca5df9b7fb98299c620827b88bb733c">dsa_is_open</a>(present_drv[i], &amp;open);</div>
<div class="line">            <span class="keywordflow">if</span> (open)</div>
<div class="line">                <a name="a37"></a><a class="code" href="group__DSAAll.html#ga96470cb9eaebf9228ce362404fbe0078">dsa_close</a>(present_drv[i]);</div>
<div class="line">            <span class="keywordflow">if</span> (<a name="a38"></a><a class="code" href="group__DSAAll.html#ga4c0d5fdbe730802cb9c2d835d2f4e3ea">dsa_is_valid_device</a>(present_drv[i]))</div>
<div class="line">                <a class="code" href="group__DSAAll.html#ga67a49a697906d25519c124c191a5654a">dsa_destroy</a>(&amp;present_drv[i]);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    _getch();</div>
<div class="line">}</div>
</div><!-- fragment --> </div><!-- contents -->
</div><!-- doc-content -->
<div class="ttc" id="agroup__DSAAll_html_ga02948c8b0e5d5770ae4fefb308489e0b"><div class="ttname"><a href="group__DSAAll.html#ga02948c8b0e5d5770ae4fefb308489e0b">dsa_convert_int32_from_iso</a></div><div class="ttdeci">int dsa_convert_int32_from_iso(DSA_DEVICE *dev, int *inc, double iso, int conv)</div><div class="ttdoc">Convert a value from iso value to integer 32 bits drive internal format.</div><div class="ttdef"><b>Definition:</b> dsagen.c:5621</div></div>
<div class="ttc" id="agroup__ETBAll_html_gad7ad6fac42f96efe699c62cad4cbd474"><div class="ttname"><a href="group__ETBAll.html#gad7ad6fac42f96efe699c62cad4cbd474">etb_open</a></div><div class="ttdeci">int etb_open(ETB *etb, const char *driver, dword flags, long baudrate, long timeout)</div><div class="ttdoc">Connect etel bus driver.</div><div class="ttdef"><b>Definition:</b> etbopn.c:330</div></div>
<div class="ttc" id="aetb40_8h_html"><div class="ttname"><a href="etb40_8h.html">etb40.h</a></div><div class="ttdoc">EDI-Version : 4.25A This header file contains public declaration for etel-bus library.</div></div>
<div class="ttc" id="agroup__DSAAll_html_gaded4fbb29e81c42762f35538ed9fc2f1"><div class="ttname"><a href="group__DSAAll.html#gaded4fbb29e81c42762f35538ed9fc2f1">dsa_convert_float64_from_iso</a></div><div class="ttdeci">int dsa_convert_float64_from_iso(DSA_DEVICE *dev, double *inc, double iso, int conv)</div><div class="ttdoc">Convert a value from iso value to float 64 bits drive internal format.</div><div class="ttdef"><b>Definition:</b> dsagen.c:5675</div></div>
<div class="ttc" id="agroup__DSAAll_html_ga73c539239ad16a94b6682be018dded0c"><div class="ttname"><a href="group__DSAAll.html#ga73c539239ad16a94b6682be018dded0c">dsa_convert_float64_to_iso</a></div><div class="ttdeci">int dsa_convert_float64_to_iso(DSA_DEVICE *dev, double *iso, double inc, int conv)</div><div class="ttdoc">Convert a value from drive 64 bits float internal format to iso value.</div><div class="ttdef"><b>Definition:</b> dsagen.c:5584</div></div>
<div class="ttc" id="agroup__ETBAll_html_gab1123fc9ad7eaca08387dae329fa12fa"><div class="ttname"><a href="group__ETBAll.html#gab1123fc9ad7eaca08387dae329fa12fa">etb_close</a></div><div class="ttdeci">int etb_close(ETB *etb, dword flags, long timeout)</div><div class="ttdoc">Disconnect etel bus driver.</div><div class="ttdef"><b>Definition:</b> etbopn.c:467</div></div>
<div class="ttc" id="agroup__DSAAll_html_ga34cd2d1beea885a41c7930a5a133321a"><div class="ttname"><a href="group__DSAAll.html#ga34cd2d1beea885a41c7930a5a133321a">dsa_is_valid_device_group</a></div><div class="ttdeci">ebool dsa_is_valid_device_group(DSA_DEVICE_GROUP *grp)</div><div class="ttdoc">Check if the given pointer is a valid device group pointer.</div><div class="ttdef"><b>Definition:</b> dsagrp.c:1142</div></div>
<div class="ttc" id="agroup__DSAAll_html_gaca866c2103dd1433fd0db1d6c1dbbfe3"><div class="ttname"><a href="group__DSAAll.html#gaca866c2103dd1433fd0db1d6c1dbbfe3">dsa_convert_float32_from_iso</a></div><div class="ttdeci">int dsa_convert_float32_from_iso(DSA_DEVICE *dev, float *inc, double iso, int conv)</div><div class="ttdoc">Convert a value from iso value to float 32 bits drive internal format.</div><div class="ttdef"><b>Definition:</b> dsagen.c:5657</div></div>
<div class="ttc" id="agroup__ESCCompilation_html_ga4b2fd210d2567d0efa1da1e8f8ef6d21"><div class="ttname"><a href="group__ESCCompilation.html#ga4b2fd210d2567d0efa1da1e8f8ef6d21">esc_set_iso_converter</a></div><div class="ttdeci">int esc_set_iso_converter(ESC *esc, ETB_ISO_CONVERTER *iso_conv, void *iso_conv_user_param)</div><div class="ttdoc">Set the iso converter which will be used by compiler to convert ISO to increment values.</div><div class="ttdef"><b>Definition:</b> esc40.c:1663</div></div>
<div class="ttc" id="aunionETB__ETCOM__VALUE_html"><div class="ttname"><a href="unionETB__ETCOM__VALUE.html">ETB_ETCOM_VALUE</a></div><div class="ttdoc">Etel variable parameter value.</div><div class="ttdef"><b>Definition:</b> etb40.h:1023</div></div>
<div class="ttc" id="admd40_8h_html_ab4cfce15dff05870b9f1a978018361cb"><div class="ttname"><a href="dmd40_8h.html#ab4cfce15dff05870b9f1a978018361cb">DMD_TYP_FLOAT_BIT_MASK</a></div><div class="ttdeci">#define DMD_TYP_FLOAT_BIT_MASK</div><div class="ttdoc">mask applied on a byte representing a type to obtain the float bit</div><div class="ttdef"><b>Definition:</b> dmd40.h:680</div></div>
<div class="ttc" id="agroup__DSAAll_html_ga0cd0c633dd69ff5fd299e1b6de11b166"><div class="ttname"><a href="group__DSAAll.html#ga0cd0c633dd69ff5fd299e1b6de11b166">dsa_convert_int64_from_iso</a></div><div class="ttdeci">int dsa_convert_int64_from_iso(DSA_DEVICE *dev, eint64 *inc, double iso, int conv)</div><div class="ttdoc">Convert a value from iso value to integer 64 bits drive internal format.</div><div class="ttdef"><b>Definition:</b> dsagen.c:5639</div></div>
<div class="ttc" id="admd40_8h_html"><div class="ttname"><a href="dmd40_8h.html">dmd40.h</a></div><div class="ttdoc">EDI-Version : 4.25A This header file contains public declaration for drive meta-data library.</div></div>
<div class="ttc" id="admd40_8h_html_a2cf1b93e3c22cbe4ad976754af28461d"><div class="ttname"><a href="dmd40_8h.html#a2cf1b93e3c22cbe4ad976754af28461d">DMD_TYP_64_BIT_MASK</a></div><div class="ttdeci">#define DMD_TYP_64_BIT_MASK</div><div class="ttdoc">mask applied on a byte representing a type to obtain the 64 bit</div><div class="ttdef"><b>Definition:</b> dmd40.h:681</div></div>
<div class="ttc" id="agroup__ESCCompilation_html_ga03a1d2dc9e3dfdedca1950afa6a2f9c1"><div class="ttname"><a href="group__ESCCompilation.html#ga03a1d2dc9e3dfdedca1950afa6a2f9c1">esc_is_valid</a></div><div class="ttdeci">ebool esc_is_valid(ESC *esc)</div><div class="ttdoc">Check if the given pointer is a valid ESC pointer.</div><div class="ttdef"><b>Definition:</b> esc40.c:985</div></div>
<div class="ttc" id="agroup__DSAAll_html_ga67a49a697906d25519c124c191a5654a"><div class="ttname"><a href="group__DSAAll.html#ga67a49a697906d25519c124c191a5654a">dsa_destroy</a></div><div class="ttdeci">int dsa_destroy(DSA_DEVICE_BASE **rdev)</div><div class="ttdoc">Destroy the dsa structure.</div><div class="ttdef"><b>Definition:</b> dsaopn.c:932</div></div>
<div class="ttc" id="aesc40_8h_html"><div class="ttname"><a href="esc40_8h.html">esc40.h</a></div><div class="ttdoc">EDI-Version : 4.25A This header file contains public declarations for the compiler interface library.</div></div>
<div class="ttc" id="agroup__ETBAll_html_ga9c1eb54eb6a08c89b31d6ea58541efdb"><div class="ttname"><a href="group__ETBAll.html#ga9c1eb54eb6a08c89b31d6ea58541efdb">etb_create_bus</a></div><div class="ttdeci">int etb_create_bus(ETB **retb)</div><div class="ttdoc">Create etel bus object.</div><div class="ttdef"><b>Definition:</b> etbopn.c:210</div></div>
<div class="ttc" id="agroup__DSAAll_html_gabb207b622ef11d41d9dfadf965e77200"><div class="ttname"><a href="group__DSAAll.html#gabb207b622ef11d41d9dfadf965e77200">dsa_create_drive</a></div><div class="ttdeci">int dsa_create_drive(DSA_DRIVE **rdrv)</div><div class="ttdoc">Create the dsa drive structure.</div><div class="ttdef"><b>Definition:</b> dsaopn.c:639</div></div>
<div class="ttc" id="agroup__DSAAll_html_gad5ae47cdd1e4e82e9c33c778b597bcf6"><div class="ttname"><a href="group__DSAAll.html#gad5ae47cdd1e4e82e9c33c778b597bcf6">dsa_create_master</a></div><div class="ttdeci">int dsa_create_master(DSA_MASTER **rmaster)</div><div class="ttdoc">Create the dsa master structure.</div><div class="ttdef"><b>Definition:</b> dsaopn.c:688</div></div>
<div class="ttc" id="agroup__DSAAll_html_ga4fa32c1909a4146f8e0d7f436e144063"><div class="ttname"><a href="group__DSAAll.html#ga4fa32c1909a4146f8e0d7f436e144063">dsa_convert_float32_to_iso</a></div><div class="ttdeci">int dsa_convert_float32_to_iso(DSA_DEVICE *dev, double *iso, float inc, int conv)</div><div class="ttdoc">Convert a value from drive 32 bits float internal format to iso value.</div><div class="ttdef"><b>Definition:</b> dsagen.c:5565</div></div>
<div class="ttc" id="agroup__DSAAll_html_ga96470cb9eaebf9228ce362404fbe0078"><div class="ttname"><a href="group__DSAAll.html#ga96470cb9eaebf9228ce362404fbe0078">dsa_close</a></div><div class="ttdeci">int dsa_close(DSA_DEVICE *dev)</div><div class="ttdoc">Close a dsa device object.</div><div class="ttdef"><b>Definition:</b> dsaopn.c:1654</div></div>
<div class="ttc" id="agroup__ESCCompilation_html_gadac208830416d77d1808ab9c146efc2b"><div class="ttname"><a href="group__ESCCompilation.html#gadac208830416d77d1808ab9c146efc2b">esc_destroy</a></div><div class="ttdeci">int esc_destroy(ESC **esc)</div><div class="ttdoc">Destroy the ESC object.</div><div class="ttdef"><b>Definition:</b> esc40.c:957</div></div>
<div class="ttc" id="agroup__ESCCompilation_html_ga4c8f79c869ea541e6719fa01484b5313"><div class="ttname"><a href="group__ESCCompilation.html#ga4c8f79c869ea541e6719fa01484b5313">esc_create</a></div><div class="ttdeci">int esc_create(ESC **esc, DSA_DEVICE_BASE *dwn_grp)</div><div class="ttdoc">Create a ESC object.</div><div class="ttdef"><b>Definition:</b> esc40.c:651</div></div>
<div class="ttc" id="agroup__DSAAll_html_ga59eda8e6d82f5eff732c2331a61f131d"><div class="ttname"><a href="group__DSAAll.html#ga59eda8e6d82f5eff732c2331a61f131d">dsa_convert_int32_to_iso</a></div><div class="ttdeci">int dsa_convert_int32_to_iso(DSA_DEVICE *dev, double *iso, int inc, int conv)</div><div class="ttdoc">Convert a value from drive 32 bits integer internal format to iso value.</div><div class="ttdef"><b>Definition:</b> dsagen.c:5530</div></div>
<div class="ttc" id="agroup__DSAAll_html_ga4c0d5fdbe730802cb9c2d835d2f4e3ea"><div class="ttname"><a href="group__DSAAll.html#ga4c0d5fdbe730802cb9c2d835d2f4e3ea">dsa_is_valid_device</a></div><div class="ttdeci">ebool dsa_is_valid_device(DSA_DEVICE *dev)</div><div class="ttdoc">Check if the given pointer is a valid device pointer.</div><div class="ttdef"><b>Definition:</b> dsagrp.c:1241</div></div>
<div class="ttc" id="agroup__DSAAll_html_gaec5aea5e34564577cff52dbc13788c1e"><div class="ttname"><a href="group__DSAAll.html#gaec5aea5e34564577cff52dbc13788c1e">dsa_convert_int64_to_iso</a></div><div class="ttdeci">int dsa_convert_int64_to_iso(DSA_DEVICE *dev, double *iso, eint64 inc, int conv)</div><div class="ttdoc">Convert a value from drive 64 bits integer internal format to iso value.</div><div class="ttdef"><b>Definition:</b> dsagen.c:5547</div></div>
<div class="ttc" id="agroup__DSAAll_html_gac4f6cffd7dd579bcb9a7f60af5f6bb29"><div class="ttname"><a href="group__DSAAll.html#gac4f6cffd7dd579bcb9a7f60af5f6bb29">dsa_open_u</a></div><div class="ttdeci">int dsa_open_u(DSA_DEVICE *dev, char_cp url)</div><div class="ttdoc">Open a dsa device object.</div><div class="ttdef"><b>Definition:</b> dsaopn.c:1100</div></div>
<div class="ttc" id="agroup__ESCCompilation_html_ga07e633f302e4d262d975d9490d859b61"><div class="ttname"><a href="group__ESCCompilation.html#ga07e633f302e4d262d975d9490d859b61">esc_upload_cseq_file</a></div><div class="ttdeci">int esc_upload_cseq_file(DSA_DEVICE *dev, char *filename, ESC_PROGRESS *progress_fct, void *puser)</div><div class="ttdoc">Upload a sequence text from drive into a file.</div><div class="ttdef"><b>Definition:</b> esc40.c:1247</div></div>
<div class="ttc" id="agroup__DSAAll_html_ga33ee7bc94a04ba24add4dc9d89146fb3"><div class="ttname"><a href="group__DSAAll.html#ga33ee7bc94a04ba24add4dc9d89146fb3">dsa_set_group_item</a></div><div class="ttdeci">int dsa_set_group_item(DSA_DEVICE_GROUP *grp, int pos, DSA_DEVICE_BASE *dev)</div><div class="ttdoc">Define the specified element of the group structure.</div><div class="ttdef"><b>Definition:</b> dsagrp.c:392</div></div>
<div class="ttc" id="agroup__DSAAll_html_ga4b7ff3dfda85f4455a30920ea48c4de0"><div class="ttname"><a href="group__DSAAll.html#ga4b7ff3dfda85f4455a30920ea48c4de0">dsa_translate_error</a></div><div class="ttdeci">char_cp dsa_translate_error(int code)</div><div class="ttdoc">convert an error code into a textual error message.</div><div class="ttdef"><b>Definition:</b> dsaerr.c:82</div></div>
<div class="ttc" id="agroup__ESCCompilation_html_ga0077b281b43eaf999eda7e247b1ab71e"><div class="ttname"><a href="group__ESCCompilation.html#ga0077b281b43eaf999eda7e247b1ab71e">esc_download_cseq_file</a></div><div class="ttdeci">int esc_download_cseq_file(ESC *esc, char *filename, dword flags, ESC_PROGRESS *progress_fct, void *puser)</div><div class="ttdoc">Download a sequence file.</div><div class="ttdef"><b>Definition:</b> esc40.c:1006</div></div>
<div class="ttc" id="agroup__DSAAll_html_ga2249758e1c8dc33416765e229dfc688f"><div class="ttname"><a href="group__DSAAll.html#ga2249758e1c8dc33416765e229dfc688f">dsa_create_device_group</a></div><div class="ttdeci">int dsa_create_device_group(DSA_DEVICE_GROUP **rgrp, int size)</div><div class="ttdoc">Create dsa device group structure.</div><div class="ttdef"><b>Definition:</b> dsagrp.c:137</div></div>
<div class="ttc" id="agroup__ESCAll_html_ga160a48b284b0db08dbe51b974b2a8d99"><div class="ttname"><a href="group__ESCAll.html#ga160a48b284b0db08dbe51b974b2a8d99">esc_translate_compiler_error</a></div><div class="ttdeci">char_cp esc_translate_compiler_error(ESC *esc, int code)</div><div class="ttdoc">Convert an error code into a textual error message.</div><div class="ttdef"><b>Definition:</b> escerr.c:96</div></div>
<div class="ttc" id="agroup__ETBAll_html_ga13a9518876afeae6f0e06ae78bba07bb"><div class="ttname"><a href="group__ETBAll.html#ga13a9518876afeae6f0e06ae78bba07bb">etb_translate_error</a></div><div class="ttdeci">char_cp etb_translate_error(int code)</div><div class="ttdoc">Convert an error code into a textual error message.</div><div class="ttdef"><b>Definition:</b> etberr.c:82</div></div>
<div class="ttc" id="adsa40_8h_html"><div class="ttname"><a href="dsa40_8h.html">dsa40.h</a></div><div class="ttdoc">EDI-Version : 4.25A This header file contains public declarations for the high level library.</div></div>
<div class="ttc" id="agroup__ETBAll_html_ga3c5448412d5a26e93da497a7c84379fc"><div class="ttname"><a href="group__ETBAll.html#ga3c5448412d5a26e93da497a7c84379fc">etb_etcom_get_drv_present</a></div><div class="ttdeci">int etb_etcom_get_drv_present(ETB *etb, eint64 *present)</div><div class="ttdoc">Get the mask of all axis present on this bus.</div><div class="ttdef"><b>Definition:</b> etbsta.c:1416</div></div>
<div class="ttc" id="agroup__DMDAll_html_ga57f80aa448c4116ec79ba1c6ab9e7fb4"><div class="ttname"><a href="group__DMDAll.html#ga57f80aa448c4116ec79ba1c6ab9e7fb4">dmd_is_double_conv</a></div><div class="ttdeci">ebool dmd_is_double_conv(int conv)</div><div class="ttdoc">Check if the conversion factor means something or not for iso values conversion.</div><div class="ttdef"><b>Definition:</b> dmdconv.c:377</div></div>
<div class="ttc" id="agroup__DSAAll_html_gabca5df9b7fb98299c620827b88bb733c"><div class="ttname"><a href="group__DSAAll.html#gabca5df9b7fb98299c620827b88bb733c">dsa_is_open</a></div><div class="ttdeci">int dsa_is_open(DSA_DEVICE *dev, ebool *is_open)</div><div class="ttdoc">Return true if the device is open.</div><div class="ttdef"><b>Definition:</b> dsaopn.c:1700</div></div>
<!-- HTML footer for doxygen 1.8.20-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Copyright by <a href="http://www.etel.ch"><img class="footer" src="ETELLogo.gif" width="104" height="31" alt="ETEL"/></a> on Thu Aug 26 2021 </li>
  </ul>
</div>
</body>
</html>
