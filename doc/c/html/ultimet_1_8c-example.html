<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>EDI: ultimet_1.c</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">EDI
   &#160;<span id="projectnumber">4.25A</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('ultimet_1_8c-example.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">ultimet_1.c</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * ultimet_1.c</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * Copyright (c) 1997-2021 ETEL SA. All Rights Reserved.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * This software is the confidential and proprietary information of ETEL SA </span></div>
<div class="line"><span class="comment"> * (&quot;Confidential Information&quot;). You shall not disclose such Confidential </span></div>
<div class="line"><span class="comment"> * Information and shall use it only in accordance with the terms of the </span></div>
<div class="line"><span class="comment"> * license agreement you entered into with ETEL.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * This software is provided &quot;AS IS&quot; without a warranty or representations of any kind. </span></div>
<div class="line"><span class="comment"> * ALL EXPRESS OR IMPLIED CONDITIONS, REPRESENTATIONS AND WARRANTIES, INCLUDING ANY IMPLIED WARRANTY </span></div>
<div class="line"><span class="comment"> * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE OR NON-INFRINGEMENT ARE HEREBY EXCLUDED. ETEL AND ITS </span></div>
<div class="line"><span class="comment"> * LICENSORS SHALL NOT BE LIABLE FOR ANY DAMAGES SUFFERED BY LICENSEE AS A RESULT OF USING, MODIFYING OR DISTRIBUTING </span></div>
<div class="line"><span class="comment"> * THE SOFTWARE OR ITS DERIVATIVES. IN NO EVENT WILL ETEL OR ITS LICENSORS BE LIABLE FOR ANY LOST REVENUE, PROFIT OR </span></div>
<div class="line"><span class="comment"> * DATA, OR FOR DIRECT, INDIRECT, SPECIAL, CONSEQUENTIAL, INCIDENTAL OR PUNITIVE DAMAGES, HOWEVER CAUSED AND REGARDLESS </span></div>
<div class="line"><span class="comment"> * OF THE THEORY OF LIABILITY, ARISING OUT OF THE USE OF OR INABILITY TO USE SOFTWARE, EVEN IF ETEL HAS BEEN ADVISED OF </span></div>
<div class="line"><span class="comment"> * THE POSSIBILITY OF SUCH DAMAGES. THE ENTIRE RISK ARISING OUT OF USE, PERFORMANCE OR NON-PERFORMANCE OF THE SOFTWARE </span></div>
<div class="line"><span class="comment"> * REMAINS WITH THE LICENSEE. IF ETEL SHOULD NEVERTHELESS BE FOUND LIABLE, WHETER DIRECTLY OR INDRECTLY, FOR ANY LOSS, </span></div>
<div class="line"><span class="comment"> * DAMAGE OR INJURY ARISING UNDER THIS AGREEMENT OR OTHERWISE, REGARDLESS OF CAUSE OR ORIGIN, ON ANY BASIS WHATSOEVER, </span></div>
<div class="line"><span class="comment"> * ITS TOTAL MAXIMUM LIABILITY IS LIMITED TO CHF 100.000 WHICH WILL BE THE COMPLETE AND EXCLUSIVE REMEDY AGAINST ETEL.</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment"> * This software is in particular not designed or intended .for use in on-line control of aircraft, air traffic, aircraft </span></div>
<div class="line"><span class="comment"> * navigation or aircraft communications; or in the design, construction, Operation or maintenance of any nuclear facility. </span></div>
<div class="line"><span class="comment"> * Licensee represents and warrants that it will not use or redistribute the Software for such purposes.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * This simple demo program shows how to make basic interpolated movements</span></div>
<div class="line"><span class="comment"> * on a X-Y axes system using ETEL&#39;s EDI libraries and the ULTIMET multi-axis</span></div>
<div class="line"><span class="comment"> * board. The program will switch the motors on, send an indexation command,</span></div>
<div class="line"><span class="comment"> * make a simple movement, switch to the intepolation mode and interpolate a</span></div>
<div class="line"><span class="comment"> * G-code movement.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * To run this demo without modification, you must have:</span></div>
<div class="line"><span class="comment"> *  - two linear motors with one AccurET controllers configured.</span></div>
<div class="line"><span class="comment"> *  - one ULTIMET multi-axis board on the PCI bus, configured like this</span></div>
<div class="line"><span class="comment"> *  - a TransnET connection between the drives and the ULTIMET.</span></div>
<div class="line"><span class="comment"> *  - the drives must have the axis number 0 and 1.</span></div>
<div class="line"><span class="comment"> *  - KL45 must be set to insure that position 0 is inside the valid range.</span></div>
<div class="line"><span class="comment"> *  - KL34 and KL35 must be set properly.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment">/*** libraries ***/</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * Include the standard I/O library.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;conio.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * Include EDI high level library version 3.0x</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="dsa40_8h.html">dsa40.h</a>&gt;</span></div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment">/*** functions ***/</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * Entry point function.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[])</div>
<div class="line">{</div>
<div class="line">    <span class="comment">/* Define two drive objects. */</span></div>
<div class="line">    DSA_DRIVE *x = NULL;</div>
<div class="line">    DSA_DRIVE *y = NULL;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Define a ULTIMET object. This object represents a multi-axis board */</span></div>
<div class="line">    DSA_MASTER *ultimet = NULL;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/*</span></div>
<div class="line"><span class="comment">     * Define an interpolation group. This group can be used like a normal</span></div>
<div class="line"><span class="comment">     * device or drive group. All drives within this group can also be</span></div>
<div class="line"><span class="comment">     * interpolated.</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    DSA_IPOL_GROUP *igrp = NULL;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Definition of some global variable. */</span></div>
<div class="line">    <span class="keywordtype">int</span> err;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Create the drive and ULTIMET objects. */</span></div>
<div class="line">    <span class="keywordflow">if</span> (err = <a name="a0"></a><a class="code" href="group__DSAAll.html#gabb207b622ef11d41d9dfadf965e77200">dsa_create_drive</a>(&amp;x)) {</div>
<div class="line">        DSA_EXT_DIAG(err, x);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (err = <a class="code" href="group__DSAAll.html#gabb207b622ef11d41d9dfadf965e77200">dsa_create_drive</a>(&amp;y)) {</div>
<div class="line">        DSA_EXT_DIAG(err, y);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (err = <a name="a1"></a><a class="code" href="group__DSAAll.html#gad5ae47cdd1e4e82e9c33c778b597bcf6">dsa_create_master</a>(&amp;ultimet)) {</div>
<div class="line">        DSA_EXT_DIAG(err, ultimet);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Create the interpolation group object and set it up. */</span></div>
<div class="line">    <span class="keywordflow">if</span> (err = <a name="a2"></a><a class="code" href="group__DSAAll.html#gae524a8f440e1d78dc2cdf4a75a0d5f83">dsa_create_ipol_group</a>(&amp;igrp, 2)) {</div>
<div class="line">        DSA_EXT_DIAG(err, igrp);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (err = <a name="a3"></a><a class="code" href="group__DSAAll.html#ga33ee7bc94a04ba24add4dc9d89146fb3">dsa_set_group_item</a>(igrp, 0, x)) {</div>
<div class="line">        DSA_EXT_DIAG(err, igrp);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (err = <a class="code" href="group__DSAAll.html#ga33ee7bc94a04ba24add4dc9d89146fb3">dsa_set_group_item</a>(igrp, 1, y)) {</div>
<div class="line">        DSA_EXT_DIAG(err, igrp);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/*</span></div>
<div class="line"><span class="comment">     * Associate the ULTIMET to the interpolation group. To make interpolated</span></div>
<div class="line"><span class="comment">     * movement (like lines, circles and PVT), you need a multi-axis</span></div>
<div class="line"><span class="comment">     * board. When you ask for an interpolated movement on a group of axes, the</span></div>
<div class="line"><span class="comment">     * dsa30 library will use the ULTIMET associated with the group.</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <span class="keywordflow">if</span> (err = <a name="a4"></a><a class="code" href="group__DSAAll.html#ga0e7df7489cd9a13b0a106c83a4b15c8e">dsa_set_master</a>(igrp, ultimet)) {</div>
<div class="line">        DSA_EXT_DIAG(err, igrp);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/*</span></div>
<div class="line"><span class="comment">     * Create connections. To have access to a ULTIMET board on the PCI bus, you</span></div>
<div class="line"><span class="comment">     * must specify the following string as url:</span></div>
<div class="line"><span class="comment">     *     etb:ULTIMET:&lt;axis_number&gt;</span></div>
<div class="line"><span class="comment">     * For the ULTIMET, you must specify &quot;*&quot; as an axis number.</span></div>
<div class="line"><span class="comment">     * During the opening procedure, you can force the hardware reset of the</span></div>
<div class="line"><span class="comment">     * ULTIMET and the drives. To do that, you must specify the following url:</span></div>
<div class="line"><span class="comment">     *     etb:ULTIMET,&lt;reset_params&gt;:&lt;axis_number&gt;</span></div>
<div class="line"><span class="comment">     * where &lt;reset_params&gt; can take the following values:</span></div>
<div class="line"><span class="comment">     *     r     to reset the ULTIMET</span></div>
<div class="line"><span class="comment">     *     x     to reset all the drives</span></div>
<div class="line"><span class="comment">     *     rx    to reset the ULTIMET and all the drives.</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <span class="keywordflow">if</span> (err = <a name="a5"></a><a class="code" href="group__DSAAll.html#gac4f6cffd7dd579bcb9a7f60af5f6bb29">dsa_open_u</a>(x, <span class="stringliteral">&quot;etb:ULTIMET:0&quot;</span>)) {</div>
<div class="line">        DSA_EXT_DIAG(err, x);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (err = <a class="code" href="group__DSAAll.html#gac4f6cffd7dd579bcb9a7f60af5f6bb29">dsa_open_u</a>(y, <span class="stringliteral">&quot;etb:ULTIMET:1&quot;</span>)) {</div>
<div class="line">        DSA_EXT_DIAG(err, y);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (err = <a class="code" href="group__DSAAll.html#gac4f6cffd7dd579bcb9a7f60af5f6bb29">dsa_open_u</a>(ultimet, <span class="stringliteral">&quot;etb:ULTIMET:*&quot;</span>)) {</div>
<div class="line">        DSA_EXT_DIAG(err, ultimet);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Reset error of both axes */</span></div>
<div class="line">    <span class="keywordflow">if</span> (err = <a name="a6"></a><a class="code" href="group__DSAAll.html#ga8ecfd3470b57e52353829b6aa989343f">dsa_reset_error_ex_s</a>(igrp, 0, 10000)) {</div>
<div class="line">        DSA_EXT_DIAG(err, igrp);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Reset error of ultimet */</span></div>
<div class="line">    <span class="keywordflow">if</span> (err = <a class="code" href="group__DSAAll.html#ga8ecfd3470b57e52353829b6aa989343f">dsa_reset_error_ex_s</a>(ultimet, 0, 10000)) {</div>
<div class="line">        DSA_EXT_DIAG(err, ultimet);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Power on both axes. */</span></div>
<div class="line">    <span class="keywordflow">if</span> (err = <a name="a7"></a><a class="code" href="group__DSAAll.html#gad4479a364dbab3a12369d9550c58a4ea">dsa_power_on_s</a>(igrp, 10000)) {</div>
<div class="line">        DSA_EXT_DIAG(err, igrp);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Start indexation on both axes. */</span></div>
<div class="line">    <span class="keywordflow">if</span> (err = <a name="a8"></a><a class="code" href="group__DSAAll.html#gaf918456506e721ed90e7481b0d1861f2">dsa_homing_start_s</a>(igrp, 10000)) {</div>
<div class="line">        DSA_EXT_DIAG(err, igrp);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Wait for the end of the movement of both axes. */</span></div>
<div class="line">    <span class="keywordflow">if</span> (err = <a name="a9"></a><a class="code" href="group__DSAAll.html#ga7647e24f7415c0573351aca11fb63f59">dsa_wait_movement_s</a>(igrp, 60000)) {</div>
<div class="line">        DSA_EXT_DIAG(err, igrp);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Make a movement to a specified point. */</span></div>
<div class="line">    <span class="keywordflow">if</span> (err = <a name="a10"></a><a class="code" href="group__DSAAll.html#ga1d2196bf2ca4d0f6105764fb1749c6c1">dsa_set_target_position_s</a>(x, 0, 0.01, <a name="a11"></a><a class="code" href="dsa40_8h.html#afa8a5747e4999e6e003571e2d2d26f8c">DSA_DEF_TIMEOUT</a>)) {</div>
<div class="line">        DSA_EXT_DIAG(err, x);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (err = <a class="code" href="group__DSAAll.html#ga1d2196bf2ca4d0f6105764fb1749c6c1">dsa_set_target_position_s</a>(y, 0, 0.02, <a class="code" href="dsa40_8h.html#afa8a5747e4999e6e003571e2d2d26f8c">DSA_DEF_TIMEOUT</a>)) {</div>
<div class="line">        DSA_EXT_DIAG(err, y);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/*</span></div>
<div class="line"><span class="comment">     * Wait for the end of the movement on both axes. Here, we use the</span></div>
<div class="line"><span class="comment">     * interpolation group like a normal group. The ULTIMET associated with this</span></div>
<div class="line"><span class="comment">     * group isn&#39;t taken into account.</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <span class="keywordflow">if</span> (err = <a class="code" href="group__DSAAll.html#ga7647e24f7415c0573351aca11fb63f59">dsa_wait_movement_s</a>(igrp, 60000)) {</div>
<div class="line">        DSA_EXT_DIAG(err, igrp);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/*</span></div>
<div class="line"><span class="comment">     * Now we enter in interpolated mode. In this mode the position of the</span></div>
<div class="line"><span class="comment">     * motors is controlled by the multi-axis board. This is right only for</span></div>
<div class="line"><span class="comment">     * drives that are specified in the interpolation group (igrp). When you</span></div>
<div class="line"><span class="comment">     * are in this mode, you cannot use the dsa_set_target_position_x()</span></div>
<div class="line"><span class="comment">     * functions on the drives specified in the igrp. You must use the</span></div>
<div class="line"><span class="comment">     * dsa_ipol_xxx() functions instead to define the interpolated path. The</span></div>
<div class="line"><span class="comment">     * interpolator (the ULTIMET) will drive the motors along this path.</span></div>
<div class="line"><span class="comment">     * Actually, the X-Y system is in the following absolute position (in</span></div>
<div class="line"><span class="comment">     * meters):</span></div>
<div class="line"><span class="comment">     *     x = 0.01, y = 0.02</span></div>
<div class="line"><span class="comment">     * When you enter into interpolated mode, the actual position becomes the</span></div>
<div class="line"><span class="comment">     * reference postition for the interpolation. For the interpolation</span></div>
<div class="line"><span class="comment">     * functions (dsa_ipol_xxx()), all coordinates are given in absolute from</span></div>
<div class="line"><span class="comment">     * this reference point. Practically, after the call to dsa_ipol_begin_s()</span></div>
<div class="line"><span class="comment">     * you are in the point:</span></div>
<div class="line"><span class="comment">     *     x = 0.0, y = 0.0</span></div>
<div class="line"><span class="comment">     * When you leave the interpolated mode, you come back to the previous</span></div>
<div class="line"><span class="comment">     * reference system.</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <span class="keywordflow">if</span> (err = <a name="a12"></a><a class="code" href="group__DSAAll.html#gac9b91de55e4cec46b88c9dbd1f97f8f2">dsa_ipol_begin_s</a>(igrp, <a class="code" href="dsa40_8h.html#afa8a5747e4999e6e003571e2d2d26f8c">DSA_DEF_TIMEOUT</a>)) {</div>
<div class="line">        DSA_EXT_DIAG(err, igrp);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/*</span></div>
<div class="line"><span class="comment">     * Define the maximum tengential speed and acceleration that the</span></div>
<div class="line"><span class="comment">     * interpolator must perform during the interpolation.</span></div>
<div class="line"><span class="comment">     * The tangential speed is set to 0.05 m/s.</span></div>
<div class="line"><span class="comment">     * The tangential acceleration and deceleration are set to 0.1 m/(s*s).</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <span class="keywordflow">if</span> (err = <a name="a13"></a><a class="code" href="group__DSAAll.html#ga0c8f4345366a42e560f8721822aa2dbb">dsa_ipol_tan_velocity_s</a>(igrp, 0.05, <a class="code" href="dsa40_8h.html#afa8a5747e4999e6e003571e2d2d26f8c">DSA_DEF_TIMEOUT</a>)) {</div>
<div class="line">        DSA_EXT_DIAG(err, igrp);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (err = <a name="a14"></a><a class="code" href="group__DSAAll.html#gadea32516f752ffe87ad0e5ac6514bcaa">dsa_ipol_tan_acceleration_s</a>(igrp, 0.1, <a class="code" href="dsa40_8h.html#afa8a5747e4999e6e003571e2d2d26f8c">DSA_DEF_TIMEOUT</a>)) {</div>
<div class="line">        DSA_EXT_DIAG(err, igrp);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (err = <a name="a15"></a><a class="code" href="group__DSAAll.html#ga5c12cb774837cc20c007f5b4231aa5bc">dsa_ipol_tan_deceleration_s</a>(igrp, 0.1, <a class="code" href="dsa40_8h.html#afa8a5747e4999e6e003571e2d2d26f8c">DSA_DEF_TIMEOUT</a>)) {</div>
<div class="line">        DSA_EXT_DIAG(err, igrp);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/*</span></div>
<div class="line"><span class="comment">     * Add a linear segment to the interpolation path. After this function,</span></div>
<div class="line"><span class="comment">     * the interpolator must directly start the movement along this segment</span></div>
<div class="line"><span class="comment">     * and stop it at the end of the segment.</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <span class="keywordflow">if</span> (err = <a name="a16"></a><a class="code" href="group__DSAAll.html#ga98dc88f92a6a1a061380968316fca8ae">dsa_ipol_line_2d_s</a>(igrp, -0.005, 0.001, <a class="code" href="dsa40_8h.html#afa8a5747e4999e6e003571e2d2d26f8c">DSA_DEF_TIMEOUT</a>)) {</div>
<div class="line">        DSA_EXT_DIAG(err, igrp);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/*</span></div>
<div class="line"><span class="comment">     * Add another linear segment to the interpolation path.</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <span class="keywordflow">if</span> (err = <a class="code" href="group__DSAAll.html#ga98dc88f92a6a1a061380968316fca8ae">dsa_ipol_line_2d_s</a>(igrp, 0.005, 0.001, <a class="code" href="dsa40_8h.html#afa8a5747e4999e6e003571e2d2d26f8c">DSA_DEF_TIMEOUT</a>)) {</div>
<div class="line">        DSA_EXT_DIAG(err, igrp);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/*</span></div>
<div class="line"><span class="comment">     * Start the concatenation of the interpolated segments. In this mode</span></div>
<div class="line"><span class="comment">     * all segments are processed at constant speed, without stoping between</span></div>
<div class="line"><span class="comment">     * segments. This means that when the interpolator processes the</span></div>
<div class="line"><span class="comment">     * previous segment, it does not decrease the speed at the end of the</span></div>
<div class="line"><span class="comment">     * segment. It jumps to the next segment without speed change.</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <span class="keywordflow">if</span> (err = <a name="a17"></a><a class="code" href="group__DSAAll.html#ga167ed2c50384be05832ab492691d0b65">dsa_ipol_begin_concatenation_s</a>(igrp, <a class="code" href="dsa40_8h.html#afa8a5747e4999e6e003571e2d2d26f8c">DSA_DEF_TIMEOUT</a>)) {</div>
<div class="line">        DSA_EXT_DIAG(err, igrp);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/*</span></div>
<div class="line"><span class="comment">     * Add a circular segment to the interpolation path. This segment is</span></div>
<div class="line"><span class="comment">     * defined by the destination point (second and third parameters) and</span></div>
<div class="line"><span class="comment">     * the center of the arc (fourth and fifth parameters) in the X-Y plane.</span></div>
<div class="line"><span class="comment">     * The circular segment is processed in the counter-clockwise direction.</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <span class="keywordflow">if</span> (err = <a name="a18"></a><a class="code" href="group__DSAAll.html#ga698149d8ff4286a5b880e5d4fccd9e13">dsa_ipol_circle_ccw_c2d_s</a>(igrp, 0.008, 0.002, 0.005, 0.006, <a class="code" href="dsa40_8h.html#afa8a5747e4999e6e003571e2d2d26f8c">DSA_DEF_TIMEOUT</a>)) {</div>
<div class="line">        DSA_EXT_DIAG(err, igrp);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/*</span></div>
<div class="line"><span class="comment">     * Add some segments to the interpolation path.</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <span class="keywordflow">if</span> (err = <a class="code" href="group__DSAAll.html#ga98dc88f92a6a1a061380968316fca8ae">dsa_ipol_line_2d_s</a>(igrp, 0.012, 0.005, <a class="code" href="dsa40_8h.html#afa8a5747e4999e6e003571e2d2d26f8c">DSA_DEF_TIMEOUT</a>)) {</div>
<div class="line">        DSA_EXT_DIAG(err, igrp);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (err = <a name="a19"></a><a class="code" href="group__DSAAll.html#ga4fb90f2d40b8a951e6d50afe3595e0d6">dsa_ipol_circle_cw_c2d_s</a>(igrp, 0.019, -0.002, 0.015, 0.001, <a class="code" href="dsa40_8h.html#afa8a5747e4999e6e003571e2d2d26f8c">DSA_DEF_TIMEOUT</a>)) {</div>
<div class="line">        DSA_EXT_DIAG(err, igrp);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (err = <a class="code" href="group__DSAAll.html#ga98dc88f92a6a1a061380968316fca8ae">dsa_ipol_line_2d_s</a>(igrp, 0.016, -0.006, <a class="code" href="dsa40_8h.html#afa8a5747e4999e6e003571e2d2d26f8c">DSA_DEF_TIMEOUT</a>)) {</div>
<div class="line">        DSA_EXT_DIAG(err, igrp);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/*</span></div>
<div class="line"><span class="comment">     * Stop the concatenated mode. After this command, the interpolator stops</span></div>
<div class="line"><span class="comment">     * the movement at the end of the previous segment and between each</span></div>
<div class="line"><span class="comment">     * following segments. Practically, the interpolator decreases</span></div>
<div class="line"><span class="comment">     * the speed in order to arrive at the end of the segment with a null</span></div>
<div class="line"><span class="comment">     * speed. If you don&#39;t call dsa_ipol_begin_concatenation_s(), the</span></div>
<div class="line"><span class="comment">     * interpolator must restart the movement at the beginning of the next</span></div>
<div class="line"><span class="comment">     * segment, stop at its end, restart at the beginning of the next one and</span></div>
<div class="line"><span class="comment">     * so on for each following segments.</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <span class="keywordflow">if</span> (err = <a name="a20"></a><a class="code" href="group__DSAAll.html#gac3081206d0394e35d5162238e73e9637">dsa_ipol_end_concatenation_s</a>(igrp, <a class="code" href="dsa40_8h.html#afa8a5747e4999e6e003571e2d2d26f8c">DSA_DEF_TIMEOUT</a>)) {</div>
<div class="line">        DSA_EXT_DIAG(err, igrp);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/*</span></div>
<div class="line"><span class="comment">     * Add a new segment to the trajectory path.</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <span class="keywordflow">if</span> (err = <a class="code" href="group__DSAAll.html#ga698149d8ff4286a5b880e5d4fccd9e13">dsa_ipol_circle_ccw_c2d_s</a>(igrp, 0.007, -0.003, 0.012, -0.003, <a class="code" href="dsa40_8h.html#afa8a5747e4999e6e003571e2d2d26f8c">DSA_DEF_TIMEOUT</a>)) {</div>
<div class="line">        DSA_EXT_DIAG(err, igrp);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/*</span></div>
<div class="line"><span class="comment">     * Go back to the concatenation mode. In this way, the interpolator appends</span></div>
<div class="line"><span class="comment">     * to the next segment without stoping the movement</span></div>
<div class="line"><span class="comment">     * between them.</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <span class="keywordflow">if</span> (err = <a class="code" href="group__DSAAll.html#ga167ed2c50384be05832ab492691d0b65">dsa_ipol_begin_concatenation_s</a>(igrp, <a class="code" href="dsa40_8h.html#afa8a5747e4999e6e003571e2d2d26f8c">DSA_DEF_TIMEOUT</a>)) {</div>
<div class="line">        DSA_EXT_DIAG(err, igrp);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/*</span></div>
<div class="line"><span class="comment">     * Add a few segments to the trajectory path.</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <span class="keywordflow">if</span> (err = <a class="code" href="group__DSAAll.html#ga4fb90f2d40b8a951e6d50afe3595e0d6">dsa_ipol_circle_cw_c2d_s</a>(igrp, 0.003, -0.003, 0.005, -0.003, <a class="code" href="dsa40_8h.html#afa8a5747e4999e6e003571e2d2d26f8c">DSA_DEF_TIMEOUT</a>)) {</div>
<div class="line">        DSA_EXT_DIAG(err, igrp);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/*</span></div>
<div class="line"><span class="comment">     * Stop concatenation.</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <span class="keywordflow">if</span> (err = <a class="code" href="group__DSAAll.html#gac3081206d0394e35d5162238e73e9637">dsa_ipol_end_concatenation_s</a>(igrp, <a class="code" href="dsa40_8h.html#afa8a5747e4999e6e003571e2d2d26f8c">DSA_DEF_TIMEOUT</a>)) {</div>
<div class="line">        DSA_EXT_DIAG(err, igrp);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/*</span></div>
<div class="line"><span class="comment">     * Just a few segments again.</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <span class="keywordflow">if</span> (err = <a class="code" href="group__DSAAll.html#ga98dc88f92a6a1a061380968316fca8ae">dsa_ipol_line_2d_s</a>(igrp, -0.005, -0.003, <a class="code" href="dsa40_8h.html#afa8a5747e4999e6e003571e2d2d26f8c">DSA_DEF_TIMEOUT</a>)) {</div>
<div class="line">        DSA_EXT_DIAG(err, igrp);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (err = <a class="code" href="group__DSAAll.html#ga98dc88f92a6a1a061380968316fca8ae">dsa_ipol_line_2d_s</a>(igrp, -0.007, -0.005, <a class="code" href="dsa40_8h.html#afa8a5747e4999e6e003571e2d2d26f8c">DSA_DEF_TIMEOUT</a>)) {</div>
<div class="line">        DSA_EXT_DIAG(err, igrp);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/*</span></div>
<div class="line"><span class="comment">     * Wait for the end of the interpolated movement.</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <span class="keywordflow">if</span> (err = <a name="a21"></a><a class="code" href="group__DSAAll.html#ga1efbddf4eff0336e151f348eb6bdfb56">dsa_ipol_wait_movement_s</a>(igrp, 60000)) {</div>
<div class="line">        DSA_EXT_DIAG(err, igrp);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/*</span></div>
<div class="line"><span class="comment">     * Leave the interpolation mode and come back to the previous reference</span></div>
<div class="line"><span class="comment">     * system.</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <span class="keywordflow">if</span> (err = <a name="a22"></a><a class="code" href="group__DSAAll.html#ga585ca40ec17ac8c993457dda09cfb167">dsa_ipol_end_s</a>(igrp, <a class="code" href="dsa40_8h.html#afa8a5747e4999e6e003571e2d2d26f8c">DSA_DEF_TIMEOUT</a>)) {</div>
<div class="line">        DSA_EXT_DIAG(err, igrp);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/*</span></div>
<div class="line"><span class="comment">     * Power off the motors.</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <span class="keywordflow">if</span> (err = <a name="a23"></a><a class="code" href="group__DSAAll.html#ga710488b5bce619a8a58c0442dd1f7ba8">dsa_power_off_s</a>(igrp, 60000)) {</div>
<div class="line">        DSA_EXT_DIAG(err, igrp);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Close all connections. */</span></div>
<div class="line">    <span class="keywordflow">if</span> (err = <a name="a24"></a><a class="code" href="group__DSAAll.html#ga96470cb9eaebf9228ce362404fbe0078">dsa_close</a>(x)) {</div>
<div class="line">        DSA_EXT_DIAG(err, x);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (err = <a class="code" href="group__DSAAll.html#ga96470cb9eaebf9228ce362404fbe0078">dsa_close</a>(y)) {</div>
<div class="line">        DSA_EXT_DIAG(err, y);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (err = <a class="code" href="group__DSAAll.html#ga96470cb9eaebf9228ce362404fbe0078">dsa_close</a>(ultimet)) {</div>
<div class="line">        DSA_EXT_DIAG(err, ultimet);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* We should then destroy the devices and group objects. */</span></div>
<div class="line">    <span class="keywordflow">if</span> (err = <a name="a25"></a><a class="code" href="group__DSAAll.html#ga67a49a697906d25519c124c191a5654a">dsa_destroy</a>(&amp;igrp)) {</div>
<div class="line">        DSA_EXT_DIAG(err, igrp);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (err = <a class="code" href="group__DSAAll.html#ga67a49a697906d25519c124c191a5654a">dsa_destroy</a>(&amp;x)) {</div>
<div class="line">        DSA_EXT_DIAG(err, x);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (err = <a class="code" href="group__DSAAll.html#ga67a49a697906d25519c124c191a5654a">dsa_destroy</a>(&amp;y)) {</div>
<div class="line">        DSA_EXT_DIAG(err, y);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (err = <a class="code" href="group__DSAAll.html#ga67a49a697906d25519c124c191a5654a">dsa_destroy</a>(&amp;ultimet)) {</div>
<div class="line">        DSA_EXT_DIAG(err, ultimet);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Everything seems successful, we can exit now. */</span></div>
<div class="line">    printf(<span class="stringliteral">&quot;success.\n&quot;</span>);</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Error handler. */</span></div>
<div class="line">_error:</div>
<div class="line">    <span class="comment">/* Leave the interpolation mode. */</span></div>
<div class="line">    <span class="keywordflow">if</span> (<a name="a26"></a><a class="code" href="group__DSAAll.html#ga995d1cb2a1d79bba0c7f5358f1d581ca">dsa_is_ipol_in_progress</a>(igrp))</div>
<div class="line">        <a class="code" href="group__DSAAll.html#ga585ca40ec17ac8c993457dda09cfb167">dsa_ipol_end_s</a>(igrp, <a class="code" href="dsa40_8h.html#afa8a5747e4999e6e003571e2d2d26f8c">DSA_DEF_TIMEOUT</a>);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Destroy the group if not already done. */</span></div>
<div class="line">    <span class="keywordflow">if</span>(<a name="a27"></a><a class="code" href="group__DSAAll.html#gaafd40306c21fbfb79f36b712b7badeb5">dsa_is_valid_ipol_group</a>(igrp))</div>
<div class="line">        <a class="code" href="group__DSAAll.html#ga67a49a697906d25519c124c191a5654a">dsa_destroy</a>(&amp;igrp);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Is the drive pointer valid ? */</span></div>
<div class="line">    <span class="keywordflow">if</span>(<a name="a28"></a><a class="code" href="group__DSAAll.html#ga989fc7fbd7d3b76cb0e3853aca34d4f7">dsa_is_valid_drive</a>(x)) {</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Is the drive open ? */</span></div>
<div class="line">        ebool open = 0;</div>
<div class="line">        <a name="a29"></a><a class="code" href="group__DSAAll.html#gabca5df9b7fb98299c620827b88bb733c">dsa_is_open</a>(x, &amp;open);</div>
<div class="line">        <span class="keywordflow">if</span> (open) {</div>
<div class="line"> </div>
<div class="line">            <span class="comment">/* Stop all movements. */</span></div>
<div class="line">            <a name="a30"></a><a class="code" href="group__DSAAll.html#gac1612522ee28aa29d1b6735934b53a8a">dsa_quick_stop_s</a>(x, <a name="a31"></a><a class="code" href="dsa40_8h.html#a0caf300cd534be210d5c07411641f4fe">DSA_QS_PROGRAMMED_DEC</a>,</div>
<div class="line">                <a name="a32"></a><a class="code" href="dsa40_8h.html#a5f8141ea9c17eb16757e8fdbe1fb8c66">DSA_QS_BYPASS</a> | <a name="a33"></a><a class="code" href="dsa40_8h.html#a243c0e90f35d4782b4704b0ca1a6dfd1">DSA_QS_STOP_SEQUENCE</a>, <a class="code" href="dsa40_8h.html#afa8a5747e4999e6e003571e2d2d26f8c">DSA_DEF_TIMEOUT</a>);</div>
<div class="line"> </div>
<div class="line">            <span class="comment">/* When the motor has stopped, a power off is done. */</span></div>
<div class="line">            <a class="code" href="group__DSAAll.html#ga7647e24f7415c0573351aca11fb63f59">dsa_wait_movement_s</a>(x, 60000);</div>
<div class="line">            <a class="code" href="group__DSAAll.html#ga710488b5bce619a8a58c0442dd1f7ba8">dsa_power_off_s</a>(x, 10000);</div>
<div class="line"> </div>
<div class="line">            <span class="comment">/* Close the connection. */</span></div>
<div class="line">            <a class="code" href="group__DSAAll.html#ga96470cb9eaebf9228ce362404fbe0078">dsa_close</a>(x);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* And finally, release all resources to the OS. */</span></div>
<div class="line">        <a class="code" href="group__DSAAll.html#ga67a49a697906d25519c124c191a5654a">dsa_destroy</a>(&amp;x);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Same operations for the second drive */</span></div>
<div class="line">    <span class="keywordflow">if</span>(<a class="code" href="group__DSAAll.html#ga989fc7fbd7d3b76cb0e3853aca34d4f7">dsa_is_valid_drive</a>(y)) {</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Is the drive open ? */</span></div>
<div class="line">        ebool open = 0;</div>
<div class="line">        <a class="code" href="group__DSAAll.html#gabca5df9b7fb98299c620827b88bb733c">dsa_is_open</a>(y, &amp;open);</div>
<div class="line">        <span class="keywordflow">if</span> (open) {</div>
<div class="line"> </div>
<div class="line">            <span class="comment">/* Stop all movements. */</span></div>
<div class="line">            <a class="code" href="group__DSAAll.html#gac1612522ee28aa29d1b6735934b53a8a">dsa_quick_stop_s</a>(y, <a class="code" href="dsa40_8h.html#a0caf300cd534be210d5c07411641f4fe">DSA_QS_PROGRAMMED_DEC</a>,</div>
<div class="line">                <a class="code" href="dsa40_8h.html#a5f8141ea9c17eb16757e8fdbe1fb8c66">DSA_QS_BYPASS</a> | <a class="code" href="dsa40_8h.html#a243c0e90f35d4782b4704b0ca1a6dfd1">DSA_QS_STOP_SEQUENCE</a>, <a class="code" href="dsa40_8h.html#afa8a5747e4999e6e003571e2d2d26f8c">DSA_DEF_TIMEOUT</a>);</div>
<div class="line"> </div>
<div class="line">            <span class="comment">/* When the motor has stopped, a power off is done. */</span></div>
<div class="line">            <a class="code" href="group__DSAAll.html#ga7647e24f7415c0573351aca11fb63f59">dsa_wait_movement_s</a>(y, 60000);</div>
<div class="line">            <a class="code" href="group__DSAAll.html#ga710488b5bce619a8a58c0442dd1f7ba8">dsa_power_off_s</a>(y, 10000);</div>
<div class="line"> </div>
<div class="line">            <span class="comment">/* Close the connection */</span></div>
<div class="line">            <a class="code" href="group__DSAAll.html#ga96470cb9eaebf9228ce362404fbe0078">dsa_close</a>(y);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* And finally, release all resources to the OS. */</span></div>
<div class="line">        <a class="code" href="group__DSAAll.html#ga67a49a697906d25519c124c191a5654a">dsa_destroy</a>(&amp;y);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Same operations for the ULTIMET */</span></div>
<div class="line">    <span class="keywordflow">if</span>(<a name="a34"></a><a class="code" href="group__DSAAll.html#ga70a69c2290bd38e89628d7a079a2dc89">dsa_is_valid_master</a>(ultimet)) {</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Is the drive open ? */</span></div>
<div class="line">        ebool open = 0;</div>
<div class="line">        <a class="code" href="group__DSAAll.html#gabca5df9b7fb98299c620827b88bb733c">dsa_is_open</a>(ultimet, &amp;open);</div>
<div class="line">        <span class="keywordflow">if</span> (open) {</div>
<div class="line"> </div>
<div class="line">            <span class="comment">/* Close the connection */</span></div>
<div class="line">            <a class="code" href="group__DSAAll.html#ga96470cb9eaebf9228ce362404fbe0078">dsa_close</a>(ultimet);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* And finally, release all resources to the OS. */</span></div>
<div class="line">        <a class="code" href="group__DSAAll.html#ga67a49a697906d25519c124c191a5654a">dsa_destroy</a>(&amp;ultimet);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 1;</div>
<div class="line">}</div>
</div><!-- fragment --> </div><!-- contents -->
</div><!-- doc-content -->
<div class="ttc" id="agroup__DSAAll_html_ga1d2196bf2ca4d0f6105764fb1749c6c1"><div class="ttname"><a href="group__DSAAll.html#ga1d2196bf2ca4d0f6105764fb1749c6c1">dsa_set_target_position_s</a></div><div class="ttdeci">int dsa_set_target_position_s(DSA_DRIVE_BASE *obj, int sidx, double pos, long timeout)</div><div class="ttdoc">Set the target position (KL210:depth) - synchronous.</div><div class="ttdef"><b>Definition:</b> dsapro.c:847</div></div>
<div class="ttc" id="agroup__DSAAll_html_gae524a8f440e1d78dc2cdf4a75a0d5f83"><div class="ttname"><a href="group__DSAAll.html#gae524a8f440e1d78dc2cdf4a75a0d5f83">dsa_create_ipol_group</a></div><div class="ttdeci">int dsa_create_ipol_group(DSA_IPOL_GROUP **rgrp, int size)</div><div class="ttdoc">Create a dsa interpolation group structure.</div><div class="ttdef"><b>Definition:</b> dsagrp.c:345</div></div>
<div class="ttc" id="agroup__DSAAll_html_ga585ca40ec17ac8c993457dda09cfb167"><div class="ttname"><a href="group__DSAAll.html#ga585ca40ec17ac8c993457dda09cfb167">dsa_ipol_end_s</a></div><div class="ttdeci">int dsa_ipol_end_s(DSA_IPOL_GROUP *igrp, long timeout)</div><div class="ttdoc">Stop the interpolation mode (Command:IEND) - synchronous.</div><div class="ttdef"><b>Definition:</b> dsaipl.c:523</div></div>
<div class="ttc" id="agroup__DSAAll_html_ga698149d8ff4286a5b880e5d4fccd9e13"><div class="ttname"><a href="group__DSAAll.html#ga698149d8ff4286a5b880e5d4fccd9e13">dsa_ipol_circle_ccw_c2d_s</a></div><div class="ttdeci">int dsa_ipol_circle_ccw_c2d_s(DSA_IPOL_GROUP *igrp, double x, double y, double cx, double cy, long timeout)</div><div class="ttdoc">Define a clockwise circular segment (Command:ICCW) - synchronous.</div><div class="ttdef"><b>Definition:</b> dsaipl.c:2407</div></div>
<div class="ttc" id="agroup__DSAAll_html_ga167ed2c50384be05832ab492691d0b65"><div class="ttname"><a href="group__DSAAll.html#ga167ed2c50384be05832ab492691d0b65">dsa_ipol_begin_concatenation_s</a></div><div class="ttdeci">int dsa_ipol_begin_concatenation_s(DSA_IPOL_GROUP *igrp, long timeout)</div><div class="ttdoc">Begin the concatenation of trajectory segments (Command:ICONC) - synchronous.</div><div class="ttdef"><b>Definition:</b> dsaipl.c:589</div></div>
<div class="ttc" id="agroup__DSAAll_html_ga67a49a697906d25519c124c191a5654a"><div class="ttname"><a href="group__DSAAll.html#ga67a49a697906d25519c124c191a5654a">dsa_destroy</a></div><div class="ttdeci">int dsa_destroy(DSA_DEVICE_BASE **rdev)</div><div class="ttdoc">Destroy the dsa structure.</div><div class="ttdef"><b>Definition:</b> dsaopn.c:932</div></div>
<div class="ttc" id="agroup__DSAAll_html_ga8ecfd3470b57e52353829b6aa989343f"><div class="ttname"><a href="group__DSAAll.html#ga8ecfd3470b57e52353829b6aa989343f">dsa_reset_error_ex_s</a></div><div class="ttdeci">int dsa_reset_error_ex_s(DSA_DEVICE_BASE *obj, int reset_code, long timeout)</div><div class="ttdoc">Reset the error flags in the drive (Command:RST) - synchronous.</div><div class="ttdef"><b>Definition:</b> dsacmd.c:124</div></div>
<div class="ttc" id="agroup__DSAAll_html_ga0c8f4345366a42e560f8721822aa2dbb"><div class="ttname"><a href="group__DSAAll.html#ga0c8f4345366a42e560f8721822aa2dbb">dsa_ipol_tan_velocity_s</a></div><div class="ttdeci">int dsa_ipol_tan_velocity_s(DSA_IPOL_GROUP *igrp, double velocity, long timeout)</div><div class="ttdoc">Define the trajectory tangential speel (Command:ITSPD) - synchronous.</div><div class="ttdef"><b>Definition:</b> dsaipl.c:1037</div></div>
<div class="ttc" id="agroup__DSAAll_html_gaf918456506e721ed90e7481b0d1861f2"><div class="ttname"><a href="group__DSAAll.html#gaf918456506e721ed90e7481b0d1861f2">dsa_homing_start_s</a></div><div class="ttdeci">int dsa_homing_start_s(DSA_DRIVE_BASE *obj, long timeout)</div><div class="ttdoc">Start homing operation (Command:IND) - synchronous.</div><div class="ttdef"><b>Definition:</b> dsafct.c:601</div></div>
<div class="ttc" id="agroup__DSAAll_html_gaafd40306c21fbfb79f36b712b7badeb5"><div class="ttname"><a href="group__DSAAll.html#gaafd40306c21fbfb79f36b712b7badeb5">dsa_is_valid_ipol_group</a></div><div class="ttdeci">ebool dsa_is_valid_ipol_group(DSA_IPOL_GROUP *grp)</div><div class="ttdoc">Check if the given pointer is a valid ipol group pointer.</div><div class="ttdef"><b>Definition:</b> dsagrp.c:1228</div></div>
<div class="ttc" id="agroup__DSAAll_html_gabb207b622ef11d41d9dfadf965e77200"><div class="ttname"><a href="group__DSAAll.html#gabb207b622ef11d41d9dfadf965e77200">dsa_create_drive</a></div><div class="ttdeci">int dsa_create_drive(DSA_DRIVE **rdrv)</div><div class="ttdoc">Create the dsa drive structure.</div><div class="ttdef"><b>Definition:</b> dsaopn.c:639</div></div>
<div class="ttc" id="agroup__DSAAll_html_gad5ae47cdd1e4e82e9c33c778b597bcf6"><div class="ttname"><a href="group__DSAAll.html#gad5ae47cdd1e4e82e9c33c778b597bcf6">dsa_create_master</a></div><div class="ttdeci">int dsa_create_master(DSA_MASTER **rmaster)</div><div class="ttdoc">Create the dsa master structure.</div><div class="ttdef"><b>Definition:</b> dsaopn.c:688</div></div>
<div class="ttc" id="agroup__DSAAll_html_ga1efbddf4eff0336e151f348eb6bdfb56"><div class="ttname"><a href="group__DSAAll.html#ga1efbddf4eff0336e151f348eb6bdfb56">dsa_ipol_wait_movement_s</a></div><div class="ttdeci">int dsa_ipol_wait_movement_s(DSA_IPOL_GROUP *igrp, long timeout)</div><div class="ttdoc">Wait the end of a interpolated movement (dsa_wait_status_equal_s) - synchronous.</div><div class="ttdef"><b>Definition:</b> dsaipl.c:2602</div></div>
<div class="ttc" id="agroup__DSAAll_html_ga96470cb9eaebf9228ce362404fbe0078"><div class="ttname"><a href="group__DSAAll.html#ga96470cb9eaebf9228ce362404fbe0078">dsa_close</a></div><div class="ttdeci">int dsa_close(DSA_DEVICE *dev)</div><div class="ttdoc">Close a dsa device object.</div><div class="ttdef"><b>Definition:</b> dsaopn.c:1654</div></div>
<div class="ttc" id="agroup__DSAAll_html_gac3081206d0394e35d5162238e73e9637"><div class="ttname"><a href="group__DSAAll.html#gac3081206d0394e35d5162238e73e9637">dsa_ipol_end_concatenation_s</a></div><div class="ttdeci">int dsa_ipol_end_concatenation_s(DSA_IPOL_GROUP *igrp, long timeout)</div><div class="ttdoc">End the concatenation of trajectory segments (Command:INCONC) - synchronous.</div><div class="ttdef"><b>Definition:</b> dsaipl.c:659</div></div>
<div class="ttc" id="adsa40_8h_html_afa8a5747e4999e6e003571e2d2d26f8c"><div class="ttname"><a href="dsa40_8h.html#afa8a5747e4999e6e003571e2d2d26f8c">DSA_DEF_TIMEOUT</a></div><div class="ttdeci">#define DSA_DEF_TIMEOUT</div><div class="ttdoc">use the default timeout appropriate for this communication</div><div class="ttdef"><b>Definition:</b> dsa40.h:634</div></div>
<div class="ttc" id="agroup__DSAAll_html_gad4479a364dbab3a12369d9550c58a4ea"><div class="ttname"><a href="group__DSAAll.html#gad4479a364dbab3a12369d9550c58a4ea">dsa_power_on_s</a></div><div class="ttdeci">int dsa_power_on_s(DSA_DRIVE_BASE *grp, long timeout)</div><div class="ttdoc">Set the motor in power on state (Command:PWR=1) - synchronous.</div><div class="ttdef"><b>Definition:</b> dsafct.c:358</div></div>
<div class="ttc" id="agroup__DSAAll_html_ga5c12cb774837cc20c007f5b4231aa5bc"><div class="ttname"><a href="group__DSAAll.html#ga5c12cb774837cc20c007f5b4231aa5bc">dsa_ipol_tan_deceleration_s</a></div><div class="ttdeci">int dsa_ipol_tan_deceleration_s(DSA_IPOL_GROUP *igrp, double dec, long timeout)</div><div class="ttdoc">Define the trajectory tangential deceleration (Command:ITDEC) - synchronous.</div><div class="ttdef"><b>Definition:</b> dsaipl.c:1181</div></div>
<div class="ttc" id="adsa40_8h_html_a243c0e90f35d4782b4704b0ca1a6dfd1"><div class="ttname"><a href="dsa40_8h.html#a243c0e90f35d4782b4704b0ca1a6dfd1">DSA_QS_STOP_SEQUENCE</a></div><div class="ttdeci">#define DSA_QS_STOP_SEQUENCE</div><div class="ttdoc">also stop the sequence</div><div class="ttdef"><b>Definition:</b> dsa40.h:780</div></div>
<div class="ttc" id="adsa40_8h_html_a0caf300cd534be210d5c07411641f4fe"><div class="ttname"><a href="dsa40_8h.html#a0caf300cd534be210d5c07411641f4fe">DSA_QS_PROGRAMMED_DEC</a></div><div class="ttdeci">#define DSA_QS_PROGRAMMED_DEC</div><div class="ttdoc">stop motor with programmed deceleration</div><div class="ttdef"><b>Definition:</b> dsa40.h:779</div></div>
<div class="ttc" id="agroup__DSAAll_html_gac4f6cffd7dd579bcb9a7f60af5f6bb29"><div class="ttname"><a href="group__DSAAll.html#gac4f6cffd7dd579bcb9a7f60af5f6bb29">dsa_open_u</a></div><div class="ttdeci">int dsa_open_u(DSA_DEVICE *dev, char_cp url)</div><div class="ttdoc">Open a dsa device object.</div><div class="ttdef"><b>Definition:</b> dsaopn.c:1100</div></div>
<div class="ttc" id="agroup__DSAAll_html_ga989fc7fbd7d3b76cb0e3853aca34d4f7"><div class="ttname"><a href="group__DSAAll.html#ga989fc7fbd7d3b76cb0e3853aca34d4f7">dsa_is_valid_drive</a></div><div class="ttdeci">ebool dsa_is_valid_drive(DSA_DRIVE *drv)</div><div class="ttdoc">Check if the given pointer is a valid drive pointer.</div><div class="ttdef"><b>Definition:</b> dsagrp.c:1262</div></div>
<div class="ttc" id="agroup__DSAAll_html_gadea32516f752ffe87ad0e5ac6514bcaa"><div class="ttname"><a href="group__DSAAll.html#gadea32516f752ffe87ad0e5ac6514bcaa">dsa_ipol_tan_acceleration_s</a></div><div class="ttdeci">int dsa_ipol_tan_acceleration_s(DSA_IPOL_GROUP *igrp, double acc, long timeout)</div><div class="ttdoc">Define the trajectory tangential acceleration (Command:ITACC) - synchronous.</div><div class="ttdef"><b>Definition:</b> dsaipl.c:1109</div></div>
<div class="ttc" id="agroup__DSAAll_html_ga33ee7bc94a04ba24add4dc9d89146fb3"><div class="ttname"><a href="group__DSAAll.html#ga33ee7bc94a04ba24add4dc9d89146fb3">dsa_set_group_item</a></div><div class="ttdeci">int dsa_set_group_item(DSA_DEVICE_GROUP *grp, int pos, DSA_DEVICE_BASE *dev)</div><div class="ttdoc">Define the specified element of the group structure.</div><div class="ttdef"><b>Definition:</b> dsagrp.c:392</div></div>
<div class="ttc" id="adsa40_8h_html_a5f8141ea9c17eb16757e8fdbe1fb8c66"><div class="ttname"><a href="dsa40_8h.html#a5f8141ea9c17eb16757e8fdbe1fb8c66">DSA_QS_BYPASS</a></div><div class="ttdeci">#define DSA_QS_BYPASS</div><div class="ttdoc">bypass all pending command (OBSOLETE)</div><div class="ttdef"><b>Definition:</b> dsa40.h:776</div></div>
<div class="ttc" id="agroup__DSAAll_html_ga70a69c2290bd38e89628d7a079a2dc89"><div class="ttname"><a href="group__DSAAll.html#ga70a69c2290bd38e89628d7a079a2dc89">dsa_is_valid_master</a></div><div class="ttdeci">ebool dsa_is_valid_master(DSA_MASTER *master)</div><div class="ttdoc">Check if the given pointer is a valid master pointer.</div><div class="ttdef"><b>Definition:</b> dsagrp.c:1275</div></div>
<div class="ttc" id="agroup__DSAAll_html_ga710488b5bce619a8a58c0442dd1f7ba8"><div class="ttname"><a href="group__DSAAll.html#ga710488b5bce619a8a58c0442dd1f7ba8">dsa_power_off_s</a></div><div class="ttdeci">int dsa_power_off_s(DSA_DRIVE_BASE *grp, long timeout)</div><div class="ttdoc">Set the motor in power off state (Command:PWR=0) - synchronous.</div><div class="ttdef"><b>Definition:</b> dsafct.c:392</div></div>
<div class="ttc" id="agroup__DSAAll_html_ga995d1cb2a1d79bba0c7f5358f1d581ca"><div class="ttname"><a href="group__DSAAll.html#ga995d1cb2a1d79bba0c7f5358f1d581ca">dsa_is_ipol_in_progress</a></div><div class="ttdeci">ebool dsa_is_ipol_in_progress(DSA_IPOL_GROUP *igrp)</div><div class="ttdoc">Check if interpolation is in progress.</div><div class="ttdef"><b>Definition:</b> dsaipl.c:4981</div></div>
<div class="ttc" id="adsa40_8h_html"><div class="ttname"><a href="dsa40_8h.html">dsa40.h</a></div><div class="ttdoc">EDI-Version : 4.25A This header file contains public declarations for the high level library.</div></div>
<div class="ttc" id="agroup__DSAAll_html_gac1612522ee28aa29d1b6735934b53a8a"><div class="ttname"><a href="group__DSAAll.html#gac1612522ee28aa29d1b6735934b53a8a">dsa_quick_stop_s</a></div><div class="ttdeci">int dsa_quick_stop_s(DSA_DRIVE_BASE *grp, int mode, dword flags, long timeout)</div><div class="ttdoc">Quick stop the drive (Command:HLT/STP/HLO/PWR/HLB/BRK) - synchronous.</div><div class="ttdef"><b>Definition:</b> dsafct.c:263</div></div>
<div class="ttc" id="agroup__DSAAll_html_ga4fb90f2d40b8a951e6d50afe3595e0d6"><div class="ttname"><a href="group__DSAAll.html#ga4fb90f2d40b8a951e6d50afe3595e0d6">dsa_ipol_circle_cw_c2d_s</a></div><div class="ttdeci">int dsa_ipol_circle_cw_c2d_s(DSA_IPOL_GROUP *igrp, double x, double y, double cx, double cy, long timeout)</div><div class="ttdoc">Define a clockwise circular segment (Command:ICW) - synchronous.</div><div class="ttdef"><b>Definition:</b> dsaipl.c:2303</div></div>
<div class="ttc" id="agroup__DSAAll_html_ga98dc88f92a6a1a061380968316fca8ae"><div class="ttname"><a href="group__DSAAll.html#ga98dc88f92a6a1a061380968316fca8ae">dsa_ipol_line_2d_s</a></div><div class="ttdeci">int dsa_ipol_line_2d_s(DSA_IPOL_GROUP *igrp, double x, double y, long timeout)</div><div class="ttdoc">Define a 2D linear segment (Command:ILINE) - synchronous.</div><div class="ttdef"><b>Definition:</b> dsaipl.c:2509</div></div>
<div class="ttc" id="agroup__DSAAll_html_ga0e7df7489cd9a13b0a106c83a4b15c8e"><div class="ttname"><a href="group__DSAAll.html#ga0e7df7489cd9a13b0a106c83a4b15c8e">dsa_set_master</a></div><div class="ttdeci">int dsa_set_master(DSA_IPOL_GROUP *grp, DSA_MASTER *master)</div><div class="ttdoc">Set master object member of interpolation group.</div><div class="ttdef"><b>Definition:</b> dsagrp.c:1443</div></div>
<div class="ttc" id="agroup__DSAAll_html_ga7647e24f7415c0573351aca11fb63f59"><div class="ttname"><a href="group__DSAAll.html#ga7647e24f7415c0573351aca11fb63f59">dsa_wait_movement_s</a></div><div class="ttdeci">int dsa_wait_movement_s(DSA_DEVICE_BASE *obj, long timeout)</div><div class="ttdoc">Wait the end of movement (Command:WTM) - synchronous.</div><div class="ttdef"><b>Definition:</b> dsawai.c:83</div></div>
<div class="ttc" id="agroup__DSAAll_html_gac9b91de55e4cec46b88c9dbd1f97f8f2"><div class="ttname"><a href="group__DSAAll.html#gac9b91de55e4cec46b88c9dbd1f97f8f2">dsa_ipol_begin_s</a></div><div class="ttdeci">int dsa_ipol_begin_s(DSA_IPOL_GROUP *igrp, long timeout)</div><div class="ttdoc">Switch the drives in the interpolation mode (Command:ISET + IBEGIN) - synchronous.</div><div class="ttdef"><b>Definition:</b> dsaipl.c:188</div></div>
<div class="ttc" id="agroup__DSAAll_html_gabca5df9b7fb98299c620827b88bb733c"><div class="ttname"><a href="group__DSAAll.html#gabca5df9b7fb98299c620827b88bb733c">dsa_is_open</a></div><div class="ttdeci">int dsa_is_open(DSA_DEVICE *dev, ebool *is_open)</div><div class="ttdoc">Return true if the device is open.</div><div class="ttdef"><b>Definition:</b> dsaopn.c:1700</div></div>
<!-- HTML footer for doxygen 1.8.20-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Copyright by <a href="http://www.etel.ch"><img class="footer" src="ETELLogo.gif" width="104" height="31" alt="ETEL"/></a> on Thu Aug 26 2021 </li>
  </ul>
</div>
</body>
</html>
