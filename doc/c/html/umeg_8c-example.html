<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>EDI: umeg.c</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">EDI
   &#160;<span id="projectnumber">4.25A</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('umeg_8c-example.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">umeg.c</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"> <span class="comment">/*</span></div>
<div class="line"><span class="comment"> * umeg.c</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * Copyright (c) 1997-2021 ETEL SA. All Rights Reserved.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * This software is the confidential and proprietary information of ETEL SA </span></div>
<div class="line"><span class="comment"> * (&quot;Confidential Information&quot;). You shall not disclose such Confidential </span></div>
<div class="line"><span class="comment"> * Information and shall use it only in accordance with the terms of the </span></div>
<div class="line"><span class="comment"> * license agreement you entered into with ETEL.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * This software is provided &quot;AS IS&quot; without a warranty or representations of any kind. </span></div>
<div class="line"><span class="comment"> * ALL EXPRESS OR IMPLIED CONDITIONS, REPRESENTATIONS AND WARRANTIES, INCLUDING ANY IMPLIED WARRANTY </span></div>
<div class="line"><span class="comment"> * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE OR NON-INFRINGEMENT ARE HEREBY EXCLUDED. ETEL AND ITS </span></div>
<div class="line"><span class="comment"> * LICENSORS SHALL NOT BE LIABLE FOR ANY DAMAGES SUFFERED BY LICENSEE AS A RESULT OF USING, MODIFYING OR DISTRIBUTING </span></div>
<div class="line"><span class="comment"> * THE SOFTWARE OR ITS DERIVATIVES. IN NO EVENT WILL ETEL OR ITS LICENSORS BE LIABLE FOR ANY LOST REVENUE, PROFIT OR </span></div>
<div class="line"><span class="comment"> * DATA, OR FOR DIRECT, INDIRECT, SPECIAL, CONSEQUENTIAL, INCIDENTAL OR PUNITIVE DAMAGES, HOWEVER CAUSED AND REGARDLESS </span></div>
<div class="line"><span class="comment"> * OF THE THEORY OF LIABILITY, ARISING OUT OF THE USE OF OR INABILITY TO USE SOFTWARE, EVEN IF ETEL HAS BEEN ADVISED OF </span></div>
<div class="line"><span class="comment"> * THE POSSIBILITY OF SUCH DAMAGES. THE ENTIRE RISK ARISING OUT OF USE, PERFORMANCE OR NON-PERFORMANCE OF THE SOFTWARE </span></div>
<div class="line"><span class="comment"> * REMAINS WITH THE LICENSEE. IF ETEL SHOULD NEVERTHELESS BE FOUND LIABLE, WHETER DIRECTLY OR INDRECTLY, FOR ANY LOSS, </span></div>
<div class="line"><span class="comment"> * DAMAGE OR INJURY ARISING UNDER THIS AGREEMENT OR OTHERWISE, REGARDLESS OF CAUSE OR ORIGIN, ON ANY BASIS WHATSOEVER, </span></div>
<div class="line"><span class="comment"> * ITS TOTAL MAXIMUM LIABILITY IS LIMITED TO CHF 100.000 WHICH WILL BE THE COMPLETE AND EXCLUSIVE REMEDY AGAINST ETEL.</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment"> * This software is in particular not designed or intended .for use in on-line control of aircraft, air traffic, aircraft </span></div>
<div class="line"><span class="comment"> * navigation or aircraft communications; or in the design, construction, Operation or maintenance of any nuclear facility. </span></div>
<div class="line"><span class="comment"> * Licensee represents and warrants that it will not use or redistribute the Software for such purposes.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * This is the example that is referred to in the EDI package User&#39;s Manual.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * This example aims at using the library to control  two axes concurrently via an ULTIMET.</span></div>
<div class="line"><span class="comment"> * The ULTIMET is a ULTIMET light PCI and the controllers are one AccurET 400.</span></div>
<div class="line"><span class="comment"> * If an UltimET light TCP/IP or UltimET advanced is used, only the URL used when the communication</span></div>
<div class="line"><span class="comment"> * is opened must be changed. The remainder of the example will run.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * A first set of actions aims at getting the drives in an operational state which entails:</span></div>
<div class="line"><span class="comment"> * - establishing the communication with the ULTIMET and the drives connected to it</span></div>
<div class="line"><span class="comment"> * - powering up the drives</span></div>
<div class="line"><span class="comment"> * - performing the homing procedure on each drive.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * The next set deals with making movements on each axis by first describing how to set</span></div>
<div class="line"><span class="comment"> * the limits and precision windows , and then actually specifiying and starting the</span></div>
<div class="line"><span class="comment"> * movement. The movements will be controlled by the ULTIMET which will</span></div>
<div class="line"><span class="comment"> * execute them  in interpolated mode.</span></div>
<div class="line"><span class="comment"> * In a more elaborate step, one thread will be created to monitor the current position</span></div>
<div class="line"><span class="comment"> * of the motors. The monitoring thread will show the current position of each motor</span></div>
<div class="line"><span class="comment"> * every 100ms. Another will loop indefinitely waiting for a user input: the space bar</span></div>
<div class="line"><span class="comment"> * will immediately stop the movement and set one of the controller’s digital outputs.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * Finally, it will be shown how to power off the drives.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * The last portion of the program covers error handling.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * To run this example without modification, you must have:</span></div>
<div class="line"><span class="comment"> *  - two linear motors and two ETEL position loop controllers set and tuned accordingly.</span></div>
<div class="line"><span class="comment"> *  - a ULTIMET light PCI on a PCI slot of your PC</span></div>
<div class="line"><span class="comment"> *  - a TransnET connection between the ULTIMET and the drives.</span></div>
<div class="line"><span class="comment"> *  - the drives must have the axis numbers 0 and 1.</span></div>
<div class="line"><span class="comment"> *  - the software position limits (KL34 and KL35) must have been set when setting the controllers otherwise</span></div>
<div class="line"><span class="comment"> *    these will be defaulted to zero and nothing will move.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/*** Initialisation steps ***/</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/*** standard libraries ***/</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;Windows.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span>  <span class="comment">/* the standard I/O library              */</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdlib.h&gt;</span> <span class="comment">/* standard general purpose library      */</span></div>
<div class="line"><span class="preprocessor">#include &lt;ctype.h&gt;</span>  <span class="comment">/* standard character conversion library */</span></div>
<div class="line"><span class="preprocessor">#include &lt;process.h&gt;</span><span class="comment">/* standard multithreading library       */</span></div>
<div class="line"><span class="preprocessor">#include &lt;math.h&gt;</span>   <span class="comment">/* standard math interface; used for random numbers here*/</span></div>
<div class="line"><span class="preprocessor">#include &lt;conio.h&gt;</span>  <span class="comment">/* standard library for getch()*/</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/*** ETEL libraries ***/</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="dsa40_8h.html">dsa40.h</a>&gt;</span>  <span class="comment">/* EDI high level library version 3.0x.  */</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="dmd40_8h.html">dmd40.h</a>&gt;</span>  <span class="comment">/* EDI constants definitions             */</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/*** prototypes ***/</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * The following function define the threads which will run independently.</span></div>
<div class="line"><span class="comment"> * The exact parameter type of theses functions as well as the return value</span></div>
<div class="line"><span class="comment"> * are platform specific.</span></div>
<div class="line"><span class="comment"> * this will be the thread that displays the drive status and the current</span></div>
<div class="line"><span class="comment"> * position of the motor.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> display_thread(<span class="keywordtype">void</span> *param);</div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * Synchronisation between main thread and displaying thread:</span></div>
<div class="line"><span class="comment"> * To tell the displaying thread whether to fetch and display the data or not.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keywordtype">int</span> doDisplay = 1; <span class="comment">/* 0: don&#39;t; 1: do*/</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * The following function is the function which is called back when an</span></div>
<div class="line"><span class="comment"> * asynchronous function call terminates.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> callback(DSA_DEVICE_GROUP *grp, <span class="keywordtype">int</span> err, <span class="keywordtype">void</span> *param);</div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * Returned error by callback of asynchronous call. 0 if no error</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keywordtype">int</span> asyncFunctionError;</div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * Synchronisation between main thread ans asynchronous call function</span></div>
<div class="line"><span class="comment"> * True when callback has been called</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keywordtype">int</span> callbackCalled;</div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> *** Main entry point function.***</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[])</div>
<div class="line">{</div>
<div class="line"><span class="comment">  /*** Initialisation steps ***/</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">/*</span></div>
<div class="line"><span class="comment">     * We are going to be making some loops, so we need a variable to count them.</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <span class="keywordtype">int</span> loops=0;</div>
<div class="line">    <span class="comment">/*</span></div>
<div class="line"><span class="comment">     * Most functions of the library return an error code or 0 if no error</span></div>
<div class="line"><span class="comment">     * occured. We need a variable to store the last error.</span></div>
<div class="line"><span class="comment">     * The error codes are negative values, ranging from -399 to -300 for the</span></div>
<div class="line"><span class="comment">     * dsa40 library.</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <span class="keywordtype">int</span> err;                <span class="comment">/* initialised to a value that is NOT*/</span></div>
<div class="line">                            <span class="comment">/* returned by the libray functions */</span></div>
<div class="line">    <span class="comment">/*</span></div>
<div class="line"><span class="comment">     * We need two variables to hold the minimum and maximum position of the</span></div>
<div class="line"><span class="comment">     * motor. We are going to make movements within these bounds.</span></div>
<div class="line"><span class="comment">     * All parameters which represent physical dimensions are usually</span></div>
<div class="line"><span class="comment">     * defined in ISO units and use double precision floating point variables.</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <span class="keywordtype">double</span> pos_min[2], pos_max[2];</div>
<div class="line">    <span class="comment">/*</span></div>
<div class="line"><span class="comment">     * Moving distances will also be expressed in relation to the total ramge of</span></div>
<div class="line"><span class="comment">     * motion defined by the above limits.</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <span class="keywordtype">double</span> range_of_motion[2];</div>
<div class="line"> </div>
<div class="line"><span class="comment">  /*** Creating the objects ***/</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">/*</span></div>
<div class="line"><span class="comment">     * We must also define a pointer to a DSA_DRIVE object for each drive. This &quot;hidden&quot;</span></div>
<div class="line"><span class="comment">     * object is defined in the dsa40 library. The client does not need to access</span></div>
<div class="line"><span class="comment">     * the members of this object directly, but need to pass it to various dsa</span></div>
<div class="line"><span class="comment">     * library functions. It can be compared to the FILE structure defined in</span></div>
<div class="line"><span class="comment">     * the standard I/O library.</span></div>
<div class="line"><span class="comment">     * The pointers *must* be initialized to NULL before calling the created</span></div>
<div class="line"><span class="comment">     * drive function, otherwise this function will fail.</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    DSA_DRIVE *axisX = NULL;</div>
<div class="line">    DSA_DRIVE *axisY = NULL;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/*</span></div>
<div class="line"><span class="comment">     * For programming purposes we define here the constants for the axis numbers</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line"><span class="preprocessor">    #define AXIS_NB_X 0</span></div>
<div class="line"><span class="preprocessor">    #define AXIS_NB_Y 1</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">/*</span></div>
<div class="line"><span class="comment">     * The same goes for the object representing the ULTIMET</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    DSA_MASTER *ultimet = NULL;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* When the ULTIMET manages interpolated movements, the commands must be sent to what</span></div>
<div class="line"><span class="comment">     * is called an interpolation group. This interpolation group can be used like a</span></div>
<div class="line"><span class="comment">     * normal device or drive group. All drives within this group can also be interpolated.</span></div>
<div class="line"><span class="comment">     * So, we must also define a pointer to a DSA_IPOL_GROUP (like a DSA_DRIVE_GROUP)</span></div>
<div class="line"><span class="comment">     * object. This hidden object is also defined in the dsa40 library, and can be</span></div>
<div class="line"><span class="comment">     * considered as a sort of array containing other DSA_DRIVE objects. The client can</span></div>
<div class="line"><span class="comment">     * set, change and retrieve the different drives belonging to this object through</span></div>
<div class="line"><span class="comment">     * some accessor functions. But you might also simply want to create a group</span></div>
<div class="line"><span class="comment">     * (a DSA_DRIVE_GROUP) just to send one single same command to several drives or</span></div>
<div class="line"><span class="comment">     * ULTIMET. See § Groups ofthe User&#39;s Manual for more details on groups.</span></div>
<div class="line"><span class="comment">     * As with DSA_DRIVE, the grp pointer  must be initialized to NULL before calling</span></div>
<div class="line"><span class="comment">     * the created group function, otherwise this function will fail.</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    DSA_IPOL_GROUP *igrp = NULL;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Once the pointers have been created, the actual objects themselves have to be</span></div>
<div class="line"><span class="comment">     * created and initialised:</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (err = <a name="a0"></a><a class="code" href="group__DSAAll.html#gabb207b622ef11d41d9dfadf965e77200">dsa_create_drive</a>(&amp;axisX)) {</div>
<div class="line">        DSA_EXT_DIAG(err, axisX);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (err = <a class="code" href="group__DSAAll.html#gabb207b622ef11d41d9dfadf965e77200">dsa_create_drive</a>(&amp;axisY)) {</div>
<div class="line">        DSA_EXT_DIAG(err, axisY);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (err = <a name="a1"></a><a class="code" href="group__DSAAll.html#gad5ae47cdd1e4e82e9c33c778b597bcf6">dsa_create_master</a>(&amp;ultimet)) {</div>
<div class="line">        DSA_EXT_DIAG(err, ultimet);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Now, we also have to create the interpolation group object. The size for the</span></div>
<div class="line"><span class="comment">     * group must be given at the creation time. In our case, we want to put two</span></div>
<div class="line"><span class="comment">     * drives in this group.</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <span class="keywordflow">if</span> (err = <a name="a2"></a><a class="code" href="group__DSAAll.html#gae524a8f440e1d78dc2cdf4a75a0d5f83">dsa_create_ipol_group</a>(&amp;igrp, 2)) {</div>
<div class="line">        DSA_EXT_DIAG(err, igrp);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line">    <span class="comment">/* After creating the group, it has to be filled with the required drives.</span></div>
<div class="line"><span class="comment">       The interpolation group requests the respect of the position of the axis in the group.</span></div>
<div class="line"><span class="comment">       X axis must be at position 0, Y axis at position 1, Z axis at position 3, Theta axis at position 4</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <span class="keywordflow">if</span> (err = <a name="a3"></a><a class="code" href="group__DSAAll.html#ga33ee7bc94a04ba24add4dc9d89146fb3">dsa_set_group_item</a>(igrp, 0, axisX)) {</div>
<div class="line">        DSA_EXT_DIAG(err, axisX);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (err = <a class="code" href="group__DSAAll.html#ga33ee7bc94a04ba24add4dc9d89146fb3">dsa_set_group_item</a>(igrp, 2, axisY)) {</div>
<div class="line">        DSA_EXT_DIAG(err, axisY);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Now associate the ULTIMET to the interpolation group. When you ask for an</span></div>
<div class="line"><span class="comment">     * interpolated movement on a group of axes, the dsa40 library will use the ULTIMET</span></div>
<div class="line"><span class="comment">     * associated with the group.</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <span class="keywordflow">if</span> (err = <a name="a4"></a><a class="code" href="group__DSAAll.html#ga0e7df7489cd9a13b0a106c83a4b15c8e">dsa_set_master</a>(igrp, ultimet)) {</div>
<div class="line">        DSA_EXT_DIAG(err, igrp);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line"><span class="comment">  /*** Opening the communication ***/</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Now we are ready to open the communication channels.</span></div>
<div class="line"><span class="comment">     * In our exemple, we have to write the following lines to establish the</span></div>
<div class="line"><span class="comment">     * communication. See § on Establishing the communication in the Users&#39;s Manual for</span></div>
<div class="line"><span class="comment">     * more details on the syntax involved with opening the communication.</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (err = <a name="a5"></a><a class="code" href="group__DSAAll.html#gac4f6cffd7dd579bcb9a7f60af5f6bb29">dsa_open_u</a>(axisX, <span class="stringliteral">&quot;etb:ULTIMET:0&quot;</span>)) { <span class="comment">/* Motor axis X is on drive number 0   */</span></div>
<div class="line">        DSA_EXT_DIAG(err, axisX);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (err = <a class="code" href="group__DSAAll.html#gac4f6cffd7dd579bcb9a7f60af5f6bb29">dsa_open_u</a>(axisY, <span class="stringliteral">&quot;etb:ULTIMET:1&quot;</span>)) { <span class="comment">/* Motor axis Y is on drive number 1   */</span></div>
<div class="line">        DSA_EXT_DIAG(err, axisY);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (err = <a class="code" href="group__DSAAll.html#gac4f6cffd7dd579bcb9a7f60af5f6bb29">dsa_open_u</a>(ultimet, <span class="stringliteral">&quot;etb:ULTIMET:*&quot;</span>)) { <span class="comment">/* For a ULTIMET, the node number is &quot;*&quot; */</span></div>
<div class="line">        DSA_EXT_DIAG(err, ultimet);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment">  /*** Powering up the motors ***/</span></div>
<div class="line">    <span class="comment">/* Different devices take different times to completely startup which means that in</span></div>
<div class="line"><span class="comment">     * a system that includes different types of devices, such as some position</span></div>
<div class="line"><span class="comment">     * controllers and a position motion controller, some devices will be ready when</span></div>
<div class="line"><span class="comment">     * others are not. This can have the effect of putting in error a device that expects</span></div>
<div class="line"><span class="comment">     * another to be there but that hasn’t finished starting up. This is why, when all</span></div>
<div class="line"><span class="comment">     * devices have finished powering up, it is recommended to start the application by</span></div>
<div class="line"><span class="comment">     * a general «reset error» command</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <span class="keywordflow">if</span> (err = <a name="a6"></a><a class="code" href="group__DSAAll.html#ga8ecfd3470b57e52353829b6aa989343f">dsa_reset_error_ex_s</a>(igrp, 0, <a name="a7"></a><a class="code" href="dsa40_8h.html#afa8a5747e4999e6e003571e2d2d26f8c">DSA_DEF_TIMEOUT</a>)) {</div>
<div class="line">        DSA_EXT_DIAG(err, igrp);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (err = <a class="code" href="group__DSAAll.html#ga8ecfd3470b57e52353829b6aa989343f">dsa_reset_error_ex_s</a>(ultimet, 0, <a class="code" href="dsa40_8h.html#afa8a5747e4999e6e003571e2d2d26f8c">DSA_DEF_TIMEOUT</a>)) {</div>
<div class="line">        DSA_EXT_DIAG(err, ultimet);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Now we can send commands to the drive. The first thing to do is to put the drive</span></div>
<div class="line"><span class="comment">     * in power on state. This is done by the dsa_power_on_s command. The &quot;_s&quot; at the end</span></div>
<div class="line"><span class="comment">     * of the command indicates that this is a «synchronous» function. Synchronous function</span></div>
<div class="line"><span class="comment">     * wait until the end of the operation before returning. All synchronous functions have</span></div>
<div class="line"><span class="comment">     * a timeout parameter as the last parameter. This parameter orders the  function to</span></div>
<div class="line"><span class="comment">     * return with a timeout error (DSA_ETIMEOUT) if no response  comes from the drive</span></div>
<div class="line"><span class="comment">     * before the end of the specified timeout. This lack of response usually indicates an</span></div>
<div class="line"><span class="comment">     * error in the application, or could  result from bad drive parameters. An appropriate</span></div>
<div class="line"><span class="comment">     * timeout value heavily  depends on the application and the command issued. In the</span></div>
<div class="line"><span class="comment">     * «power on» case, less than 1 second  could be appropriate with pulse initialization,</span></div>
<div class="line"><span class="comment">     * but more than 5 seconds could be required with constant current initialization.</span></div>
<div class="line"><span class="comment">     * Here we can do this in two ways: either switch the power on in each motor</span></div>
<div class="line"><span class="comment">     * individually:</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <span class="keywordflow">if</span> (err = <a name="a8"></a><a class="code" href="group__DSAAll.html#gad4479a364dbab3a12369d9550c58a4ea">dsa_power_on_s</a>(axisX, 10000)) {</div>
<div class="line">        DSA_EXT_DIAG(err, axisX);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (err = <a class="code" href="group__DSAAll.html#gad4479a364dbab3a12369d9550c58a4ea">dsa_power_on_s</a>(axisY, 10000)) {</div>
<div class="line">        DSA_EXT_DIAG(err, axisY);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line">    <span class="comment">/* or, since we have created a group - primarily for interpolation purposes, but it</span></div>
<div class="line"><span class="comment">     * can also be used any where a group is expected - send the command to the group in</span></div>
<div class="line"><span class="comment">     * general, the DLL taking upon itself to dispatch it to all the members of the group:</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <span class="comment">/*</span></div>
<div class="line"><span class="comment">    if (err = dsa_power_on_s(igrp, 10000)) {</span></div>
<div class="line"><span class="comment">        DSA_EXT_DIAG(err, igrp);</span></div>
<div class="line"><span class="comment">        goto _error;</span></div>
<div class="line"><span class="comment">    }*/</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">  /*** Homing ***/</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Next step in readying the controllers and motors for operation is performing the</span></div>
<div class="line"><span class="comment">     * homing procedure in order to find the reference for the motor’s absolute position.</span></div>
<div class="line"><span class="comment">     * Once  again, this can be done on each axis individually:</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <span class="comment">/*</span></div>
<div class="line"><span class="comment">    if (err = dsa_homing_start_s(axisX, 10000)) {</span></div>
<div class="line"><span class="comment">        DSA_EXT_DIAG(err, axisX);</span></div>
<div class="line"><span class="comment">        goto _error;</span></div>
<div class="line"><span class="comment">    }</span></div>
<div class="line"><span class="comment">    if (err = dsa_homing_start_s(axisY, 10000)) {</span></div>
<div class="line"><span class="comment">        DSA_EXT_DIAG(err, axisY);</span></div>
<div class="line"><span class="comment">        goto _error;</span></div>
<div class="line"><span class="comment">    }</span></div>
<div class="line"><span class="comment">    */</span></div>
<div class="line">    <span class="comment">/* or on the group as a whole:</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <span class="keywordflow">if</span> (err = <a name="a9"></a><a class="code" href="group__DSAAll.html#gaf918456506e721ed90e7481b0d1861f2">dsa_homing_start_s</a>(igrp, 10000)) {</div>
<div class="line">        DSA_EXT_DIAG(err, axisY);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/*</span></div>
<div class="line"><span class="comment">     * During the indexation procedure, we can read the minimum and maximum</span></div>
<div class="line"><span class="comment">     * position allowed for the motor. This is done by calling the function</span></div>
<div class="line"><span class="comment">     * &quot;get min/max soft position limit&quot;. This function writes the data at the</span></div>
<div class="line"><span class="comment">     * address provided in the second argument. The third argument indicates</span></div>
<div class="line"><span class="comment">     * to the function what kind of value must be returned: the current value,</span></div>
<div class="line"><span class="comment">     * the default value, the maximum or minimum value,... Some of these</span></div>
<div class="line"><span class="comment">     * operations (getting min, max or default values) do not involve any</span></div>
<div class="line"><span class="comment">     * communication.</span></div>
<div class="line"><span class="comment">     * As usual, a timeout must be provided, but for request operation,</span></div>
<div class="line"><span class="comment">     * which are always executed in one cycle in the drive, it is recommended</span></div>
<div class="line"><span class="comment">     * to ask for the default timeout. This special timeout value is</span></div>
<div class="line"><span class="comment">     * automatically adjusted to the communication channel used.</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <span class="keywordflow">if</span> (err = <a name="a10"></a><a class="code" href="group__DSAAll.html#ga1bc87f5faf678bc0f168cce0f7e154fa">dsa_get_min_soft_position_limit_s</a>(axisX, &amp;pos_min[AXIS_NB_X], <a name="a11"></a><a class="code" href="dsa40_8h.html#acf39ecf276e6aa5989552647d989f9bd">DSA_GET_CURRENT</a>, <a class="code" href="dsa40_8h.html#afa8a5747e4999e6e003571e2d2d26f8c">DSA_DEF_TIMEOUT</a>)) {</div>
<div class="line">        DSA_EXT_DIAG(err, axisX);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (err = <a name="a12"></a><a class="code" href="group__DSAAll.html#ga6f73f038940c0bc739beb3372979a475">dsa_get_max_soft_position_limit_s</a>(axisX, &amp;pos_max[AXIS_NB_X], <a class="code" href="dsa40_8h.html#acf39ecf276e6aa5989552647d989f9bd">DSA_GET_CURRENT</a>, <a class="code" href="dsa40_8h.html#afa8a5747e4999e6e003571e2d2d26f8c">DSA_DEF_TIMEOUT</a>)) {</div>
<div class="line">        DSA_EXT_DIAG(err, axisX);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line">    range_of_motion[AXIS_NB_X] = pos_max[AXIS_NB_X] - pos_min[AXIS_NB_X];</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (err = <a class="code" href="group__DSAAll.html#ga1bc87f5faf678bc0f168cce0f7e154fa">dsa_get_min_soft_position_limit_s</a>(axisY, &amp;pos_min[AXIS_NB_Y], <a class="code" href="dsa40_8h.html#acf39ecf276e6aa5989552647d989f9bd">DSA_GET_CURRENT</a>, <a class="code" href="dsa40_8h.html#afa8a5747e4999e6e003571e2d2d26f8c">DSA_DEF_TIMEOUT</a>)) {</div>
<div class="line">        DSA_EXT_DIAG(err, axisY);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (err = <a class="code" href="group__DSAAll.html#ga6f73f038940c0bc739beb3372979a475">dsa_get_max_soft_position_limit_s</a>(axisY, &amp;pos_max[AXIS_NB_Y], <a class="code" href="dsa40_8h.html#acf39ecf276e6aa5989552647d989f9bd">DSA_GET_CURRENT</a>, <a class="code" href="dsa40_8h.html#afa8a5747e4999e6e003571e2d2d26f8c">DSA_DEF_TIMEOUT</a>)) {</div>
<div class="line">        DSA_EXT_DIAG(err, axisY);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line">    range_of_motion[AXIS_NB_Y] = pos_max[AXIS_NB_Y] - pos_min[AXIS_NB_Y];</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Now, before we can make other movements, we must wait until it is terminated. To this</span></div>
<div class="line"><span class="comment">     * end, we wait until the movement is finished, on both axis:</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <span class="keywordflow">if</span> (err = <a name="a13"></a><a class="code" href="group__DSAAll.html#ga7647e24f7415c0573351aca11fb63f59">dsa_wait_movement_s</a>(igrp, 60000)) {</div>
<div class="line">        DSA_EXT_DIAG(err, igrp);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line"><span class="comment">  /*** Monitoring data ***/</span></div>
<div class="line">    <span class="comment">/*</span></div>
<div class="line"><span class="comment">     * We will start the thread once the controllers are homed.</span></div>
<div class="line"><span class="comment">     * The mechanism for starting the threads is platform</span></div>
<div class="line"><span class="comment">     * dependant.</span></div>
<div class="line"><span class="comment">     * Notice here a slightly different way to handle the error code.</span></div>
<div class="line"><span class="comment">     * This is because _beginthread is a C library call that does not</span></div>
<div class="line"><span class="comment">     * return known EDI error codes, so if there is a system error creating</span></div>
<div class="line"><span class="comment">     * the thread, it is translated into an EDI system error and processed for display.</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <span class="keywordflow">if</span>(_beginthread(display_thread, 0, igrp) &lt;= 0) {</div>
<div class="line">        err = <a name="a14"></a><a class="code" href="dsa40_8h.html#ad3897184cf41bd80b0fdcdd019b9579d">DSA_ESYSTEM</a>;</div>
<div class="line">        printf(<span class="stringliteral">&quot;ERROR at file %s, line %d %s\n&quot;</span>, __FILE__, __LINE__, <a name="a15"></a><a class="code" href="group__DSAAll.html#ga0b777bbfa92488269624a52d7ff4d654">dsa_translate_edi_error</a>(err));</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line"><span class="comment"> /*** Movements ***/</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">  /*** -- Defining and making simple movements ***/</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* A position controlled movement can be defined by up to four parameters. The speed,</span></div>
<div class="line"><span class="comment">     * acceleration and jerk time describing the movement profile can be specified.</span></div>
<div class="line"><span class="comment">     * The movement is started when setting the target position</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    {</div>
<div class="line">        <span class="keywordtype">double</span> profileSpeed = 0.5;  <span class="comment">/* m/s (or turns/secs) for rotary motors */</span></div>
<div class="line">        <span class="keywordtype">double</span> profileAcc   = 10.; <span class="comment">/* m/s^2 or rad/s^2 */</span></div>
<div class="line">        <span class="keywordtype">double</span> jerkTime     = 0.01; <span class="comment">/* seconds */</span></div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (err = <a name="a16"></a><a class="code" href="group__DSAAll.html#ga9a0da989df97f28daf6cc2719634d40b">dsa_set_profile_velocity_s</a>(axisX, 0, profileSpeed, <a class="code" href="dsa40_8h.html#afa8a5747e4999e6e003571e2d2d26f8c">DSA_DEF_TIMEOUT</a>)) {</div>
<div class="line">            DSA_EXT_DIAG(err, axisX);</div>
<div class="line">            <span class="keywordflow">goto</span> _error;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (err = <a name="a17"></a><a class="code" href="group__DSAAll.html#ga2641a0388c420422789e73d6b86ba90b">dsa_set_profile_acceleration_s</a>(axisX, 0, profileAcc, <a class="code" href="dsa40_8h.html#afa8a5747e4999e6e003571e2d2d26f8c">DSA_DEF_TIMEOUT</a>)) {</div>
<div class="line">            DSA_EXT_DIAG(err, axisX);</div>
<div class="line">            <span class="keywordflow">goto</span> _error;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (err = <a name="a18"></a><a class="code" href="group__DSAAll.html#gab48f7ed48e5c47aeb082f4d7b127d52b">dsa_set_jerk_time_s</a>(axisX, 0, jerkTime, <a class="code" href="dsa40_8h.html#afa8a5747e4999e6e003571e2d2d26f8c">DSA_DEF_TIMEOUT</a>)) {</div>
<div class="line">            DSA_EXT_DIAG(err, axisX);</div>
<div class="line">            <span class="keywordflow">goto</span> _error;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* If the values aren&#39;t specified, the values set when tuning the controller are used,</span></div>
<div class="line"><span class="comment">         * (or the default ones if they were not changed at that time).</span></div>
<div class="line"><span class="comment">         */</span></div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Making motors simply go to a given position can be as straight forward as calling</span></div>
<div class="line"><span class="comment">     * dsa_set_target_position_s() which is the equivalent of the controller’s POS</span></div>
<div class="line"><span class="comment">     * command : it sets the value of the target position and starts the movement.</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line"> </div>
<div class="line">    {</div>
<div class="line">        <span class="keywordtype">double</span> targetPositionX = pos_min[AXIS_NB_X] + (rand() * (range_of_motion[AXIS_NB_X])) / RAND_MAX; <span class="comment">/* meters */</span></div>
<div class="line">        <span class="keywordtype">double</span> targetPositionY = pos_min[AXIS_NB_Y] + (rand() * (range_of_motion[AXIS_NB_Y])) / RAND_MAX; <span class="comment">/* meters */</span></div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (err = <a name="a19"></a><a class="code" href="group__DSAAll.html#ga1d2196bf2ca4d0f6105764fb1749c6c1">dsa_set_target_position_s</a>(axisX, 0, targetPositionX, <a class="code" href="dsa40_8h.html#afa8a5747e4999e6e003571e2d2d26f8c">DSA_DEF_TIMEOUT</a>)) {</div>
<div class="line">            DSA_EXT_DIAG(err, axisX);</div>
<div class="line">            <span class="keywordflow">goto</span> _error;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">if</span> (err = <a class="code" href="group__DSAAll.html#ga1d2196bf2ca4d0f6105764fb1749c6c1">dsa_set_target_position_s</a>(axisY, 0, targetPositionY, <a class="code" href="dsa40_8h.html#afa8a5747e4999e6e003571e2d2d26f8c">DSA_DEF_TIMEOUT</a>)) {</div>
<div class="line">            DSA_EXT_DIAG(err, axisY);</div>
<div class="line">            <span class="keywordflow">goto</span> _error;</div>
<div class="line">        }</div>
<div class="line">        <span class="comment">/*</span></div>
<div class="line"><span class="comment">         * The above calls will just *start* the movement, which</span></div>
<div class="line"><span class="comment">         * means that the operation will just need one or two milliseconds (on the</span></div>
<div class="line"><span class="comment">         * ETEL-Bus-Lite, much less on the TEB) to be executed by the drive, and then control will be</span></div>
<div class="line"><span class="comment">         * handed back immediately to the application. In that case, the timeout value that</span></div>
<div class="line"><span class="comment">         * need to be supplied must only take the communication time from the pc</span></div>
<div class="line"><span class="comment">         * to the drive into account. In this situation, a special value can be</span></div>
<div class="line"><span class="comment">         * used, DSA_DEF_TIMEOUT, which ask the function to use a default timeout</span></div>
<div class="line"><span class="comment">         * value adjusted to the communication channel used.</span></div>
<div class="line"><span class="comment">         * After the command however, we will again wait for the end of the motion. The</span></div>
<div class="line"><span class="comment">         * timeout value has been fixed to 1 minute for each of the following</span></div>
<div class="line"><span class="comment">         * movement waiting functions; this obviously depends on the requested move.</span></div>
<div class="line"><span class="comment">         */</span></div>
<div class="line">        <span class="keywordflow">if</span> (err = <a class="code" href="group__DSAAll.html#ga7647e24f7415c0573351aca11fb63f59">dsa_wait_movement_s</a>(igrp, 60000)) {</div>
<div class="line">            DSA_EXT_DIAG(err, igrp);</div>
<div class="line">            <span class="keywordflow">goto</span> _error;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    <span class="comment">/* In the above example, the two motors start as soon as they receive the command</span></div>
<div class="line"><span class="comment">     * (index «0» indicated by the second parameter) and not synchronously.</span></div>
<div class="line"><span class="comment">     * If we wanted to make the drive start simultaneously, we would send the target position</span></div>
<div class="line"><span class="comment">     * at index 1 in the controllers, for instance , and then indicated for the whole group</span></div>
<div class="line"><span class="comment">     * we have a new setpoint to be executed with dsa_new_setpoint_s():</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    {</div>
<div class="line">        <span class="keywordtype">double</span> targetPositionX = pos_min[AXIS_NB_X] + (rand() * (range_of_motion[AXIS_NB_X])) / RAND_MAX; <span class="comment">/* meters */</span></div>
<div class="line">        <span class="keywordtype">double</span> targetPositionY = pos_min[AXIS_NB_Y] + (rand() * (range_of_motion[AXIS_NB_Y])) / RAND_MAX; <span class="comment">/* meters */</span></div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (err = <a class="code" href="group__DSAAll.html#ga1d2196bf2ca4d0f6105764fb1749c6c1">dsa_set_target_position_s</a>(axisX, 1, targetPositionX, <a class="code" href="dsa40_8h.html#afa8a5747e4999e6e003571e2d2d26f8c">DSA_DEF_TIMEOUT</a>)) {</div>
<div class="line">            DSA_EXT_DIAG(err, axisX);</div>
<div class="line">            <span class="keywordflow">goto</span> _error;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">if</span> (err = <a class="code" href="group__DSAAll.html#ga1d2196bf2ca4d0f6105764fb1749c6c1">dsa_set_target_position_s</a>(axisY, 1, targetPositionY, <a class="code" href="dsa40_8h.html#afa8a5747e4999e6e003571e2d2d26f8c">DSA_DEF_TIMEOUT</a>)) {</div>
<div class="line">            DSA_EXT_DIAG(err, axisY);</div>
<div class="line">            <span class="keywordflow">goto</span> _error;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">if</span> (err = <a name="a20"></a><a class="code" href="group__DSAAll.html#ga9aa135bc2e94b71315b5a3b7628bcff0">dsa_new_setpoint_s</a>(igrp, 1, <a name="a21"></a><a class="code" href="dsa40_8h.html#ad28cf92dc259afdda4cb0627ba0b8141">DSA_STA_POS</a> ,<a class="code" href="dsa40_8h.html#afa8a5747e4999e6e003571e2d2d26f8c">DSA_DEF_TIMEOUT</a>)) {</div>
<div class="line">            DSA_EXT_DIAG(err, axisX);</div>
<div class="line">            <span class="keywordflow">goto</span> _error;</div>
<div class="line">        }</div>
<div class="line">        <span class="comment">/* The third parameter tells the controller that it is the position that has changed.</span></div>
<div class="line"><span class="comment">         * One can also changed the speed and accelerations and jerk time  and then ask the</span></div>
<div class="line"><span class="comment">         * controller to take them into account with the dsa_new_setpoint_s() by using the</span></div>
<div class="line"><span class="comment">         * constants DSA_STA_SPD, DSA_STA_ACC, DSA_STA_JRK combined in an OR expression.</span></div>
<div class="line"><span class="comment">         */</span></div>
<div class="line">        <span class="keywordflow">if</span> (err = <a class="code" href="group__DSAAll.html#ga7647e24f7415c0573351aca11fb63f59">dsa_wait_movement_s</a>(igrp, 60000)) {</div>
<div class="line">            DSA_EXT_DIAG(err, igrp);</div>
<div class="line">            <span class="keywordflow">goto</span> _error;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line"><span class="comment">  /*** Making interpolated movements ***/</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">  /*** -- Defining the movements ***/</span></div>
<div class="line">    <span class="comment">/*</span></div>
<div class="line"><span class="comment">     * Now we enter in interpolated mode. In this mode the position of the</span></div>
<div class="line"><span class="comment">     * motors is controlled by the multi-axis board. This applies only for</span></div>
<div class="line"><span class="comment">     * drives that are specified in the interpolation group (igrp). When you</span></div>
<div class="line"><span class="comment">     * are in this mode, you cannot use the dsa_set_target_position_x()</span></div>
<div class="line"><span class="comment">     * functions on the drives specified in the igrp. You must use the</span></div>
<div class="line"><span class="comment">     * dsa_ipol_xxx() functions instead to define the interpolated path. The</span></div>
<div class="line"><span class="comment">     * interpolator (the ULTIMET) will drive the motors along this path.</span></div>
<div class="line"><span class="comment">     * When you enter into interpolated mode, the actual position becomes the</span></div>
<div class="line"><span class="comment">     * reference postition for the interpolation. For the interpolation</span></div>
<div class="line"><span class="comment">     * functions (dsa_ipol_xxx()), all coordinates are given in absolute from</span></div>
<div class="line"><span class="comment">     * this reference point. Practically, after the call to dsa_ipol_begin_s()</span></div>
<div class="line"><span class="comment">     * you are at the point with coordinates:</span></div>
<div class="line"><span class="comment">     *     x = 0.0, y = 0.0</span></div>
<div class="line"><span class="comment">     * When you leave the interpolated mode, you come back to the previous</span></div>
<div class="line"><span class="comment">     * reference system.</span></div>
<div class="line"><span class="comment">     *</span></div>
<div class="line"><span class="comment">     * At present, the X-Y system is in a random absolute (encoder related)</span></div>
<div class="line"><span class="comment">     * position (in meters). For the sake of simplicity, we will first move to the center</span></div>
<div class="line"><span class="comment">     * of the motion ranges of both motors, and start interpolation mode from</span></div>
<div class="line"><span class="comment">     * there: it will be our (0,0) reference for interpolated movements.</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">/*</span></div>
<div class="line"><span class="comment">     * Move to center of both motor motion ranges</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <span class="keywordflow">if</span> (err = <a class="code" href="group__DSAAll.html#ga1d2196bf2ca4d0f6105764fb1749c6c1">dsa_set_target_position_s</a>(axisX, 1, (pos_min[AXIS_NB_X]+pos_max[AXIS_NB_X])/2.0, <a class="code" href="dsa40_8h.html#afa8a5747e4999e6e003571e2d2d26f8c">DSA_DEF_TIMEOUT</a>)) {</div>
<div class="line">        DSA_EXT_DIAG(err, axisX);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (err = <a class="code" href="group__DSAAll.html#ga1d2196bf2ca4d0f6105764fb1749c6c1">dsa_set_target_position_s</a>(axisY, 1, (pos_min[AXIS_NB_Y]+pos_max[AXIS_NB_Y])/2.0, <a class="code" href="dsa40_8h.html#afa8a5747e4999e6e003571e2d2d26f8c">DSA_DEF_TIMEOUT</a>)) {</div>
<div class="line">        DSA_EXT_DIAG(err, axisY);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (err = <a class="code" href="group__DSAAll.html#ga9aa135bc2e94b71315b5a3b7628bcff0">dsa_new_setpoint_s</a>(igrp, 1, <a class="code" href="dsa40_8h.html#ad28cf92dc259afdda4cb0627ba0b8141">DSA_STA_POS</a> ,<a class="code" href="dsa40_8h.html#afa8a5747e4999e6e003571e2d2d26f8c">DSA_DEF_TIMEOUT</a>)) {</div>
<div class="line">        DSA_EXT_DIAG(err, axisX);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (err = <a class="code" href="group__DSAAll.html#ga7647e24f7415c0573351aca11fb63f59">dsa_wait_movement_s</a>(igrp, 60000)) {</div>
<div class="line">        DSA_EXT_DIAG(err, igrp);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line">    <span class="comment">/*</span></div>
<div class="line"><span class="comment">     * Now start interpolation mode</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <span class="keywordflow">if</span> (err = <a name="a22"></a><a class="code" href="group__DSAAll.html#gac9b91de55e4cec46b88c9dbd1f97f8f2">dsa_ipol_begin_s</a>(igrp, <a class="code" href="dsa40_8h.html#afa8a5747e4999e6e003571e2d2d26f8c">DSA_DEF_TIMEOUT</a>)) {</div>
<div class="line">        DSA_EXT_DIAG(err, igrp);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* In this mode, it is the maximum tangential speed (in m/s) and accelerations</span></div>
<div class="line"><span class="comment">     *(in m/s^2) that must be defined:</span></div>
<div class="line"><span class="comment">     * Here, the tangential speed is set to 0.05 m/s;</span></div>
<div class="line"><span class="comment">     * and the tangential acceleration and deceleration are set to 0.1 m/(s*s).</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <span class="keywordflow">if</span> (err = <a name="a23"></a><a class="code" href="group__DSAAll.html#ga0c8f4345366a42e560f8721822aa2dbb">dsa_ipol_tan_velocity_s</a>(igrp, 0.5, <a class="code" href="dsa40_8h.html#afa8a5747e4999e6e003571e2d2d26f8c">DSA_DEF_TIMEOUT</a>)) {</div>
<div class="line">        DSA_EXT_DIAG(err, igrp);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (err = <a name="a24"></a><a class="code" href="group__DSAAll.html#gadea32516f752ffe87ad0e5ac6514bcaa">dsa_ipol_tan_acceleration_s</a>(igrp, 1.0, <a class="code" href="dsa40_8h.html#afa8a5747e4999e6e003571e2d2d26f8c">DSA_DEF_TIMEOUT</a>)) {</div>
<div class="line">        DSA_EXT_DIAG(err, igrp);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (err = <a name="a25"></a><a class="code" href="group__DSAAll.html#ga5c12cb774837cc20c007f5b4231aa5bc">dsa_ipol_tan_deceleration_s</a>(igrp, 1.0, <a class="code" href="dsa40_8h.html#afa8a5747e4999e6e003571e2d2d26f8c">DSA_DEF_TIMEOUT</a>)) {</div>
<div class="line">        DSA_EXT_DIAG(err, igrp);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line"><span class="comment">  /*** Making interpolated movements ***/</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* At this point we can, for example, start the trajectory with a linear segment.</span></div>
<div class="line"><span class="comment">     * The following function defines and starts the movement from the previous end of</span></div>
<div class="line"><span class="comment">     * segment and stops the system at the end of the specified segment.</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    {</div>
<div class="line">        <span class="keywordtype">double</span> endPointX = range_of_motion[AXIS_NB_X]/4.0;</div>
<div class="line">        <span class="keywordtype">double</span> endPointY = range_of_motion[AXIS_NB_Y]/4.0;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (err=<a name="a26"></a><a class="code" href="group__DSAAll.html#ga98dc88f92a6a1a061380968316fca8ae">dsa_ipol_line_2d_s</a>(igrp,endPointX, endPointY, <a class="code" href="dsa40_8h.html#afa8a5747e4999e6e003571e2d2d26f8c">DSA_DEF_TIMEOUT</a>)) {</div>
<div class="line">            DSA_EXT_DIAG(err, igrp);</div>
<div class="line">            <span class="keywordflow">goto</span> _error;</div>
<div class="line">        }</div>
<div class="line">        <span class="comment">/* After this we can keep on specifying other lines by another call to the same</span></div>
<div class="line"><span class="comment">         * function:</span></div>
<div class="line"><span class="comment">         */</span></div>
<div class="line">        endPointX = range_of_motion[AXIS_NB_X]/4.0;</div>
<div class="line">        endPointY = -range_of_motion[AXIS_NB_Y]/4.0;</div>
<div class="line">        <span class="keywordflow">if</span> (err=<a class="code" href="group__DSAAll.html#ga98dc88f92a6a1a061380968316fca8ae">dsa_ipol_line_2d_s</a>(igrp,endPointX, endPointY, <a class="code" href="dsa40_8h.html#afa8a5747e4999e6e003571e2d2d26f8c">DSA_DEF_TIMEOUT</a>)) {</div>
<div class="line">            DSA_EXT_DIAG(err, igrp);</div>
<div class="line">            <span class="keywordflow">goto</span> _error;</div>
<div class="line">        }</div>
<div class="line">        <span class="comment">/* or draw a portion of a circle with a call like:*/</span></div>
<div class="line">        <span class="keywordflow">if</span> (err = <a name="a27"></a><a class="code" href="group__DSAAll.html#ga4fb90f2d40b8a951e6d50afe3595e0d6">dsa_ipol_circle_cw_c2d_s</a>( igrp,</div>
<div class="line">                                            0.0,                            <span class="comment">/* arc end X corrdinate    */</span></div>
<div class="line">                                            0.0,                            <span class="comment">/* arc end Y corrdinate    */</span></div>
<div class="line">                                            range_of_motion[AXIS_NB_X]/8.0, <span class="comment">/* arc center X coordinate */</span></div>
<div class="line">                                            -range_of_motion[AXIS_NB_Y]/8.0,<span class="comment">/* arc center Y coordinate */</span></div>
<div class="line">                                            <a class="code" href="dsa40_8h.html#afa8a5747e4999e6e003571e2d2d26f8c">DSA_DEF_TIMEOUT</a>)) {</div>
<div class="line">            DSA_EXT_DIAG(err, igrp);</div>
<div class="line">            <span class="keywordflow">goto</span> _error;</div>
<div class="line">        }</div>
<div class="line">        <span class="comment">/* which will draw an arc ending at the position given by the 2nd and 3rd parameters,</span></div>
<div class="line"><span class="comment">         * (back to center of reference frame, in our case)</span></div>
<div class="line"><span class="comment">         * centered on the point with the coordinates given by the 4th and 5th parameters</span></div>
<div class="line"><span class="comment">         * (centerX=range_of_motion[AXIS_NB_X]/8.0; centerY=range_of_motion[AXIS_NB_Y]/8.0)</span></div>
<div class="line"><span class="comment">         *(with respect to the point at which the system was when entering the interpolation</span></div>
<div class="line"><span class="comment">         * mode, remember).</span></div>
<div class="line"><span class="comment">         */</span></div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Up until now the system will have stopped at the end of each segment. To make a</span></div>
<div class="line"><span class="comment">     * continuous movement, we have to indicate that we want to start concatenation of</span></div>
<div class="line"><span class="comment">     * the segments: BUT YOU ONLY SPECIFY THIS AFTER THE FIRST SEGMENT HAS BEEN STARTED</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Now, in this mode all segments are processed at constant speed, without stopping</span></div>
<div class="line"><span class="comment">     * between segments. This means that when the interpolator processes the one segment,</span></div>
<div class="line"><span class="comment">     * it does not decrease the speed at the end of the segment. It jumps to the next</span></div>
<div class="line"><span class="comment">     * segment without speed change. Now, the following calls will generate a movement along</span></div>
<div class="line"><span class="comment">     * a trajectory at a constant speed:</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    {</div>
<div class="line">        <span class="keywordtype">double</span> endPointX = -range_of_motion[AXIS_NB_X]/8.0;</div>
<div class="line">        <span class="keywordtype">double</span> endPointY = range_of_motion[AXIS_NB_Y]/8.0;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (err = <a class="code" href="group__DSAAll.html#ga98dc88f92a6a1a061380968316fca8ae">dsa_ipol_line_2d_s</a>(igrp, endPointX, endPointY, <a class="code" href="dsa40_8h.html#afa8a5747e4999e6e003571e2d2d26f8c">DSA_DEF_TIMEOUT</a>)) {</div>
<div class="line">            DSA_EXT_DIAG(err, igrp);</div>
<div class="line">            <span class="keywordflow">goto</span> _error;</div>
<div class="line">        }</div>
<div class="line">        <span class="comment">/*</span></div>
<div class="line"><span class="comment">         * Now specifiy that next segment has to be concatenated.</span></div>
<div class="line"><span class="comment">         */</span></div>
<div class="line">        <span class="keywordflow">if</span> (err = <a name="a28"></a><a class="code" href="group__DSAAll.html#ga167ed2c50384be05832ab492691d0b65">dsa_ipol_begin_concatenation_s</a>(igrp, <a class="code" href="dsa40_8h.html#afa8a5747e4999e6e003571e2d2d26f8c">DSA_DEF_TIMEOUT</a>)) {</div>
<div class="line">            DSA_EXT_DIAG(err, igrp);</div>
<div class="line">            <span class="keywordflow">goto</span> _error;</div>
<div class="line">        }</div>
<div class="line">        <span class="comment">/*</span></div>
<div class="line"><span class="comment">         * A now the circle and last segment back to the center:</span></div>
<div class="line"><span class="comment">         */</span></div>
<div class="line">        <span class="keywordflow">if</span> (err = <a name="a29"></a><a class="code" href="group__DSAAll.html#ga698149d8ff4286a5b880e5d4fccd9e13">dsa_ipol_circle_ccw_c2d_s</a>(igrp,</div>
<div class="line">                                            endPointX,                      <span class="comment">/* arc end X corrdinate    */</span></div>
<div class="line">                                            -endPointY,                     <span class="comment">/* arc end Y corrdinate    */</span></div>
<div class="line">                                            -range_of_motion[AXIS_NB_X]/4.0,<span class="comment">/* arc center X coordinate */</span></div>
<div class="line">                                            0.0,                            <span class="comment">/* arc center Y coordinate */</span></div>
<div class="line">                                            <a class="code" href="dsa40_8h.html#afa8a5747e4999e6e003571e2d2d26f8c">DSA_DEF_TIMEOUT</a>)) {</div>
<div class="line">            DSA_EXT_DIAG(err, igrp);</div>
<div class="line">            <span class="keywordflow">goto</span> _error;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">if</span> (err = <a class="code" href="group__DSAAll.html#ga98dc88f92a6a1a061380968316fca8ae">dsa_ipol_line_2d_s</a>(igrp, 0.0, 0.0, <a class="code" href="dsa40_8h.html#afa8a5747e4999e6e003571e2d2d26f8c">DSA_DEF_TIMEOUT</a>)) {</div>
<div class="line">            DSA_EXT_DIAG(err, igrp);</div>
<div class="line">            <span class="keywordflow">goto</span> _error;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Once the concatenated segments section is terminated, you can revert to giving</span></div>
<div class="line"><span class="comment">     * individual segments again, in between which the ULTIMET will drive the system to</span></div>
<div class="line"><span class="comment">     * a stop, and a restart:</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <span class="keywordflow">if</span> (err = <a name="a30"></a><a class="code" href="group__DSAAll.html#gac3081206d0394e35d5162238e73e9637">dsa_ipol_end_concatenation_s</a>(igrp, <a class="code" href="dsa40_8h.html#afa8a5747e4999e6e003571e2d2d26f8c">DSA_DEF_TIMEOUT</a>)) {</div>
<div class="line">        DSA_EXT_DIAG(err, igrp);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* When  the system no longer needs to perform interpolated movements, the</span></div>
<div class="line"><span class="comment">     * interpolation mode is exited by calling first :</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <span class="keywordflow">if</span> (err = <a name="a31"></a><a class="code" href="group__DSAAll.html#ga1efbddf4eff0336e151f348eb6bdfb56">dsa_ipol_wait_movement_s</a>(igrp, 60000)) {</div>
<div class="line">        DSA_EXT_DIAG(err, igrp);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line">    <span class="comment">/* to wait for all segments to be finished, and then:*/</span></div>
<div class="line">    <span class="keywordflow">if</span> (err = <a name="a32"></a><a class="code" href="group__DSAAll.html#ga585ca40ec17ac8c993457dda09cfb167">dsa_ipol_end_s</a>(igrp, <a class="code" href="dsa40_8h.html#afa8a5747e4999e6e003571e2d2d26f8c">DSA_DEF_TIMEOUT</a>)) {</div>
<div class="line">        DSA_EXT_DIAG(err, igrp);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line">    <span class="comment">/*to leave the interpolation mode and come back to the previous reference system.*/</span></div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">    <span class="comment">/*</span></div>
<div class="line"><span class="comment">     * End of movements: power motors off:</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <span class="keywordflow">if</span> (err = <a name="a33"></a><a class="code" href="group__DSAAll.html#ga710488b5bce619a8a58c0442dd1f7ba8">dsa_power_off_s</a>(igrp, 10000)) {</div>
<div class="line">        DSA_EXT_DIAG(err, igrp);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line"><span class="comment">  /*** Reading and writing of registers (generic functions) ***/</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">/*</span></div>
<div class="line"><span class="comment">     * Stop display thread while we are going to save and reset, otherwise we will</span></div>
<div class="line"><span class="comment">     * get errors.</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    doDisplay = 0;</div>
<div class="line">    <span class="comment">/*</span></div>
<div class="line"><span class="comment">     * Here we read a user register (type X) and increment its value, to be saved</span></div>
<div class="line"><span class="comment">     * and read again for the examples purpose in the next two portions of code.</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    {</div>
<div class="line">        <span class="keywordtype">long</span> val = 0;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (err = <a name="a34"></a><a class="code" href="group__DSAAll.html#ga1ac49aec3eec6ec43ab45e2e9ce06469">dsa_get_register_int32_s</a>(axisX,               <span class="comment">/* grp: destination device */</span></div>
<div class="line">                                           <a name="a35"></a><a class="code" href="dmd40_8h.html#a0400c0e1e903e77f0b131cd18f26fe98">DMD_TYP_USER</a>,        <span class="comment">/* typ: DMD constant 1:X user register */</span></div>
<div class="line">                                           2,                   <span class="comment">/* idx: register index */</span></div>
<div class="line">                                           0,                   <span class="comment">/* sidx: register subindex */</span></div>
<div class="line">                                           &amp;val,                <span class="comment">/* value: register value */</span></div>
<div class="line">                                           <a class="code" href="dsa40_8h.html#acf39ecf276e6aa5989552647d989f9bd">DSA_GET_CURRENT</a>, <span class="comment">/* kind: actual device value */</span></div>
<div class="line">                                           <a class="code" href="dsa40_8h.html#afa8a5747e4999e6e003571e2d2d26f8c">DSA_DEF_TIMEOUT</a>  <span class="comment">/* timeout: default timeout */</span></div>
<div class="line">                                           )) {</div>
<div class="line">            DSA_EXT_DIAG(err, axisX);</div>
<div class="line">            <span class="keywordflow">goto</span> _error;</div>
<div class="line">        }</div>
<div class="line">        printf(<span class="stringliteral">&quot;\nUser register read from controller X2 = %d\n&quot;</span>,val);</div>
<div class="line">        val++;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (err = <a name="a36"></a><a class="code" href="group__DSAAll.html#gacc8610925b89d191e505042b84900f9f">dsa_set_register_int32_s</a>(axisX,               <span class="comment">/* grp: destination device */</span></div>
<div class="line">                                           <a class="code" href="dmd40_8h.html#a0400c0e1e903e77f0b131cd18f26fe98">DMD_TYP_USER</a>,        <span class="comment">/* typ: DMD constant 1:X user register */</span></div>
<div class="line">                                           2,                   <span class="comment">/* idx: register index */</span></div>
<div class="line">                                           0,                   <span class="comment">/* sidx: register subindex */</span></div>
<div class="line">                                           val,             <span class="comment">/* value: register value */</span></div>
<div class="line">                                           <a class="code" href="dsa40_8h.html#afa8a5747e4999e6e003571e2d2d26f8c">DSA_DEF_TIMEOUT</a>  <span class="comment">/* timeout: default timeout */</span></div>
<div class="line">                                           )) {</div>
<div class="line">            DSA_EXT_DIAG(err, axisX);</div>
<div class="line">            <span class="keywordflow">goto</span> _error;</div>
<div class="line">        }</div>
<div class="line">        printf(<span class="stringliteral">&quot;\nUser register before sav/reset X2 = %d\n&quot;</span>,val);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line"><span class="comment">  /*** Sending commands : Saving and resetting ***/</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* The values of parameters that have been only modified are not stored in permanent</span></div>
<div class="line"><span class="comment">     * storage on the devices which means that when they are reset the parameters revert</span></div>
<div class="line"><span class="comment">     * back to the stored values. To effectively store modified values, you have to</span></div>
<div class="line"><span class="comment">     * explicitely save them by calling  dsa_save_parameters_s() which is the equivalent</span></div>
<div class="line"><span class="comment">     * of the SAV command a the controller.</span></div>
<div class="line"><span class="comment">     * Sending a SAV  command to a device will cause it to «disappear» on the ETEL device</span></div>
<div class="line"><span class="comment">     * network and to re-appear in error. So it is possible that the device itself does not</span></div>
<div class="line"><span class="comment">     * have time to acknowledge the SAV command. So it is advised to not check the error</span></div>
<div class="line"><span class="comment">     * code returned by this function...</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">     <a name="a37"></a><a class="code" href="group__DSAAll.html#gaa4088cf13511aae9604a5bb73f541f4d">dsa_save_parameters_s</a>(axisX,<a name="a38"></a><a class="code" href="dsa40_8h.html#abde9dba4c1b4ba165bbcc1bfc3cc3282">DSA_PARAM_SAVE_X_PARAMS</a>,10000);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* The SAV command takes quite a while to execute hence the large timeout value for the</span></div>
<div class="line"><span class="comment">     * last parameter.</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Sending a SAV  command to a device will cause it to «disappear» on the ETEL device</span></div>
<div class="line"><span class="comment">     * network and to re-appear in error. So before you can issue any other commands, you</span></div>
<div class="line"><span class="comment">     * must wait (quite some time, as the last parameter of dsa_wait_status_equal_s()</span></div>
<div class="line"><span class="comment">     * shows) until the drives are present again:</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    {</div>
<div class="line">        <span class="comment">/* setup status masks */</span></div>
<div class="line">        <a name="_a39"></a><a class="code" href="unionDSA__STATUS.html">DSA_STATUS</a> status_checkbits      = {<span class="keyword">sizeof</span>(<a class="code" href="unionDSA__STATUS.html">DSA_STATUS</a>)};</div>
<div class="line">        <a class="code" href="unionDSA__STATUS.html">DSA_STATUS</a> status_checkstates    = {<span class="keyword">sizeof</span>(<a class="code" href="unionDSA__STATUS.html">DSA_STATUS</a>)};</div>
<div class="line">        status_checkbits.<a name="a40"></a><a class="code" href="unionDSA__STATUS.html#a428dc21c7bcab09499503f1ea5b0e049">drive</a>.<a name="a41"></a><a class="code" href="structDsaStatusDriveBitMode.html#ab69186c7fcaf6006da92be4381aa460c">present</a>   = 1;</div>
<div class="line">        status_checkstates.<a class="code" href="unionDSA__STATUS.html#a428dc21c7bcab09499503f1ea5b0e049">drive</a>.<a class="code" href="structDsaStatusDriveBitMode.html#ab69186c7fcaf6006da92be4381aa460c">present</a> = 1;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* wait that the controllers are present */</span></div>
<div class="line">        <span class="keywordflow">if</span> (err = <a name="a42"></a><a class="code" href="group__DSAAll.html#ga761fc038026cab6eb553817e18f34249">dsa_wait_status_equal_s</a>(axisX, &amp;status_checkbits,</div>
<div class="line">                                          &amp;status_checkstates, NULL, 30000)){</div>
<div class="line">            DSA_EXT_DIAG(err, axisX);</div>
<div class="line">            <span class="keywordflow">goto</span> _error;;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    <span class="comment">/* For the new  values to be effectively taken into account the drive has to be reset.</span></div>
<div class="line"><span class="comment">     * There is no specific function for the RSD (reset) command so you have to send it</span></div>
<div class="line"><span class="comment">     * «manually»:</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <a name="a43"></a><a class="code" href="group__DSAAll.html#gab5498a84b460f5111cd4aee05f99ae0a">dsa_execute_command_d_s</a>(igrp,                       <span class="comment">/* grp: destination device */</span></div>
<div class="line">                            DMD_CMD_RESET_DRIVE,        <span class="comment">/* cmd: constant number of the RSD command (88) */</span></div>
<div class="line">                            <a name="a44"></a><a class="code" href="dmd40_8h.html#aab203ee5836ed9f4f0a18b10ca984ab3">DMD_TYP_IMMEDIATE</a>,          <span class="comment">/* typ: the parameter to the command is a value*/</span></div>
<div class="line">                            255,                        <span class="comment">/* par : the value always passed to the RSD command*/</span></div>
<div class="line">                            0,                          <span class="comment">/* fast: 1 : true = fast command */</span></div>
<div class="line">                            0,                          <span class="comment">/* ereport: 0 false = don&#39;t report drive errors */</span></div>
<div class="line">                            <a class="code" href="dsa40_8h.html#afa8a5747e4999e6e003571e2d2d26f8c">DSA_DEF_TIMEOUT</a>             <span class="comment">/* timeout: 10 secs */</span></div>
<div class="line">                           );</div>
<div class="line">    <span class="comment">/* The RSD command also takes quite a while to execute.</span></div>
<div class="line"><span class="comment">     * Also, like SAV command, because the controller resets, it does not have the</span></div>
<div class="line"><span class="comment">     * time to send the acknowledgement that it has received and executed this command.</span></div>
<div class="line"><span class="comment">     * This is why the call to dsa_execute_command_d_s() for the RSD command nearly</span></div>
<div class="line"><span class="comment">     * always returns an error indicating an absence of command acknowledge. This is the</span></div>
<div class="line"><span class="comment">     * one case where it is advised NOT to test the returned error code and why the above</span></div>
<div class="line"><span class="comment">     * call is a bit different from the previous ones. Also this is why you don&#39;t have to</span></div>
<div class="line"><span class="comment">     * put a big timeout value. However, you do have to wait a while for the system to</span></div>
<div class="line"><span class="comment">     * come up again:</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">     Sleep(60000);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Note: here we have reset all the drives in the network. Only the drive on which the</span></div>
<div class="line"><span class="comment">     * SAV was done really needs to be reset. Here it is done because the group includes</span></div>
<div class="line"><span class="comment">     * the ULTIMET and that means that the communication will be lost and the following lines</span></div>
<div class="line"><span class="comment">     * example shows how to reestablish it</span></div>
<div class="line"><span class="comment">     * The proper way to do this, is to first close the communication with all devices,</span></div>
<div class="line"><span class="comment">     * and then re-open it:</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">    /* --Close communication.</span></div>
<div class="line"><span class="comment">     * You don’t need to destroy the objects; these will be used again when</span></div>
<div class="line"><span class="comment">     * reopenning the communication</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <a name="a45"></a><a class="code" href="group__DSAAll.html#ga96470cb9eaebf9228ce362404fbe0078">dsa_close</a>(axisX);</div>
<div class="line">    <a class="code" href="group__DSAAll.html#ga96470cb9eaebf9228ce362404fbe0078">dsa_close</a>(axisY);</div>
<div class="line">    <a class="code" href="group__DSAAll.html#ga96470cb9eaebf9228ce362404fbe0078">dsa_close</a>(ultimet);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* --Reopen communication*/</span></div>
<div class="line">    <span class="keywordflow">if</span> (err = <a class="code" href="group__DSAAll.html#gac4f6cffd7dd579bcb9a7f60af5f6bb29">dsa_open_u</a>(axisX, <span class="stringliteral">&quot;etb:ULTIMET:0&quot;</span>)) {</div>
<div class="line">        DSA_EXT_DIAG(err, axisX);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (err = <a class="code" href="group__DSAAll.html#gac4f6cffd7dd579bcb9a7f60af5f6bb29">dsa_open_u</a>(axisY, <span class="stringliteral">&quot;etb:ULTIMET:1&quot;</span>)) {</div>
<div class="line">        DSA_EXT_DIAG(err, axisY);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (err = <a class="code" href="group__DSAAll.html#gac4f6cffd7dd579bcb9a7f60af5f6bb29">dsa_open_u</a>(ultimet, <span class="stringliteral">&quot;etb:ULTIMET:*&quot;</span>)) {</div>
<div class="line">        DSA_EXT_DIAG(err, ultimet);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line"><span class="comment">  /*** Reading and writing of registers ***/</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* We will do this here just to show that we have</span></div>
<div class="line"><span class="comment">     *   a) regained access to the drive</span></div>
<div class="line"><span class="comment">     *   b) actually changed and saved the register</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    {</div>
<div class="line">        <span class="keywordtype">long</span> val;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (err = <a class="code" href="group__DSAAll.html#ga1ac49aec3eec6ec43ab45e2e9ce06469">dsa_get_register_int32_s</a>(axisX,               <span class="comment">/* grp: destination device */</span></div>
<div class="line">                                           <a class="code" href="dmd40_8h.html#a0400c0e1e903e77f0b131cd18f26fe98">DMD_TYP_USER</a>,        <span class="comment">/* typ: DMD constant 1:X user register */</span></div>
<div class="line">                                           2,                   <span class="comment">/* idx: register index */</span></div>
<div class="line">                                           0,                   <span class="comment">/* sidx: register subindex */</span></div>
<div class="line">                                           &amp;val,                <span class="comment">/* value: register value */</span></div>
<div class="line">                                           <a class="code" href="dsa40_8h.html#acf39ecf276e6aa5989552647d989f9bd">DSA_GET_CURRENT</a>, <span class="comment">/* kind: actual device value */</span></div>
<div class="line">                                           <a class="code" href="dsa40_8h.html#afa8a5747e4999e6e003571e2d2d26f8c">DSA_DEF_TIMEOUT</a>  <span class="comment">/* timeout: default timeout */</span></div>
<div class="line">                                           )) {</div>
<div class="line">            DSA_EXT_DIAG(err, axisX);</div>
<div class="line">            <span class="keywordflow">goto</span> _error;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        printf(<span class="stringliteral">&quot;User register after sav/reset X2 = %d\n&quot;</span>,val);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment">  /*** Asynchronous function ***/</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Reset errors before power on */</span></div>
<div class="line">    <span class="keywordflow">if</span> (err = <a class="code" href="group__DSAAll.html#ga8ecfd3470b57e52353829b6aa989343f">dsa_reset_error_ex_s</a>(igrp, 0, <a class="code" href="dsa40_8h.html#afa8a5747e4999e6e003571e2d2d26f8c">DSA_DEF_TIMEOUT</a>)) {</div>
<div class="line">        DSA_EXT_DIAG(err, igrp);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (err = <a class="code" href="group__DSAAll.html#ga8ecfd3470b57e52353829b6aa989343f">dsa_reset_error_ex_s</a>(ultimet, 0, <a class="code" href="dsa40_8h.html#afa8a5747e4999e6e003571e2d2d26f8c">DSA_DEF_TIMEOUT</a>)) {</div>
<div class="line">        DSA_EXT_DIAG(err, ultimet);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Do an asynchronous power on */</span></div>
<div class="line">    <span class="comment">/* Handler will be called once power on function is finished */</span></div>
<div class="line">    <span class="comment">/* Meanwhile, the application can do something, in this case displaying &quot;*&quot; */</span></div>
<div class="line">    <span class="comment">/* to indicate power on process in-progress status */</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Initialisation of main thread - callback function synchronous variable */</span></div>
<div class="line">    callbackCalled = 0;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* asynchronous power on */</span></div>
<div class="line">    <span class="comment">/* This function will return BEFORE the controllers terminate the PWR=1 function */</span></div>
<div class="line">    <span class="comment">/* call function will be called once the controllers has terminated PWR=1 function */</span></div>
<div class="line">    printf(<span class="stringliteral">&quot;\nPower on in progress &quot;</span>);</div>
<div class="line">    fflush(stdout);</div>
<div class="line">    <span class="keywordflow">if</span> (err = <a name="a46"></a><a class="code" href="group__DSAAll.html#gaa7025c8b2f5334b4438396c8c2e9764a">dsa_power_on_a</a>(igrp, callback, (<span class="keywordtype">void</span>*)1)) {</div>
<div class="line">        DSA_EXT_DIAG(err, igrp);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Wait that callback function is called */</span></div>
<div class="line">    <span class="keywordflow">while</span> (!callbackCalled) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;*&quot;</span>);</div>
<div class="line">        fflush(stdout);</div>
<div class="line">        Sleep(100);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (asyncFunctionError) {</div>
<div class="line">        DSA_EXT_DIAG(asyncFunctionError, igrp);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Do a homing followed by an asynchronous wait on end of movement */</span></div>
<div class="line">    <span class="comment">/* Because even synchronous homing comes back immediately, it is no */</span></div>
<div class="line">    <span class="comment">/* sense to do an asynchronous homing. On the other hand, it is advised */</span></div>
<div class="line">    <span class="comment">/* to do an asynchronous dsa_wait_movement and meanwhile displaying the */</span></div>
<div class="line">    <span class="comment">/* homing process in-progress status */</span></div>
<div class="line">    <span class="comment">/* to do an asnyhronous wait</span></div>
<div class="line"><span class="comment">    /* Handler will be called once power on function is finished */</span></div>
<div class="line">    <span class="comment">/* Meanwhile, the application can do something, in this case displaying &quot;*&quot; */</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* asynchronous power on */</span></div>
<div class="line">    <span class="comment">/* This function will return BEFORE the controllers terminate the PWR=1 function */</span></div>
<div class="line">    <span class="comment">/* call function will be called once the controllers has terminated PWR=1 function */</span></div>
<div class="line">    printf(<span class="stringliteral">&quot;\nHoming in progress &quot;</span>);</div>
<div class="line">    fflush(stdout);</div>
<div class="line">    <span class="keywordflow">if</span> (err = <a class="code" href="group__DSAAll.html#gaf918456506e721ed90e7481b0d1861f2">dsa_homing_start_s</a>(igrp, 10000)) {</div>
<div class="line">        DSA_EXT_DIAG(err, igrp);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Initialisation of main thread - callback function synchronous variable */</span></div>
<div class="line">    callbackCalled = 0;</div>
<div class="line">    <span class="keywordflow">if</span> (err = <a name="a47"></a><a class="code" href="group__DSAAll.html#gae0c78315374223af123bc70c9817de81">dsa_wait_movement_a</a>(igrp, callback, (<span class="keywordtype">void</span>*)2)) {</div>
<div class="line">        DSA_EXT_DIAG(err, igrp);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Wait that callback function is called */</span></div>
<div class="line">    <span class="keywordflow">while</span> (!callbackCalled) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;*&quot;</span>);</div>
<div class="line">        fflush(stdout);</div>
<div class="line">        Sleep(100);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (asyncFunctionError) {</div>
<div class="line">        DSA_EXT_DIAG(asyncFunctionError, igrp);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment">  /*** Application termination ***/</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">/*</span></div>
<div class="line"><span class="comment">     * When we have arrived at the end of our application, we have to go through a couple</span></div>
<div class="line"><span class="comment">     * of termination steps for a proper closeout of our program.</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Application termination operations take place in the reverse order of those</span></div>
<div class="line"><span class="comment">     * described in at startup which are creating the objects and opening the communication.</span></div>
<div class="line"><span class="comment">     * These two functions assign resources to the operating system. During the creation of</span></div>
<div class="line"><span class="comment">     * an object or a group, memory is assigned. During the opening of the communication,</span></div>
<div class="line"><span class="comment">     * the use of the serial port, the interruption line or other resources specific to the</span></div>
<div class="line"><span class="comment">     * communication bus used are assigned. These resources must be given back to the system</span></div>
<div class="line"><span class="comment">     * as soon as there are not used any more. It is normally done just before leaving the</span></div>
<div class="line"><span class="comment">     * application.</span></div>
<div class="line"><span class="comment">     * The DSA library has the dsa_close() function to close the communication and the</span></div>
<div class="line"><span class="comment">     * dsa_destroy() function to destroy an object or a group. The closing must be done</span></div>
<div class="line"><span class="comment">     * before the destruction.</span></div>
<div class="line"><span class="comment">     * So, first, the connections must be closed:</span></div>
<div class="line"><span class="comment">     * -connection to the ULTIMET:</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <span class="keywordflow">if</span> (err = <a class="code" href="group__DSAAll.html#ga96470cb9eaebf9228ce362404fbe0078">dsa_close</a>(ultimet)) {</div>
<div class="line">        DSA_EXT_DIAG(err, ultimet);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line">     <span class="comment">/* - connections to both drives:*/</span></div>
<div class="line">    <span class="keywordflow">if</span> (err = <a class="code" href="group__DSAAll.html#ga96470cb9eaebf9228ce362404fbe0078">dsa_close</a>(axisX)) {</div>
<div class="line">        DSA_EXT_DIAG(err, axisX);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (err = <a class="code" href="group__DSAAll.html#ga96470cb9eaebf9228ce362404fbe0078">dsa_close</a>(axisY)) {</div>
<div class="line">        DSA_EXT_DIAG(err, axisY);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line">    <span class="comment">/* Then, just like the objects were created at the beginning of the application,</span></div>
<div class="line"><span class="comment">     *the memory alloted to them must be released to be made available to the system again:</span></div>
<div class="line"><span class="comment">     * -group object:</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <span class="keywordflow">if</span> (err = <a name="a48"></a><a class="code" href="group__DSAAll.html#ga67a49a697906d25519c124c191a5654a">dsa_destroy</a>(&amp;igrp)) {</div>
<div class="line">        DSA_EXT_DIAG(err, igrp);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line">    <span class="comment">/* - ultimet object: */</span></div>
<div class="line">    <span class="keywordflow">if</span> (err = <a class="code" href="group__DSAAll.html#ga67a49a697906d25519c124c191a5654a">dsa_destroy</a>(&amp;ultimet)) {</div>
<div class="line">        DSA_EXT_DIAG(err, ultimet);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line">    <span class="comment">/* - and the drive objects */</span></div>
<div class="line">    <span class="keywordflow">if</span> (err = <a class="code" href="group__DSAAll.html#ga67a49a697906d25519c124c191a5654a">dsa_destroy</a>(&amp;axisX)) {</div>
<div class="line">        DSA_EXT_DIAG(err, axisX);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (err = <a class="code" href="group__DSAAll.html#ga67a49a697906d25519c124c191a5654a">dsa_destroy</a>(&amp;axisY)) {</div>
<div class="line">        DSA_EXT_DIAG(err, axisY);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    printf(<span class="stringliteral">&quot;Application correctly ended. Press a key to continue\n&quot;</span>);</div>
<div class="line">    _getch();</div>
<div class="line">    <span class="comment">/* All is well that ends well.*/</span></div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line"> </div>
<div class="line"><span class="comment">    /**************************</span></div>
<div class="line"><span class="comment">     * Now the error handler...</span></div>
<div class="line"><span class="comment">     **************************/</span></div>
<div class="line">_error:</div>
<div class="line">    <span class="comment">/*</span></div>
<div class="line"><span class="comment">     * Stop access to the drive while stopping, otherwise we will</span></div>
<div class="line"><span class="comment">     * get errors.</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    doDisplay = 0;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Destroy the group if not already done. */</span></div>
<div class="line">    <span class="keywordflow">if</span>(<a name="a49"></a><a class="code" href="group__DSAAll.html#ga191d2aa60b4ff3f2635590ad57bed44b">dsa_is_valid_drive_group</a>(igrp)) {</div>
<div class="line">        <span class="comment">/* Leave the interpolation mode. */</span></div>
<div class="line">        <span class="keywordflow">if</span> (<a name="a50"></a><a class="code" href="group__DSAAll.html#ga995d1cb2a1d79bba0c7f5358f1d581ca">dsa_is_ipol_in_progress</a>(igrp))</div>
<div class="line">            <a class="code" href="group__DSAAll.html#ga585ca40ec17ac8c993457dda09cfb167">dsa_ipol_end_s</a>(igrp, <a class="code" href="dsa40_8h.html#afa8a5747e4999e6e003571e2d2d26f8c">DSA_DEF_TIMEOUT</a>);</div>
<div class="line">        <a class="code" href="group__DSAAll.html#ga67a49a697906d25519c124c191a5654a">dsa_destroy</a>(&amp;igrp);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* The same has to be done with the ultimet and the drives. For each drive, if the object</span></div>
<div class="line"><span class="comment">     * pointer is valid, we check if we can still communicate with it to stop all movements</span></div>
<div class="line"><span class="comment">     * and then to power it off and finally close the communication. Afterwards, the object</span></div>
<div class="line"><span class="comment">     * itself can be destroyed</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* axis X */</span></div>
<div class="line">    <span class="keywordflow">if</span>(<a name="a51"></a><a class="code" href="group__DSAAll.html#ga989fc7fbd7d3b76cb0e3853aca34d4f7">dsa_is_valid_drive</a>(axisX)) {</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Is the communication open ? */</span></div>
<div class="line">        ebool open = 0;</div>
<div class="line">        <a name="a52"></a><a class="code" href="group__DSAAll.html#gabca5df9b7fb98299c620827b88bb733c">dsa_is_open</a>(axisX, &amp;open);</div>
<div class="line">        <span class="keywordflow">if</span>(open) {</div>
<div class="line"> </div>
<div class="line">            <span class="comment">/* Stop movements. */</span></div>
<div class="line">            <a name="a53"></a><a class="code" href="group__DSAAll.html#gac1612522ee28aa29d1b6735934b53a8a">dsa_quick_stop_s</a>(axisX, <a name="a54"></a><a class="code" href="dsa40_8h.html#a0caf300cd534be210d5c07411641f4fe">DSA_QS_PROGRAMMED_DEC</a>,</div>
<div class="line">                             <a name="a55"></a><a class="code" href="dsa40_8h.html#a5f8141ea9c17eb16757e8fdbe1fb8c66">DSA_QS_BYPASS</a> | <a name="a56"></a><a class="code" href="dsa40_8h.html#a243c0e90f35d4782b4704b0ca1a6dfd1">DSA_QS_STOP_SEQUENCE</a>, <a class="code" href="dsa40_8h.html#afa8a5747e4999e6e003571e2d2d26f8c">DSA_DEF_TIMEOUT</a>);</div>
<div class="line"> </div>
<div class="line">            <span class="comment">/* When the motor has stopped, a power off is done. */</span></div>
<div class="line">            <a class="code" href="group__DSAAll.html#ga7647e24f7415c0573351aca11fb63f59">dsa_wait_movement_s</a>(axisX, 60000);</div>
<div class="line">            <a class="code" href="group__DSAAll.html#ga710488b5bce619a8a58c0442dd1f7ba8">dsa_power_off_s</a>(axisX, 60000);</div>
<div class="line"> </div>
<div class="line">            <span class="comment">/* Close the connection. */</span></div>
<div class="line">            <a class="code" href="group__DSAAll.html#ga96470cb9eaebf9228ce362404fbe0078">dsa_close</a>(axisX);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Finally, release the associated resources to the OS. */</span></div>
<div class="line">        <a class="code" href="group__DSAAll.html#ga67a49a697906d25519c124c191a5654a">dsa_destroy</a>(&amp;axisX);</div>
<div class="line">    }</div>
<div class="line">    <span class="comment">/* axis Y */</span></div>
<div class="line">    <span class="keywordflow">if</span>(<a class="code" href="group__DSAAll.html#ga989fc7fbd7d3b76cb0e3853aca34d4f7">dsa_is_valid_drive</a>(axisY)) {</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Is the communication open ? */</span></div>
<div class="line">        ebool open = 0;</div>
<div class="line">        <a class="code" href="group__DSAAll.html#gabca5df9b7fb98299c620827b88bb733c">dsa_is_open</a>(axisY, &amp;open);</div>
<div class="line">        <span class="keywordflow">if</span>(open) {</div>
<div class="line"> </div>
<div class="line">             <span class="comment">/* Stop movements. */</span></div>
<div class="line">            <a class="code" href="group__DSAAll.html#gac1612522ee28aa29d1b6735934b53a8a">dsa_quick_stop_s</a>(axisY, <a class="code" href="dsa40_8h.html#a0caf300cd534be210d5c07411641f4fe">DSA_QS_PROGRAMMED_DEC</a>,</div>
<div class="line">                             <a class="code" href="dsa40_8h.html#a5f8141ea9c17eb16757e8fdbe1fb8c66">DSA_QS_BYPASS</a> | <a class="code" href="dsa40_8h.html#a243c0e90f35d4782b4704b0ca1a6dfd1">DSA_QS_STOP_SEQUENCE</a>, <a class="code" href="dsa40_8h.html#afa8a5747e4999e6e003571e2d2d26f8c">DSA_DEF_TIMEOUT</a>);</div>
<div class="line"> </div>
<div class="line">            <span class="comment">/* When the motor has stopped, a power off is done. */</span></div>
<div class="line">            <a class="code" href="group__DSAAll.html#ga7647e24f7415c0573351aca11fb63f59">dsa_wait_movement_s</a>(axisY, 60000);</div>
<div class="line">            <a class="code" href="group__DSAAll.html#ga710488b5bce619a8a58c0442dd1f7ba8">dsa_power_off_s</a>(axisY, 60000);</div>
<div class="line"> </div>
<div class="line">            <span class="comment">/* Close the connection. */</span></div>
<div class="line">            <a class="code" href="group__DSAAll.html#ga96470cb9eaebf9228ce362404fbe0078">dsa_close</a>(axisY);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Finally, release the associated resources to the OS. */</span></div>
<div class="line">        <a class="code" href="group__DSAAll.html#ga67a49a697906d25519c124c191a5654a">dsa_destroy</a>(&amp;axisY);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* The ULTIMET also has to be shutdown:*/</span></div>
<div class="line">    <span class="keywordflow">if</span>(<a name="a57"></a><a class="code" href="group__DSAAll.html#ga70a69c2290bd38e89628d7a079a2dc89">dsa_is_valid_master</a>(ultimet)) {</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Is the drive open ? */</span></div>
<div class="line">            ebool open = 0;</div>
<div class="line">            <a class="code" href="group__DSAAll.html#gabca5df9b7fb98299c620827b88bb733c">dsa_is_open</a>(ultimet, &amp;open);</div>
<div class="line">            <span class="keywordflow">if</span> (open) {</div>
<div class="line">                <span class="comment">/* Close the connection */</span></div>
<div class="line">                <a class="code" href="group__DSAAll.html#ga96470cb9eaebf9228ce362404fbe0078">dsa_close</a>(ultimet);</div>
<div class="line">            }</div>
<div class="line">            <span class="comment">/* And finally, release all resources to the OS. */</span></div>
<div class="line">            <a class="code" href="group__DSAAll.html#ga67a49a697906d25519c124c191a5654a">dsa_destroy</a>(&amp;ultimet);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    printf(<span class="stringliteral">&quot;Application ended with error. Press a key to continue\n&quot;</span>);</div>
<div class="line">    _getch();</div>
<div class="line">    <span class="comment">/* Exit indicating an error */</span></div>
<div class="line">    <span class="keywordflow">return</span> -1;</div>
<div class="line">}<span class="comment">/* end main() */</span></div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment">/*** Monitoring data ***/</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * Display thread function.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> display_thread(<span class="keywordtype">void</span> *param)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">/* the common variables must be defined */</span></div>
<div class="line">    <span class="keywordtype">int</span> counter = 0;</div>
<div class="line">    <span class="keywordtype">int</span> err = 0;</div>
<div class="line">    <span class="keywordtype">int</span> i;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/*</span></div>
<div class="line"><span class="comment">     * Casting of parameter to a group of pointer.</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    DSA_IPOL_GROUP *grp = (DSA_IPOL_GROUP *)param;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Get individual drive objects. */</span></div>
<div class="line">    DSA_DRIVE *drv[2];</div>
<div class="line">    DSA_MASTER *ultimet;</div>
<div class="line">    <span class="keywordflow">for</span>(i = 0; i &lt; 2; i++) {</div>
<div class="line">        <span class="keywordflow">if</span> (err = <a name="a58"></a><a class="code" href="group__DSAAll.html#ga37ba1696e4f066cae222c2b7e98d54f9">dsa_get_group_item</a>(grp, i, &amp;drv[i])) {</div>
<div class="line">            DSA_EXT_DIAG(err, NULL);</div>
<div class="line">            <span class="keywordflow">goto</span> _error;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (err = <a name="a59"></a><a class="code" href="group__DSAAll.html#ga71401bb1d3e2a688d5e961d27b0249fc">dsa_get_master</a>(grp, &amp;ultimet)) {</div>
<div class="line">        DSA_EXT_DIAG(err, NULL);</div>
<div class="line">        <span class="keywordflow">goto</span> _error;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">    <span class="comment">/*</span></div>
<div class="line"><span class="comment">     * Start an infinite loop. This function will be stopped by the OS only</span></div>
<div class="line"><span class="comment">     * when the whole process will end.</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <span class="keywordflow">for</span>(;;) {</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/*</span></div>
<div class="line"><span class="comment">         * Each 100 ms, we will display the status and the position of each</span></div>
<div class="line"><span class="comment">         * drive. As usually, the status structure must be initialized before</span></div>
<div class="line"><span class="comment">         * using it.</span></div>
<div class="line"><span class="comment">         */</span></div>
<div class="line">        <a class="code" href="unionDSA__STATUS.html">DSA_STATUS</a> status[] = {<span class="keyword">sizeof</span>(<a class="code" href="unionDSA__STATUS.html">DSA_STATUS</a>), <span class="keyword">sizeof</span>(<a class="code" href="unionDSA__STATUS.html">DSA_STATUS</a>)};</div>
<div class="line">        <a class="code" href="unionDSA__STATUS.html">DSA_STATUS</a> ultimet_status = {<span class="keyword">sizeof</span>(<a class="code" href="unionDSA__STATUS.html">DSA_STATUS</a>)};</div>
<div class="line">        <span class="keywordtype">double</span> pos[2];</div>
<div class="line"> </div>
<div class="line">        pos[0] = pos[1] = 0.0;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* stop display thread */</span></div>
<div class="line">        <span class="keywordflow">if</span>(!doDisplay) {</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/*</span></div>
<div class="line"><span class="comment">         * Get the drive status. Theses functions don&#39;t generate any activity</span></div>
<div class="line"><span class="comment">         * on the communication channel. The status of each drive is always</span></div>
<div class="line"><span class="comment">         * kept up-to-date in the process memory, which means that theses</span></div>
<div class="line"><span class="comment">         * function are very effective and could be often called without</span></div>
<div class="line"><span class="comment">         * degrading performances.</span></div>
<div class="line"><span class="comment">         */</span></div>
<div class="line">        <span class="keywordflow">if</span> (err = <a name="a60"></a><a class="code" href="group__DSAAll.html#ga46611e5eb643bf79451c24564861254a">dsa_get_status</a>(ultimet, &amp;ultimet_status)) {</div>
<div class="line">            DSA_EXT_DIAG(err, ultimet);</div>
<div class="line">            <span class="keywordflow">goto</span> _error;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">for</span>(i = 0; i &lt; 2; i++) {</div>
<div class="line">            <span class="keywordflow">if</span> (err = <a class="code" href="group__DSAAll.html#ga46611e5eb643bf79451c24564861254a">dsa_get_status</a>(drv[i], &amp;status[i])) {</div>
<div class="line">                DSA_EXT_DIAG(err, drv[i]);</div>
<div class="line">                <span class="keywordflow">goto</span> _error;</div>
<div class="line">            }</div>
<div class="line">            <span class="comment">/* Get the position of each axis. */</span></div>
<div class="line">            <span class="keywordflow">if</span> (err = <a name="a61"></a><a class="code" href="group__DSAAll.html#ga23b308585b247fdf73d60ee54f421f5a">dsa_get_position_actual_value_s</a>(drv[i], &amp;pos[i], <a class="code" href="dsa40_8h.html#acf39ecf276e6aa5989552647d989f9bd">DSA_GET_CURRENT</a>, <a class="code" href="dsa40_8h.html#afa8a5747e4999e6e003571e2d2d26f8c">DSA_DEF_TIMEOUT</a>)) {</div>
<div class="line">                DSA_EXT_DIAG(err, drv[i]);</div>
<div class="line">                <span class="keywordflow">goto</span> _error;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/*</span></div>
<div class="line"><span class="comment">         * We can now print the status string on the display.</span></div>
<div class="line"><span class="comment">         */</span></div>
<div class="line">        printf(<span class="stringliteral">&quot;%04d: &quot;</span>, ++counter);</div>
<div class="line">        printf(<span class="stringliteral">&quot;ULTIMET: %c%c%c, &quot;</span>,</div>
<div class="line">            ultimet_status.<a name="a62"></a><a class="code" href="unionDSA__STATUS.html#ad40cb3307a44c8ab2139e1e3ad5ce047">master</a>.<a name="a63"></a><a class="code" href="structDsaStatusUltimETBitMode.html#a600b72b1060ba8429e11b29cbf36d024">moving</a> ? <span class="charliteral">&#39;M&#39;</span> : <span class="charliteral">&#39;-&#39;</span>,</div>
<div class="line">            ultimet_status.<a class="code" href="unionDSA__STATUS.html#ad40cb3307a44c8ab2139e1e3ad5ce047">master</a>.<a name="a64"></a><a class="code" href="structDsaStatusUltimETBitMode.html#aa4a943abddcf32de6f2c8f7f580bde58">warning</a> ? <span class="charliteral">&#39;W&#39;</span> : <span class="charliteral">&#39;-&#39;</span>,</div>
<div class="line">            ultimet_status.<a class="code" href="unionDSA__STATUS.html#ad40cb3307a44c8ab2139e1e3ad5ce047">master</a>.<a name="a65"></a><a class="code" href="structDsaStatusUltimETBitMode.html#ad424aeb3194f65aae0e731740dcd3c31">error</a> ? <span class="charliteral">&#39;E&#39;</span> : <span class="charliteral">&#39;-&#39;</span>);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">for</span>(i = 0; i &lt; 2; i++) {</div>
<div class="line">            printf(<span class="stringliteral">&quot;AXIS %d: %c%c%c [%12.4fmm]&quot;</span>, i,</div>
<div class="line">                status[i].drive.moving ? <span class="charliteral">&#39;M&#39;</span> : <span class="charliteral">&#39;-&#39;</span>,</div>
<div class="line">                status[i].drive.warning ? <span class="charliteral">&#39;W&#39;</span> : <span class="charliteral">&#39;-&#39;</span>,</div>
<div class="line">                status[i].drive.error ? <span class="charliteral">&#39;E&#39;</span> : <span class="charliteral">&#39;-&#39;</span>,</div>
<div class="line">                pos[i]  * 1000.0</div>
<div class="line">                );</div>
<div class="line">            printf((i == 0) ? <span class="stringliteral">&quot;, &quot;</span> : <span class="stringliteral">&quot;\r&quot;</span>);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/*</span></div>
<div class="line"><span class="comment">         * We can now stop for 100ms - the following call is platform dependant.</span></div>
<div class="line"><span class="comment">         */</span></div>
<div class="line">        Sleep(100);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    printf(<span class="stringliteral">&quot;\ndisplay thread ended\n&quot;</span>);</div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Error handler. */</span></div>
<div class="line">_error:</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Print the first error that occured. */</span></div>
<div class="line">    printf(<span class="stringliteral">&quot;error in display (%d it)\n&quot;</span>, counter);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * callback function.</span></div>
<div class="line"><span class="comment"> * This function will be called once asynchronous call is terminated</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keywordtype">void</span> callback(DSA_DEVICE_GROUP *grp, <span class="keywordtype">int</span> err, <span class="keywordtype">void</span> *param)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">/* The asynchronous function has terminated with an error */</span></div>
<div class="line">    <span class="keywordflow">if</span> (err) {</div>
<div class="line">        asyncFunctionError = err;</div>
<div class="line">        printf(<span class="stringliteral">&quot;\n-&gt; callback function called with error %d and parameter %lld\n&quot;</span>, err, (<span class="keywordtype">long</span> <span class="keywordtype">long</span>)(param));</div>
<div class="line">    }</div>
<div class="line">    <span class="comment">/* The asynchronous function has terminated without error */</span></div>
<div class="line">    <span class="keywordflow">else</span> {</div>
<div class="line">        asyncFunctionError = 0;</div>
<div class="line">        printf(<span class="stringliteral">&quot;\n-&gt; callback function called with parameter %lld\n&quot;</span>, (<span class="keywordtype">long</span> <span class="keywordtype">long</span>)(param));</div>
<div class="line">    }</div>
<div class="line">    callbackCalled = 1;</div>
<div class="line">}</div>
</div><!-- fragment --> </div><!-- contents -->
</div><!-- doc-content -->
<div class="ttc" id="agroup__DSAAll_html_ga2641a0388c420422789e73d6b86ba90b"><div class="ttname"><a href="group__DSAAll.html#ga2641a0388c420422789e73d6b86ba90b">dsa_set_profile_acceleration_s</a></div><div class="ttdeci">int dsa_set_profile_acceleration_s(DSA_DRIVE_BASE *obj, int sidx, double acc, long timeout)</div><div class="ttdoc">Set the absolute maximal acc/deceleration (KL212) - synchronous.</div><div class="ttdef"><b>Definition:</b> dsapro.c:1892</div></div>
<div class="ttc" id="adsa40_8h_html_ad28cf92dc259afdda4cb0627ba0b8141"><div class="ttname"><a href="dsa40_8h.html#ad28cf92dc259afdda4cb0627ba0b8141">DSA_STA_POS</a></div><div class="ttdeci">#define DSA_STA_POS</div><div class="ttdoc">get the KL210 specified depth as position for the next move</div><div class="ttdef"><b>Definition:</b> dsa40.h:653</div></div>
<div class="ttc" id="agroup__DSAAll_html_ga1d2196bf2ca4d0f6105764fb1749c6c1"><div class="ttname"><a href="group__DSAAll.html#ga1d2196bf2ca4d0f6105764fb1749c6c1">dsa_set_target_position_s</a></div><div class="ttdeci">int dsa_set_target_position_s(DSA_DRIVE_BASE *obj, int sidx, double pos, long timeout)</div><div class="ttdoc">Set the target position (KL210:depth) - synchronous.</div><div class="ttdef"><b>Definition:</b> dsapro.c:847</div></div>
<div class="ttc" id="agroup__DSAAll_html_ga9a0da989df97f28daf6cc2719634d40b"><div class="ttname"><a href="group__DSAAll.html#ga9a0da989df97f28daf6cc2719634d40b">dsa_set_profile_velocity_s</a></div><div class="ttdeci">int dsa_set_profile_velocity_s(DSA_DRIVE_BASE *obj, int sidx, double vel, long timeout)</div><div class="ttdoc">Set the absolute maximum speed (KL211) - synchronous.</div><div class="ttdef"><b>Definition:</b> dsapro.c:1727</div></div>
<div class="ttc" id="agroup__DSAAll_html_gae524a8f440e1d78dc2cdf4a75a0d5f83"><div class="ttname"><a href="group__DSAAll.html#gae524a8f440e1d78dc2cdf4a75a0d5f83">dsa_create_ipol_group</a></div><div class="ttdeci">int dsa_create_ipol_group(DSA_IPOL_GROUP **rgrp, int size)</div><div class="ttdoc">Create a dsa interpolation group structure.</div><div class="ttdef"><b>Definition:</b> dsagrp.c:345</div></div>
<div class="ttc" id="astructDsaStatusUltimETBitMode_html_a600b72b1060ba8429e11b29cbf36d024"><div class="ttname"><a href="structDsaStatusUltimETBitMode.html#a600b72b1060ba8429e11b29cbf36d024">DsaStatusUltimETBitMode::moving</a></div><div class="ttdeci">unsigned moving</div><div class="ttdoc">One of the interpolation group is moving.</div><div class="ttdef"><b>Definition:</b> dsa40.h:1610</div></div>
<div class="ttc" id="agroup__DSAAll_html_gab5498a84b460f5111cd4aee05f99ae0a"><div class="ttname"><a href="group__DSAAll.html#gab5498a84b460f5111cd4aee05f99ae0a">dsa_execute_command_d_s</a></div><div class="ttdeci">int dsa_execute_command_d_s(DSA_DEVICE_BASE *grp, int cmd, int typ1, int par1, ebool fast, ebool ereport, long timeout)</div><div class="ttdoc">Send a specific drive command with one parameter in increment - synchronous.</div><div class="ttdef"><b>Definition:</b> dsagen.c:1936</div></div>
<div class="ttc" id="agroup__DSAAll_html_ga585ca40ec17ac8c993457dda09cfb167"><div class="ttname"><a href="group__DSAAll.html#ga585ca40ec17ac8c993457dda09cfb167">dsa_ipol_end_s</a></div><div class="ttdeci">int dsa_ipol_end_s(DSA_IPOL_GROUP *igrp, long timeout)</div><div class="ttdoc">Stop the interpolation mode (Command:IEND) - synchronous.</div><div class="ttdef"><b>Definition:</b> dsaipl.c:523</div></div>
<div class="ttc" id="admd40_8h_html_aab203ee5836ed9f4f0a18b10ca984ab3"><div class="ttname"><a href="dmd40_8h.html#aab203ee5836ed9f4f0a18b10ca984ab3">DMD_TYP_IMMEDIATE</a></div><div class="ttdeci">#define DMD_TYP_IMMEDIATE</div><div class="ttdoc">disabled or immediate value</div><div class="ttdef"><b>Definition:</b> dmd40.h:684</div></div>
<div class="ttc" id="adsa40_8h_html_acf39ecf276e6aa5989552647d989f9bd"><div class="ttname"><a href="dsa40_8h.html#acf39ecf276e6aa5989552647d989f9bd">DSA_GET_CURRENT</a></div><div class="ttdeci">#define DSA_GET_CURRENT</div><div class="ttdoc">get current value, bypass pending commands</div><div class="ttdef"><b>Definition:</b> dsa40.h:641</div></div>
<div class="ttc" id="agroup__DSAAll_html_ga698149d8ff4286a5b880e5d4fccd9e13"><div class="ttname"><a href="group__DSAAll.html#ga698149d8ff4286a5b880e5d4fccd9e13">dsa_ipol_circle_ccw_c2d_s</a></div><div class="ttdeci">int dsa_ipol_circle_ccw_c2d_s(DSA_IPOL_GROUP *igrp, double x, double y, double cx, double cy, long timeout)</div><div class="ttdoc">Define a clockwise circular segment (Command:ICCW) - synchronous.</div><div class="ttdef"><b>Definition:</b> dsaipl.c:2407</div></div>
<div class="ttc" id="agroup__DSAAll_html_ga46611e5eb643bf79451c24564861254a"><div class="ttname"><a href="group__DSAAll.html#ga46611e5eb643bf79451c24564861254a">dsa_get_status</a></div><div class="ttdeci">int dsa_get_status(DSA_DEVICE *dev, DSA_STATUS *status)</div><div class="ttdoc">Get the drive status.</div><div class="ttdef"><b>Definition:</b> dsasta.c:1821</div></div>
<div class="ttc" id="adsa40_8h_html_ad3897184cf41bd80b0fdcdd019b9579d"><div class="ttname"><a href="dsa40_8h.html#ad3897184cf41bd80b0fdcdd019b9579d">DSA_ESYSTEM</a></div><div class="ttdeci">#define DSA_ESYSTEM</div><div class="ttdoc">some system resource return an error</div><div class="ttdef"><b>Definition:</b> dsa40.h:602</div></div>
<div class="ttc" id="agroup__DSAAll_html_ga1bc87f5faf678bc0f168cce0f7e154fa"><div class="ttname"><a href="group__DSAAll.html#ga1bc87f5faf678bc0f168cce0f7e154fa">dsa_get_min_soft_position_limit_s</a></div><div class="ttdeci">int dsa_get_min_soft_position_limit_s(DSA_DRIVE *obj, double *pos, int kind, long timeout)</div><div class="ttdoc">Get the minimum software position limit (KL34) - synchronous.</div><div class="ttdef"><b>Definition:</b> dsapro.c:2365</div></div>
<div class="ttc" id="aunionDSA__STATUS_html_a428dc21c7bcab09499503f1ea5b0e049"><div class="ttname"><a href="unionDSA__STATUS.html#a428dc21c7bcab09499503f1ea5b0e049">DSA_STATUS::drive</a></div><div class="ttdeci">DsaStatusDriveBitMode drive</div><div class="ttdoc">Status for drive bit access.</div><div class="ttdef"><b>Definition:</b> dsa40.h:1768</div></div>
<div class="ttc" id="admd40_8h_html"><div class="ttname"><a href="dmd40_8h.html">dmd40.h</a></div><div class="ttdoc">EDI-Version : 4.25A This header file contains public declaration for drive meta-data library.</div></div>
<div class="ttc" id="agroup__DSAAll_html_ga167ed2c50384be05832ab492691d0b65"><div class="ttname"><a href="group__DSAAll.html#ga167ed2c50384be05832ab492691d0b65">dsa_ipol_begin_concatenation_s</a></div><div class="ttdeci">int dsa_ipol_begin_concatenation_s(DSA_IPOL_GROUP *igrp, long timeout)</div><div class="ttdoc">Begin the concatenation of trajectory segments (Command:ICONC) - synchronous.</div><div class="ttdef"><b>Definition:</b> dsaipl.c:589</div></div>
<div class="ttc" id="agroup__DSAAll_html_ga23b308585b247fdf73d60ee54f421f5a"><div class="ttname"><a href="group__DSAAll.html#ga23b308585b247fdf73d60ee54f421f5a">dsa_get_position_actual_value_s</a></div><div class="ttdeci">int dsa_get_position_actual_value_s(DSA_DRIVE *obj, double *pos, int kind, long timeout)</div><div class="ttdoc">Get the real position in user scale (ML7) - synchronous.</div><div class="ttdef"><b>Definition:</b> dsapro.c:540</div></div>
<div class="ttc" id="admd40_8h_html_a0400c0e1e903e77f0b131cd18f26fe98"><div class="ttname"><a href="dmd40_8h.html#a0400c0e1e903e77f0b131cd18f26fe98">DMD_TYP_USER</a></div><div class="ttdeci">#define DMD_TYP_USER</div><div class="ttdoc">user registers</div><div class="ttdef"><b>Definition:</b> dmd40.h:685</div></div>
<div class="ttc" id="agroup__DSAAll_html_ga67a49a697906d25519c124c191a5654a"><div class="ttname"><a href="group__DSAAll.html#ga67a49a697906d25519c124c191a5654a">dsa_destroy</a></div><div class="ttdeci">int dsa_destroy(DSA_DEVICE_BASE **rdev)</div><div class="ttdoc">Destroy the dsa structure.</div><div class="ttdef"><b>Definition:</b> dsaopn.c:932</div></div>
<div class="ttc" id="agroup__DSAAll_html_ga6f73f038940c0bc739beb3372979a475"><div class="ttname"><a href="group__DSAAll.html#ga6f73f038940c0bc739beb3372979a475">dsa_get_max_soft_position_limit_s</a></div><div class="ttdeci">int dsa_get_max_soft_position_limit_s(DSA_DRIVE *obj, double *pos, int kind, long timeout)</div><div class="ttdoc">Get the maximum software position limit (KL35) - synchronous.</div><div class="ttdef"><b>Definition:</b> dsapro.c:2463</div></div>
<div class="ttc" id="agroup__DSAAll_html_ga8ecfd3470b57e52353829b6aa989343f"><div class="ttname"><a href="group__DSAAll.html#ga8ecfd3470b57e52353829b6aa989343f">dsa_reset_error_ex_s</a></div><div class="ttdeci">int dsa_reset_error_ex_s(DSA_DEVICE_BASE *obj, int reset_code, long timeout)</div><div class="ttdoc">Reset the error flags in the drive (Command:RST) - synchronous.</div><div class="ttdef"><b>Definition:</b> dsacmd.c:124</div></div>
<div class="ttc" id="agroup__DSAAll_html_ga0c8f4345366a42e560f8721822aa2dbb"><div class="ttname"><a href="group__DSAAll.html#ga0c8f4345366a42e560f8721822aa2dbb">dsa_ipol_tan_velocity_s</a></div><div class="ttdeci">int dsa_ipol_tan_velocity_s(DSA_IPOL_GROUP *igrp, double velocity, long timeout)</div><div class="ttdoc">Define the trajectory tangential speel (Command:ITSPD) - synchronous.</div><div class="ttdef"><b>Definition:</b> dsaipl.c:1037</div></div>
<div class="ttc" id="agroup__DSAAll_html_gae0c78315374223af123bc70c9817de81"><div class="ttname"><a href="group__DSAAll.html#gae0c78315374223af123bc70c9817de81">dsa_wait_movement_a</a></div><div class="ttdeci">int dsa_wait_movement_a(DSA_DEVICE_BASE *obj, DSA_HANDLER handler, void *param)</div><div class="ttdoc">Wait the end of movement (Command:WTM) - asynchronous.</div><div class="ttdef"><b>Definition:</b> dsawai.c:105</div></div>
<div class="ttc" id="agroup__DSAAll_html_ga0b777bbfa92488269624a52d7ff4d654"><div class="ttname"><a href="group__DSAAll.html#ga0b777bbfa92488269624a52d7ff4d654">dsa_translate_edi_error</a></div><div class="ttdeci">char_cp dsa_translate_edi_error(int code)</div><div class="ttdoc">convert an EDI error code into a textual error message.</div><div class="ttdef"><b>Definition:</b> dsaerr.c:262</div></div>
<div class="ttc" id="agroup__DSAAll_html_gaf918456506e721ed90e7481b0d1861f2"><div class="ttname"><a href="group__DSAAll.html#gaf918456506e721ed90e7481b0d1861f2">dsa_homing_start_s</a></div><div class="ttdeci">int dsa_homing_start_s(DSA_DRIVE_BASE *obj, long timeout)</div><div class="ttdoc">Start homing operation (Command:IND) - synchronous.</div><div class="ttdef"><b>Definition:</b> dsafct.c:601</div></div>
<div class="ttc" id="agroup__DSAAll_html_gacc8610925b89d191e505042b84900f9f"><div class="ttname"><a href="group__DSAAll.html#gacc8610925b89d191e505042b84900f9f">dsa_set_register_int32_s</a></div><div class="ttdeci">int dsa_set_register_int32_s(DSA_DEVICE_BASE *grp, int typ, unsigned idx, int sidx, int val, long timeout)</div><div class="ttdoc">Set the drive register 32 bits integer value (Command:XYY_ABS) - synchronous.</div><div class="ttdef"><b>Definition:</b> dsagen.c:3484</div></div>
<div class="ttc" id="aunionDSA__STATUS_html_ad40cb3307a44c8ab2139e1e3ad5ce047"><div class="ttname"><a href="unionDSA__STATUS.html#ad40cb3307a44c8ab2139e1e3ad5ce047">DSA_STATUS::master</a></div><div class="ttdeci">DsaStatusUltimETBitMode master</div><div class="ttdoc">Status for UltimET bit access.</div><div class="ttdef"><b>Definition:</b> dsa40.h:1771</div></div>
<div class="ttc" id="agroup__DSAAll_html_gabb207b622ef11d41d9dfadf965e77200"><div class="ttname"><a href="group__DSAAll.html#gabb207b622ef11d41d9dfadf965e77200">dsa_create_drive</a></div><div class="ttdeci">int dsa_create_drive(DSA_DRIVE **rdrv)</div><div class="ttdoc">Create the dsa drive structure.</div><div class="ttdef"><b>Definition:</b> dsaopn.c:639</div></div>
<div class="ttc" id="agroup__DSAAll_html_gad5ae47cdd1e4e82e9c33c778b597bcf6"><div class="ttname"><a href="group__DSAAll.html#gad5ae47cdd1e4e82e9c33c778b597bcf6">dsa_create_master</a></div><div class="ttdeci">int dsa_create_master(DSA_MASTER **rmaster)</div><div class="ttdoc">Create the dsa master structure.</div><div class="ttdef"><b>Definition:</b> dsaopn.c:688</div></div>
<div class="ttc" id="agroup__DSAAll_html_ga1efbddf4eff0336e151f348eb6bdfb56"><div class="ttname"><a href="group__DSAAll.html#ga1efbddf4eff0336e151f348eb6bdfb56">dsa_ipol_wait_movement_s</a></div><div class="ttdeci">int dsa_ipol_wait_movement_s(DSA_IPOL_GROUP *igrp, long timeout)</div><div class="ttdoc">Wait the end of a interpolated movement (dsa_wait_status_equal_s) - synchronous.</div><div class="ttdef"><b>Definition:</b> dsaipl.c:2602</div></div>
<div class="ttc" id="aunionDSA__STATUS_html"><div class="ttname"><a href="unionDSA__STATUS.html">DSA_STATUS</a></div><div class="ttdoc">Contains status of devices.</div><div class="ttdef"><b>Definition:</b> dsa40.h:1764</div></div>
<div class="ttc" id="agroup__DSAAll_html_ga96470cb9eaebf9228ce362404fbe0078"><div class="ttname"><a href="group__DSAAll.html#ga96470cb9eaebf9228ce362404fbe0078">dsa_close</a></div><div class="ttdeci">int dsa_close(DSA_DEVICE *dev)</div><div class="ttdoc">Close a dsa device object.</div><div class="ttdef"><b>Definition:</b> dsaopn.c:1654</div></div>
<div class="ttc" id="agroup__DSAAll_html_gac3081206d0394e35d5162238e73e9637"><div class="ttname"><a href="group__DSAAll.html#gac3081206d0394e35d5162238e73e9637">dsa_ipol_end_concatenation_s</a></div><div class="ttdeci">int dsa_ipol_end_concatenation_s(DSA_IPOL_GROUP *igrp, long timeout)</div><div class="ttdoc">End the concatenation of trajectory segments (Command:INCONC) - synchronous.</div><div class="ttdef"><b>Definition:</b> dsaipl.c:659</div></div>
<div class="ttc" id="adsa40_8h_html_afa8a5747e4999e6e003571e2d2d26f8c"><div class="ttname"><a href="dsa40_8h.html#afa8a5747e4999e6e003571e2d2d26f8c">DSA_DEF_TIMEOUT</a></div><div class="ttdeci">#define DSA_DEF_TIMEOUT</div><div class="ttdoc">use the default timeout appropriate for this communication</div><div class="ttdef"><b>Definition:</b> dsa40.h:634</div></div>
<div class="ttc" id="adsa40_8h_html_abde9dba4c1b4ba165bbcc1bfc3cc3282"><div class="ttname"><a href="dsa40_8h.html#abde9dba4c1b4ba165bbcc1bfc3cc3282">DSA_PARAM_SAVE_X_PARAMS</a></div><div class="ttdeci">#define DSA_PARAM_SAVE_X_PARAMS</div><div class="ttdoc">save X, XL, XF, XD parameters in flash memory</div><div class="ttdef"><b>Definition:</b> dsa40.h:748</div></div>
<div class="ttc" id="agroup__DSAAll_html_gad4479a364dbab3a12369d9550c58a4ea"><div class="ttname"><a href="group__DSAAll.html#gad4479a364dbab3a12369d9550c58a4ea">dsa_power_on_s</a></div><div class="ttdeci">int dsa_power_on_s(DSA_DRIVE_BASE *grp, long timeout)</div><div class="ttdoc">Set the motor in power on state (Command:PWR=1) - synchronous.</div><div class="ttdef"><b>Definition:</b> dsafct.c:358</div></div>
<div class="ttc" id="agroup__DSAAll_html_ga5c12cb774837cc20c007f5b4231aa5bc"><div class="ttname"><a href="group__DSAAll.html#ga5c12cb774837cc20c007f5b4231aa5bc">dsa_ipol_tan_deceleration_s</a></div><div class="ttdeci">int dsa_ipol_tan_deceleration_s(DSA_IPOL_GROUP *igrp, double dec, long timeout)</div><div class="ttdoc">Define the trajectory tangential deceleration (Command:ITDEC) - synchronous.</div><div class="ttdef"><b>Definition:</b> dsaipl.c:1181</div></div>
<div class="ttc" id="adsa40_8h_html_a243c0e90f35d4782b4704b0ca1a6dfd1"><div class="ttname"><a href="dsa40_8h.html#a243c0e90f35d4782b4704b0ca1a6dfd1">DSA_QS_STOP_SEQUENCE</a></div><div class="ttdeci">#define DSA_QS_STOP_SEQUENCE</div><div class="ttdoc">also stop the sequence</div><div class="ttdef"><b>Definition:</b> dsa40.h:780</div></div>
<div class="ttc" id="adsa40_8h_html_a0caf300cd534be210d5c07411641f4fe"><div class="ttname"><a href="dsa40_8h.html#a0caf300cd534be210d5c07411641f4fe">DSA_QS_PROGRAMMED_DEC</a></div><div class="ttdeci">#define DSA_QS_PROGRAMMED_DEC</div><div class="ttdoc">stop motor with programmed deceleration</div><div class="ttdef"><b>Definition:</b> dsa40.h:779</div></div>
<div class="ttc" id="agroup__DSAAll_html_gac4f6cffd7dd579bcb9a7f60af5f6bb29"><div class="ttname"><a href="group__DSAAll.html#gac4f6cffd7dd579bcb9a7f60af5f6bb29">dsa_open_u</a></div><div class="ttdeci">int dsa_open_u(DSA_DEVICE *dev, char_cp url)</div><div class="ttdoc">Open a dsa device object.</div><div class="ttdef"><b>Definition:</b> dsaopn.c:1100</div></div>
<div class="ttc" id="astructDsaStatusUltimETBitMode_html_ad424aeb3194f65aae0e731740dcd3c31"><div class="ttname"><a href="structDsaStatusUltimETBitMode.html#ad424aeb3194f65aae0e731740dcd3c31">DsaStatusUltimETBitMode::error</a></div><div class="ttdeci">unsigned error</div><div class="ttdoc">The device is in error mode.</div><div class="ttdef"><b>Definition:</b> dsa40.h:1614</div></div>
<div class="ttc" id="agroup__DSAAll_html_gab48f7ed48e5c47aeb082f4d7b127d52b"><div class="ttname"><a href="group__DSAAll.html#gab48f7ed48e5c47aeb082f4d7b127d52b">dsa_set_jerk_time_s</a></div><div class="ttdeci">int dsa_set_jerk_time_s(DSA_DRIVE_BASE *obj, int sidx, double tim, long timeout)</div><div class="ttdoc">Set the jerk time (K213) - synchronous.</div><div class="ttdef"><b>Definition:</b> dsapro.c:2000</div></div>
<div class="ttc" id="agroup__DSAAll_html_ga989fc7fbd7d3b76cb0e3853aca34d4f7"><div class="ttname"><a href="group__DSAAll.html#ga989fc7fbd7d3b76cb0e3853aca34d4f7">dsa_is_valid_drive</a></div><div class="ttdeci">ebool dsa_is_valid_drive(DSA_DRIVE *drv)</div><div class="ttdoc">Check if the given pointer is a valid drive pointer.</div><div class="ttdef"><b>Definition:</b> dsagrp.c:1262</div></div>
<div class="ttc" id="agroup__DSAAll_html_ga191d2aa60b4ff3f2635590ad57bed44b"><div class="ttname"><a href="group__DSAAll.html#ga191d2aa60b4ff3f2635590ad57bed44b">dsa_is_valid_drive_group</a></div><div class="ttdeci">ebool dsa_is_valid_drive_group(DSA_DRIVE_GROUP *grp)</div><div class="ttdoc">Check if the given pointer is a valid drive group pointer.</div><div class="ttdef"><b>Definition:</b> dsagrp.c:1166</div></div>
<div class="ttc" id="agroup__DSAAll_html_gadea32516f752ffe87ad0e5ac6514bcaa"><div class="ttname"><a href="group__DSAAll.html#gadea32516f752ffe87ad0e5ac6514bcaa">dsa_ipol_tan_acceleration_s</a></div><div class="ttdeci">int dsa_ipol_tan_acceleration_s(DSA_IPOL_GROUP *igrp, double acc, long timeout)</div><div class="ttdoc">Define the trajectory tangential acceleration (Command:ITACC) - synchronous.</div><div class="ttdef"><b>Definition:</b> dsaipl.c:1109</div></div>
<div class="ttc" id="agroup__DSAAll_html_ga33ee7bc94a04ba24add4dc9d89146fb3"><div class="ttname"><a href="group__DSAAll.html#ga33ee7bc94a04ba24add4dc9d89146fb3">dsa_set_group_item</a></div><div class="ttdeci">int dsa_set_group_item(DSA_DEVICE_GROUP *grp, int pos, DSA_DEVICE_BASE *dev)</div><div class="ttdoc">Define the specified element of the group structure.</div><div class="ttdef"><b>Definition:</b> dsagrp.c:392</div></div>
<div class="ttc" id="agroup__DSAAll_html_ga71401bb1d3e2a688d5e961d27b0249fc"><div class="ttname"><a href="group__DSAAll.html#ga71401bb1d3e2a688d5e961d27b0249fc">dsa_get_master</a></div><div class="ttdeci">int dsa_get_master(DSA_IPOL_GROUP *grp, DSA_MASTER **master)</div><div class="ttdoc">Get a pointer to master structure from etb object.</div><div class="ttdef"><b>Definition:</b> dsagrp.c:1397</div></div>
<div class="ttc" id="agroup__DSAAll_html_gaa7025c8b2f5334b4438396c8c2e9764a"><div class="ttname"><a href="group__DSAAll.html#gaa7025c8b2f5334b4438396c8c2e9764a">dsa_power_on_a</a></div><div class="ttdeci">int dsa_power_on_a(DSA_DRIVE_BASE *grp, DSA_HANDLER handler, void *param)</div><div class="ttdoc">Set the motor in power on state (Command:PWR=1) - asynchronous.</div><div class="ttdef"><b>Definition:</b> dsafct.c:375</div></div>
<div class="ttc" id="adsa40_8h_html_a5f8141ea9c17eb16757e8fdbe1fb8c66"><div class="ttname"><a href="dsa40_8h.html#a5f8141ea9c17eb16757e8fdbe1fb8c66">DSA_QS_BYPASS</a></div><div class="ttdeci">#define DSA_QS_BYPASS</div><div class="ttdoc">bypass all pending command (OBSOLETE)</div><div class="ttdef"><b>Definition:</b> dsa40.h:776</div></div>
<div class="ttc" id="astructDsaStatusDriveBitMode_html_ab69186c7fcaf6006da92be4381aa460c"><div class="ttname"><a href="structDsaStatusDriveBitMode.html#ab69186c7fcaf6006da92be4381aa460c">DsaStatusDriveBitMode::present</a></div><div class="ttdeci">unsigned present</div><div class="ttdoc">The device is present.</div><div class="ttdef"><b>Definition:</b> dsa40.h:1521</div></div>
<div class="ttc" id="agroup__DSAAll_html_ga70a69c2290bd38e89628d7a079a2dc89"><div class="ttname"><a href="group__DSAAll.html#ga70a69c2290bd38e89628d7a079a2dc89">dsa_is_valid_master</a></div><div class="ttdeci">ebool dsa_is_valid_master(DSA_MASTER *master)</div><div class="ttdoc">Check if the given pointer is a valid master pointer.</div><div class="ttdef"><b>Definition:</b> dsagrp.c:1275</div></div>
<div class="ttc" id="astructDsaStatusUltimETBitMode_html_aa4a943abddcf32de6f2c8f7f580bde58"><div class="ttname"><a href="structDsaStatusUltimETBitMode.html#aa4a943abddcf32de6f2c8f7f580bde58">DsaStatusUltimETBitMode::warning</a></div><div class="ttdeci">unsigned warning</div><div class="ttdoc">The device is in warning mode.</div><div class="ttdef"><b>Definition:</b> dsa40.h:1621</div></div>
<div class="ttc" id="agroup__DSAAll_html_ga710488b5bce619a8a58c0442dd1f7ba8"><div class="ttname"><a href="group__DSAAll.html#ga710488b5bce619a8a58c0442dd1f7ba8">dsa_power_off_s</a></div><div class="ttdeci">int dsa_power_off_s(DSA_DRIVE_BASE *grp, long timeout)</div><div class="ttdoc">Set the motor in power off state (Command:PWR=0) - synchronous.</div><div class="ttdef"><b>Definition:</b> dsafct.c:392</div></div>
<div class="ttc" id="agroup__DSAAll_html_ga995d1cb2a1d79bba0c7f5358f1d581ca"><div class="ttname"><a href="group__DSAAll.html#ga995d1cb2a1d79bba0c7f5358f1d581ca">dsa_is_ipol_in_progress</a></div><div class="ttdeci">ebool dsa_is_ipol_in_progress(DSA_IPOL_GROUP *igrp)</div><div class="ttdoc">Check if interpolation is in progress.</div><div class="ttdef"><b>Definition:</b> dsaipl.c:4981</div></div>
<div class="ttc" id="agroup__DSAAll_html_gaa4088cf13511aae9604a5bb73f541f4d"><div class="ttname"><a href="group__DSAAll.html#gaa4088cf13511aae9604a5bb73f541f4d">dsa_save_parameters_s</a></div><div class="ttdeci">int dsa_save_parameters_s(DSA_DEVICE_BASE *obj, int what, long timeout)</div><div class="ttdoc">Save the current parameters, sequences, lookup table in flash memory (Command:SAV) - synchronous.</div><div class="ttdef"><b>Definition:</b> dsapar.c:94</div></div>
<div class="ttc" id="adsa40_8h_html"><div class="ttname"><a href="dsa40_8h.html">dsa40.h</a></div><div class="ttdoc">EDI-Version : 4.25A This header file contains public declarations for the high level library.</div></div>
<div class="ttc" id="agroup__DSAAll_html_ga761fc038026cab6eb553817e18f34249"><div class="ttname"><a href="group__DSAAll.html#ga761fc038026cab6eb553817e18f34249">dsa_wait_status_equal_s</a></div><div class="ttdeci">int dsa_wait_status_equal_s(DSA_DEVICE *drv, DSA_STATUS *mask, DSA_STATUS *ref, DSA_STATUS *status, long timeout)</div><div class="ttdoc">Wait for the drive status equal to the specified status - synchronous.</div><div class="ttdef"><b>Definition:</b> dsasta.c:1117</div></div>
<div class="ttc" id="agroup__DSAAll_html_ga1ac49aec3eec6ec43ab45e2e9ce06469"><div class="ttname"><a href="group__DSAAll.html#ga1ac49aec3eec6ec43ab45e2e9ce06469">dsa_get_register_int32_s</a></div><div class="ttdeci">int dsa_get_register_int32_s(DSA_DEVICE *dev, int typ, unsigned idx, int sidx, int *val, int kind, long timeout)</div><div class="ttdoc">Get the drive register 32 bits integer value - synchronous.</div><div class="ttdef"><b>Definition:</b> dsagen.c:2592</div></div>
<div class="ttc" id="agroup__DSAAll_html_gac1612522ee28aa29d1b6735934b53a8a"><div class="ttname"><a href="group__DSAAll.html#gac1612522ee28aa29d1b6735934b53a8a">dsa_quick_stop_s</a></div><div class="ttdeci">int dsa_quick_stop_s(DSA_DRIVE_BASE *grp, int mode, dword flags, long timeout)</div><div class="ttdoc">Quick stop the drive (Command:HLT/STP/HLO/PWR/HLB/BRK) - synchronous.</div><div class="ttdef"><b>Definition:</b> dsafct.c:263</div></div>
<div class="ttc" id="agroup__DSAAll_html_ga4fb90f2d40b8a951e6d50afe3595e0d6"><div class="ttname"><a href="group__DSAAll.html#ga4fb90f2d40b8a951e6d50afe3595e0d6">dsa_ipol_circle_cw_c2d_s</a></div><div class="ttdeci">int dsa_ipol_circle_cw_c2d_s(DSA_IPOL_GROUP *igrp, double x, double y, double cx, double cy, long timeout)</div><div class="ttdoc">Define a clockwise circular segment (Command:ICW) - synchronous.</div><div class="ttdef"><b>Definition:</b> dsaipl.c:2303</div></div>
<div class="ttc" id="agroup__DSAAll_html_ga98dc88f92a6a1a061380968316fca8ae"><div class="ttname"><a href="group__DSAAll.html#ga98dc88f92a6a1a061380968316fca8ae">dsa_ipol_line_2d_s</a></div><div class="ttdeci">int dsa_ipol_line_2d_s(DSA_IPOL_GROUP *igrp, double x, double y, long timeout)</div><div class="ttdoc">Define a 2D linear segment (Command:ILINE) - synchronous.</div><div class="ttdef"><b>Definition:</b> dsaipl.c:2509</div></div>
<div class="ttc" id="agroup__DSAAll_html_ga0e7df7489cd9a13b0a106c83a4b15c8e"><div class="ttname"><a href="group__DSAAll.html#ga0e7df7489cd9a13b0a106c83a4b15c8e">dsa_set_master</a></div><div class="ttdeci">int dsa_set_master(DSA_IPOL_GROUP *grp, DSA_MASTER *master)</div><div class="ttdoc">Set master object member of interpolation group.</div><div class="ttdef"><b>Definition:</b> dsagrp.c:1443</div></div>
<div class="ttc" id="agroup__DSAAll_html_ga7647e24f7415c0573351aca11fb63f59"><div class="ttname"><a href="group__DSAAll.html#ga7647e24f7415c0573351aca11fb63f59">dsa_wait_movement_s</a></div><div class="ttdeci">int dsa_wait_movement_s(DSA_DEVICE_BASE *obj, long timeout)</div><div class="ttdoc">Wait the end of movement (Command:WTM) - synchronous.</div><div class="ttdef"><b>Definition:</b> dsawai.c:83</div></div>
<div class="ttc" id="agroup__DSAAll_html_gac9b91de55e4cec46b88c9dbd1f97f8f2"><div class="ttname"><a href="group__DSAAll.html#gac9b91de55e4cec46b88c9dbd1f97f8f2">dsa_ipol_begin_s</a></div><div class="ttdeci">int dsa_ipol_begin_s(DSA_IPOL_GROUP *igrp, long timeout)</div><div class="ttdoc">Switch the drives in the interpolation mode (Command:ISET + IBEGIN) - synchronous.</div><div class="ttdef"><b>Definition:</b> dsaipl.c:188</div></div>
<div class="ttc" id="agroup__DSAAll_html_ga9aa135bc2e94b71315b5a3b7628bcff0"><div class="ttname"><a href="group__DSAAll.html#ga9aa135bc2e94b71315b5a3b7628bcff0">dsa_new_setpoint_s</a></div><div class="ttdeci">int dsa_new_setpoint_s(DSA_DRIVE_BASE *grp, int sidx, dword flags, long timeout)</div><div class="ttdoc">Define a new setpoint (Command:STA) - synchronous.</div><div class="ttdef"><b>Definition:</b> dsafct.c:450</div></div>
<div class="ttc" id="agroup__DSAAll_html_gabca5df9b7fb98299c620827b88bb733c"><div class="ttname"><a href="group__DSAAll.html#gabca5df9b7fb98299c620827b88bb733c">dsa_is_open</a></div><div class="ttdeci">int dsa_is_open(DSA_DEVICE *dev, ebool *is_open)</div><div class="ttdoc">Return true if the device is open.</div><div class="ttdef"><b>Definition:</b> dsaopn.c:1700</div></div>
<div class="ttc" id="agroup__DSAAll_html_ga37ba1696e4f066cae222c2b7e98d54f9"><div class="ttname"><a href="group__DSAAll.html#ga37ba1696e4f066cae222c2b7e98d54f9">dsa_get_group_item</a></div><div class="ttdeci">int dsa_get_group_item(DSA_DEVICE_GROUP *grp, int pos, DSA_DEVICE_BASE **rdev)</div><div class="ttdoc">Get the specified element of the group structure.</div><div class="ttdef"><b>Definition:</b> dsagrp.c:492</div></div>
<!-- HTML footer for doxygen 1.8.20-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Copyright by <a href="http://www.etel.ch"><img class="footer" src="ETELLogo.gif" width="104" height="31" alt="ETEL"/></a> on Thu Aug 26 2021 </li>
  </ul>
</div>
</body>
</html>
